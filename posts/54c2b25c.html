<!DOCTYPE html>
<html  lang="zh">
<head>
    <meta charset="utf-8" />
<script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>

<meta name="generator" content="Hexo 4.2.1" />

<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />

<title>V2ray+WebSocket+TLS+Nginx - comebey</title>


    <meta name="description" content="Finalshell SSHè¿æ¥å·¥å…·ä¸‹è½½Mobaxterm SSHè¿æ¥å·¥å…·ä¸‹è½½ centos7ç³»ç»Ÿç¯å¢ƒæ­å»ºï¼Œæ¸©é¦¨æç¤ºï¼šè¯·ä½¿ç”¨centos7ç³»ç»Ÿæ­å»ºï¼Œå¦‚æœå­¦ä¹ èƒ½åŠ›å¼ºå¯ä»¥Googleæœç´¢Debianæˆ–å…¶ä»–ç³»ç»Ÿæ­å»ºæ–¹æ³•ï¼Œåªæ˜¯éƒ¨åˆ†ä»£ç ä¸ä¸€æ ·è€Œå·²ï¼ŒV2Ray+WebSocket+TLS+Nginx å‰å‡ æœŸè§†é¢‘åˆ†åˆ«æåˆ°è¿‡ TLS å’Œ WebSocket çš„é…ç½®æ–¹æ³•ï¼Œè€Œæœ¬æ–‡æ­é… Web æœåŠ¡å¹¶åŒæ—¶å®ç° TLS">
<meta property="og:type" content="article">
<meta property="og:title" content="V2ray+WebSocket+TLS+Nginx">
<meta property="og:url" content="https://www.rootfw.com/posts/54c2b25c.html">
<meta property="og:site_name" content="comebey">
<meta property="og:description" content="Finalshell SSHè¿æ¥å·¥å…·ä¸‹è½½Mobaxterm SSHè¿æ¥å·¥å…·ä¸‹è½½ centos7ç³»ç»Ÿç¯å¢ƒæ­å»ºï¼Œæ¸©é¦¨æç¤ºï¼šè¯·ä½¿ç”¨centos7ç³»ç»Ÿæ­å»ºï¼Œå¦‚æœå­¦ä¹ èƒ½åŠ›å¼ºå¯ä»¥Googleæœç´¢Debianæˆ–å…¶ä»–ç³»ç»Ÿæ­å»ºæ–¹æ³•ï¼Œåªæ˜¯éƒ¨åˆ†ä»£ç ä¸ä¸€æ ·è€Œå·²ï¼ŒV2Ray+WebSocket+TLS+Nginx å‰å‡ æœŸè§†é¢‘åˆ†åˆ«æåˆ°è¿‡ TLS å’Œ WebSocket çš„é…ç½®æ–¹æ³•ï¼Œè€Œæœ¬æ–‡æ­é… Web æœåŠ¡å¹¶åŒæ—¶å®ç° TLS">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://www.rootfw.com/images/og_image.png">
<meta property="article:published_time" content="2020-06-16T13:34:25.000Z">
<meta property="article:modified_time" content="2021-02-04T05:49:22.443Z">
<meta property="article:author" content="comebey">
<meta property="article:tag" content="v2ray">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://www.rootfw.com/images/og_image.png">







<link rel="icon" href="https://cdn.jsdelivr.net/gh/ComeBey/imghosting/comebey-pic/é˜²ç«å¢™.svg">


<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.7.2/css/bulma.css">
<link rel="stylesheet" href="https://cdnjs.loli.net/ajax/libs/font-awesome/5.4.1/css/all.min.css">
<link rel="stylesheet" href="https://fonts.loli.net/css?family=Ubuntu:400,600|Source+Code+Pro">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@9.12.0/styles/github-gist.css">


    
    
<style>body>.footer,body>.navbar,body>.section{opacity:0}</style>

    
    
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/css/lightgallery.min.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/css/justifiedGallery.min.css">

    
    
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/outdatedbrowser@1.1.5/outdatedbrowser/outdatedbrowser.min.css">

    
    
    
    
<link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/ComeBey/comebey.github.io@master/css/back-to-top.css">

    
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-174250713-1"></script>
<script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-174250713-1');
</script>

    
    <script>
var _hmt = _hmt || [];
(function() {
    var hm = document.createElement("script");
    hm.src = "//hm.baidu.com/hm.js?eb7ec9441757d71902ddc95dbe898eb4";
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(hm, s);
})();
</script>
    
    <link rel="stylesheet" href="/css/progressbar.css">
<script src="https://cdn.jsdelivr.net/npm/pace-js@1.0.2/pace.min.js"></script>
    
    <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
    


<link rel="stylesheet" href="/css/style.css">




    <meta name="keywords" content="v2ray,xtls,comebey,v2rayæ­å»º,vless,hasan W,xray,rootfw">
    

 
<link rel="alternate" href="/atom.xml" title="comebey" type="application/atom+xml">
</head>
<body class="is-3-column">
    <nav class="navbar navbar-main">
    <div class="container">
        <div class="navbar-brand is-flex-center">
            <a class="navbar-item navbar-logo" href="/">
            
                <img src="https://cdn.jsdelivr.net/gh/ComeBey/imghosting/comebey-pic/é˜²ç«å¢™.svg" alt="V2ray+WebSocket+TLS+Nginx" height="36">
                <span style="font-size:16px;display:inline-block;vertical-align:top;font-weight:600">ROOTFW</span>
            
            </a>
        </div>
        <div class="navbar-menu">
            
            <div class="navbar-start">
                
                <a class="navbar-item"
                href="/">é¦–é¡µ</a>
                
                <a class="navbar-item"
                href="/archives">å½’æ¡£</a>
                
                <a class="navbar-item"
                href="/categories">åˆ†ç±»</a>
                
                <a class="navbar-item"
                href="/tags">æ ‡ç­¾</a>
                
                <a class="navbar-item"
                href="https://www.ipsilo.net">IPLCæœºåœº</a>
                
                <a class="navbar-item"
                href="https://rootfw.com/en/">English</a>
                
            </div>
            
            <div class="navbar-end">
                
                
                <a class="navbar-item is-hidden-tablet catalogue" title="ç›®å½•" href="javascript:;" rel="external nofollow noreferrer">
                    <i class="fas fa-list-ul"></i>
                </a>
                
                
                <a class="navbar-item search" title="æœç´¢" href="javascript:;" rel="external nofollow noreferrer">
                    <img src="https://cdn.jsdelivr.net/gh/ComeBey/imghosting/comebey-pic/æœç´¢æ¡†ä¸­çš„æ”¾å¤§é•œ.svg" style="height: 25px;width: 25px;">
                </a>
                
            </div>
        </div>
    </div>
</nav>
    
    <section class="section">
        <div class="container">
            <div class="columns">
                <div class="column is-8-tablet is-8-desktop is-9-widescreen has-order-2 column-main">
<div class="card">
    
    <div class="card-content article ">
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                <i class="fas fa-angle-double-right"></i>V2ray+WebSocket+TLS+Nginx
            
        </h1>
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2020-06-16T13:34:25.000Z"><img src="https://cdn.jsdelivr.net/gh/ComeBey/imghosting/comebey-pic/æ—¥å† (1).svg"style="height: 17px;width: 17px;">&nbsp;2020-06-16</time>
                
                <!--<time class="level-item has-text-grey is-hidden-mobile" datetime="2021-02-04T05:49:22.443Z"><i class="far fa-calendar-check">&nbsp;</i>2021-02-04</time>-->
                
                
                <div class="level-item">
                    <img src="https://cdn.jsdelivr.net/gh/ComeBey/imghosting/comebey-pic/æ–‡æ¡£ (1).svg" style="height: 16px;width: 16px;">&nbsp;
                <a class="has-link-grey -link" href="/categories/%E7%A7%91%E5%AD%A6%E4%B8%8A%E7%BD%91/">ç§‘å­¦ä¸Šç½‘</a>&nbsp;/&nbsp;<a class="has-link-grey -link" href="/categories/%E7%A7%91%E5%AD%A6%E4%B8%8A%E7%BD%91/v2ray/">v2ray</a>
                </div>
                
                
                
                <span class="level-item has-text-grey" id="busuanzi_container_page_pv">
                    <i class="far fa-eye"></i>
                    <span id="busuanzi_value_page_pv">0</span>æ¬¡è®¿é—®
                </span>
                
            </div>
        </div>
        
        <div class="content">
            <p><a href="https://www.hostbuf.com/t/988.html" rel="external nofollow noreferrer">Finalshell SSHè¿æ¥å·¥å…·ä¸‹è½½</a><br><a href="https://mobaxterm.mobatek.net/download-home-edition.html" rel="external nofollow noreferrer">Mobaxterm SSHè¿æ¥å·¥å…·ä¸‹è½½</a></p>
<p><strong>centos7ç³»ç»Ÿç¯å¢ƒæ­å»ºï¼Œæ¸©é¦¨æç¤ºï¼šè¯·ä½¿ç”¨centos7ç³»ç»Ÿæ­å»ºï¼Œå¦‚æœå­¦ä¹ èƒ½åŠ›å¼ºå¯ä»¥Googleæœç´¢Debianæˆ–å…¶ä»–ç³»ç»Ÿæ­å»ºæ–¹æ³•ï¼Œåªæ˜¯éƒ¨åˆ†ä»£ç ä¸ä¸€æ ·è€Œå·²ï¼ŒV2Ray+WebSocket+TLS+Nginx å‰å‡ æœŸè§†é¢‘åˆ†åˆ«æåˆ°è¿‡ TLS å’Œ WebSocket çš„é…ç½®æ–¹æ³•ï¼Œè€Œæœ¬æ–‡æ­é… Web æœåŠ¡å¹¶åŒæ—¶å®ç° TLS å’Œ WebSocketæµè§ˆå™¨åŸŸåè®¿é—®è‡ªåŠ¨è·³è½¬httpsæœ‰ç®€å•å‰ç«¯ç½‘é¡µã€‚å…³äº Web çš„è½¯ä»¶å®˜æ–¹ç»™å‡ºNginxï¼ŒCaddy å’Œ Apache ä¸‰ä¸ªä¾‹å­ï¼Œä¸‰é€‰ä¸€å³å¯</strong></p>
<a id="more"></a>
<h3 id="å®‰è£…å‰å‡†å¤‡"><a href="#å®‰è£…å‰å‡†å¤‡" class="headerlink" title="å®‰è£…å‰å‡†å¤‡"></a>å®‰è£…å‰å‡†å¤‡</h3><h4 id="æ›´æ–°æœåŠ¡å™¨"><a href="#æ›´æ–°æœåŠ¡å™¨" class="headerlink" title="æ›´æ–°æœåŠ¡å™¨"></a><strong>æ›´æ–°æœåŠ¡å™¨</strong></h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum update -y</span><br></pre></td></tr></table></figure>

<h4 id="æ›´æ”¹rootå¯†ç "><a href="#æ›´æ”¹rootå¯†ç " class="headerlink" title="æ›´æ”¹rootå¯†ç "></a>æ›´æ”¹rootå¯†ç </h4><p><a href="https://www.rootfw.com/posts/3828c730.html">centos debianæœåŠ¡å™¨rootå¯†ç æ›´æ”¹</a></p>
<h4 id="å®‰è£…bbr"><a href="#å®‰è£…bbr" class="headerlink" title="å®‰è£…bbr"></a>å®‰è£…bbr</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">centos7ç³»ç»Ÿ</span><br><span class="line">yum -y install wget</span><br><span class="line">wget <span class="string">"https://raw.githubusercontent.com/ComeBey/rootfw-bbr/master/tcp.sh"</span> &amp;&amp; chmod +x tcp.sh &amp;&amp; ./tcp.sh  </span><br><span class="line"></span><br><span class="line">debianç³»ç»Ÿ  è¯·ç¡®å®šæœåŠ¡å™¨å·²ç»å®‰è£…äº†wget å¦‚æ²¡æœ‰æŒ‰ç…§è¯·å…ˆæ‰§è¡Œè¿™æ¡ä»£ç  apt-get install wget</span><br><span class="line">wget --no-check-certificate -O tcp.sh https://github.com/cx9208/Linux-NetSpeed/raw/master/tcp.sh &amp;&amp; chmod +x tcp.sh &amp;&amp; ./tcp.sh</span><br></pre></td></tr></table></figure>

<h3 id="å®‰è£…v2rayä»£ç "><a href="#å®‰è£…v2rayä»£ç " class="headerlink" title="å®‰è£…v2rayä»£ç "></a>å®‰è£…v2rayä»£ç </h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bash &lt;(curl -L -s https://install.direct/go.sh) <span class="comment">#è€ç‰ˆæœ¬çš„å¤±æ•ˆ</span></span><br></pre></td></tr></table></figure>
<h4 id="å®‰è£å’Œæ›´æ–°V2Ray"><a href="#å®‰è£å’Œæ›´æ–°V2Ray" class="headerlink" title="å®‰è£å’Œæ›´æ–°V2Ray"></a>å®‰è£å’Œæ›´æ–°V2Ray</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bash &lt;(curl -L https://raw.githubusercontent.com/v2fly/fhs-install-v2ray/master/install-release.sh)</span><br></pre></td></tr></table></figure>

<h4 id="å®‰è£…geoipå’Œgeosite"><a href="#å®‰è£…geoipå’Œgeosite" class="headerlink" title="å®‰è£…geoipå’Œgeosite"></a>å®‰è£…geoipå’Œgeosite</h4><figure class="highlight"><figcaption><span>install update geoip.dat and geosite.date</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bash &lt;(curl -L https://raw.githubusercontent.com/v2fly/fhs-install-v2ray/master/install-dat-release.sh)</span><br></pre></td></tr></table></figure>
<h4 id="æ¸©é¦¨æç¤º"><a href="#æ¸©é¦¨æç¤º" class="headerlink" title="æ¸©é¦¨æç¤º"></a>æ¸©é¦¨æç¤º</h4><figure class="highlight"><figcaption><span>å¸è½½v2ray</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bash &lt;(curl -L https://raw.githubusercontent.com/v2fly/fhs-install-v2ray/master/install-release.sh) --remove</span><br></pre></td></tr></table></figure>

<p>å®‰è£…æˆåŠŸåæ‰§è¡Œ <strong>vi /etc/v2ray/config.json</strong> é•¿æŒ‰é”®ç›˜Dé”®åˆ æ‰€æœ‰ä»£ç ï¼Œåœ¨è¾“å…¥é”®ç›˜Insé”®è¿›å…¥å¯ç¼–è¾‘çŠ¶æ€ï¼Œå¤åˆ¶ä»¥ä¸‹ä»£ç å é»è´´åˆ°é…ç½®ä¸­æŒ‰é”®ç›˜Escé”®ï¼Œåœ¨åŒæ—¶æŒ‰é”®ç›˜<strong>shift+ï¼šè¾“å…¥wqä¿å­˜é€€å‡º</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line">//å¤åˆ¶ä»¥ä¸‹ä»£ç </span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">"log"</span> : &#123;</span><br><span class="line">    <span class="string">"access"</span>: <span class="string">"/var/log/v2ray/access.log"</span>,</span><br><span class="line">    <span class="string">"error"</span>: <span class="string">"/var/log/v2ray/error.log"</span>,</span><br><span class="line">    <span class="string">"loglevel"</span>: <span class="string">"warning"</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="string">"inbound"</span>: &#123;</span><br><span class="line">    <span class="string">"port"</span>: 9000, //é‡ç‚¹(æ­¤ç«¯å£ä¸nginxé…ç½®ä¿æŒä¸€è‡´)</span><br><span class="line">    <span class="string">"listen"</span>: <span class="string">"127.0.0.1"</span>, //é‡ç‚¹(æ­¤ç«¯å£ä¸nginxé…ç½®ä¿æŒä¸€è‡´)</span><br><span class="line">    <span class="string">"protocol"</span>: <span class="string">"vmess"</span>,</span><br><span class="line">    <span class="string">"settings"</span>: &#123;</span><br><span class="line">      <span class="string">"clients"</span>: [</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="string">"id"</span>: <span class="string">"eb950add-608e-409d-937f-e797324387093z"</span>, //ä½ çš„UUIDï¼Œå¯æ›´æ”¹éœ€ä¸å®¢æˆ·ç«¯ä¿æŒä¸€è‡´ </span><br><span class="line">          <span class="string">"level"</span>: 1,</span><br><span class="line">          <span class="string">"alterId"</span>: 64 //æ­¤IDä¹Ÿéœ€ä¸å®¢æˆ·ç«¯ä¿æŒä¸€è‡´ï¼ˆä¸è¦è®¾ç½®è¶…è¿‡100ä»¥ä¸Šå¯è‡ªå®šä¹‰ï¼‰</span><br><span class="line">        &#125;</span><br><span class="line">      ]</span><br><span class="line">    &#125;,</span><br><span class="line">   <span class="string">"streamSettings"</span>:&#123;</span><br><span class="line">      <span class="string">"network"</span>: <span class="string">"ws"</span>, //å¯è®¾ç½®tcpç­‰</span><br><span class="line">      <span class="string">"wsSettings"</span>: &#123;</span><br><span class="line">           <span class="string">"path"</span>: <span class="string">"/v2ray"</span> //ä¸nginxé…ç½®ç›¸å…³ï¼ˆå¯è‡ªå®šä¹‰ï¼‰</span><br><span class="line">      &#125;</span><br><span class="line">   &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="string">"outbound"</span>: &#123;</span><br><span class="line">    <span class="string">"protocol"</span>: <span class="string">"freedom"</span>,</span><br><span class="line">    <span class="string">"settings"</span>: &#123;&#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="string">"outboundDetour"</span>: [</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="string">"protocol"</span>: <span class="string">"blackhole"</span>,</span><br><span class="line">      <span class="string">"settings"</span>: &#123;&#125;,</span><br><span class="line">      <span class="string">"tag"</span>: <span class="string">"blocked"</span></span><br><span class="line">    &#125;</span><br><span class="line">  ],</span><br><span class="line">  <span class="string">"routing"</span>: &#123;</span><br><span class="line">    <span class="string">"strategy"</span>: <span class="string">"rules"</span>,</span><br><span class="line">    <span class="string">"settings"</span>: &#123;</span><br><span class="line">      <span class="string">"rules"</span>: [</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="string">"type"</span>: <span class="string">"field"</span>,</span><br><span class="line">          <span class="string">"ip"</span>: [</span><br><span class="line">            <span class="string">"0.0.0.0/8"</span>,</span><br><span class="line">            <span class="string">"10.0.0.0/8"</span>,</span><br><span class="line">            <span class="string">"100.64.0.0/10"</span>,</span><br><span class="line">            <span class="string">"127.0.0.0/8"</span>,</span><br><span class="line">            <span class="string">"169.254.0.0/16"</span>,</span><br><span class="line">            <span class="string">"172.16.0.0/12"</span>,</span><br><span class="line">            <span class="string">"192.0.0.0/24"</span>,</span><br><span class="line">            <span class="string">"192.0.2.0/24"</span>,</span><br><span class="line">            <span class="string">"192.168.0.0/16"</span>,</span><br><span class="line">            <span class="string">"198.18.0.0/15"</span>,</span><br><span class="line">            <span class="string">"198.51.100.0/24"</span>,</span><br><span class="line">            <span class="string">"203.0.113.0/24"</span>,</span><br><span class="line">            <span class="string">"::1/128"</span>,</span><br><span class="line">            <span class="string">"fc00::/7"</span>,</span><br><span class="line">            <span class="string">"fe80::/10"</span></span><br><span class="line">          ],</span><br><span class="line">          <span class="string">"outboundTag"</span>: <span class="string">"blocked"</span></span><br><span class="line">        &#125;</span><br><span class="line">      ]</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ä½ å¯ä»¥è¾“å…¥  service v2ray restart  åœ¨è¾“å…¥  service v2ray status -l <span class="comment">#çœ‹çœ‹æ˜¯å¦è¿è¡ŒæˆåŠŸ</span></span><br><span class="line">service v2ray start|stop|status|reload|restart|force-reload    <span class="comment">#è°ƒè¯• V2Ray çš„è¿è¡Œä»£ç </span></span><br></pre></td></tr></table></figure>
<p>æ‰“å¼€ 80ï¼ˆHTTPï¼‰å’Œ 443ï¼ˆHTTPSï¼‰ç«¯å£(å¦‚æœçœ‹è¿‡æˆ‘å‰å‡ æœŸè§†é¢‘ï¼Œç¡®å®šé˜²ç«å¢™è§„åˆ™è®¾ç½®å¥½äº†ï¼Œè°·æ­Œäº‘å¯ä»¥å¿½ç•¥ã€‚å…¶ä»–å“ç‰ŒæœåŠ¡å™¨è¯·ç¡®è®¤å·²ç»å¼€å¯äº†80å’Œ443ç«¯å£å¦‚æœæ²¡æœ‰å¯å°è¯•ä¸‹é¢ä»£ç æ“ä½œæˆ–è€…æœåŠ¡å™¨ç½‘é¡µç«¯<br>å¼€å¯<code>http80ç«¯å£</code>å’Œ<code>https 443ç«¯å£</code>)</p>
<p>ä¹Ÿå¯ä»¥é€šè¿‡ä¸‹é¢çš„å‘½ä»¤æ¥æ‰“å¼€è¿™ä¸¤ä¸ªç«¯å£:è¯·è‡ªè¡Œå¼€å¯é˜²ç«å¢™å¼€æœºå¯åŠ¨</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo firewall-cmd --permanent --zone=public --add-service=http</span><br><span class="line">sudo firewall-cmd --permanent --zone=public --add-service=https</span><br><span class="line">sudo firewall-cmd --reload</span><br></pre></td></tr></table></figure>


<h3 id="å®‰è£…NGINX"><a href="#å®‰è£…NGINX" class="headerlink" title="å®‰è£…NGINX"></a>å®‰è£…NGINX</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#å®‰è£… EPEL ä»“åº“ï¼ˆè°·æ­Œäº‘å¿½ç•¥æ­¤æ­¥éª¤ï¼Œå¦‚æœä½ æ˜¯ä½¿ç”¨å…¶ä»–å“ç‰ŒvpsæœåŠ¡å™¨å¦‚æœæ²¡æœ‰å®‰è£…EPELè¯·å…ˆå®‰è£…ï¼‰</span></span><br><span class="line">sudo yum install epel-release</span><br><span class="line"></span><br><span class="line"><span class="comment">#å®‰è£… Nginx  ã€ yum remove nginx å¦‚æœæƒ³åˆ é™¤nginxå¸è½½å‘½ä»¤ ã€‘</span></span><br><span class="line">sudo yum install nginx</span><br><span class="line"></span><br><span class="line">sudo systemctl <span class="built_in">enable</span> nginx.service         <span class="comment">#è®¾ç½®å¼€æœºå¯åŠ¨Nginx</span></span><br><span class="line"></span><br><span class="line">sudo systemctl start nginx.service          <span class="comment">#å¯åŠ¨NginxæœåŠ¡</span></span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">è°ƒè¯•ä»£ç å¦‚ä¸‹ï¼š</span><br><span class="line">sudo systemctl start nginx.service                //å¼€å¯ Nginx</span><br><span class="line">sudo systemctl stop nginx.service                //åœæ­¢ Nginx</span><br><span class="line">sudo systemctl status -l nginx.service          //æŸ¥çœ‹ Nginxè¿è¡ŒçŠ¶æ€</span><br><span class="line">sudo systemctl restart nginx.service            //é‡æ–°å¯åŠ¨ Nginx</span><br><span class="line">sudo systemctl <span class="built_in">disable</span> nginx.service           //å–æ¶ˆå¼€æœºå¯åŠ¨ Nginx</span><br><span class="line">sudo systemctl reload nginx.service           //é‡è½½Nginx (å¦‚æ›´æ”¹Nginxé…ç½®éœ€è¦é‡æ–°è½½å…¥æ•°æ®)</span><br><span class="line">sudo systemctl <span class="built_in">enable</span> nginx.service            //å¼€æœºå¯åŠ¨</span><br><span class="line">     </span><br><span class="line">     </span><br><span class="line">è°ƒè¯•ä»£ç å¦‚ä¸‹ï¼š Nginxè°ƒè¯•ä¹Ÿå¯ä»¥ä¸éœ€è¦ä»£ç åé¢æ·»åŠ  **.service** è¯·å…ˆ**sudo systemctl start nginx.service**</span><br><span class="line">å’Œ**sudo systemctl <span class="built_in">enable</span> nginx.service** ç„¶ååœ¨é€šè¿‡ä¸‹é¢ä»£ç ä¹Ÿå¯ä»¥è°ƒè¯•.</span><br><span class="line"></span><br><span class="line">sudo systemctl start nginx              //å¼€å¯ Nginx</span><br><span class="line">sudo systemctl stop nginx              //åœæ­¢ Nginx</span><br><span class="line">sudo systemctl status -l nginx        //æŸ¥çœ‹ Nginxè¿è¡ŒçŠ¶æ€</span><br><span class="line">sudo systemctl restart nginx             //é‡æ–°å¯åŠ¨ Nginx</span><br><span class="line">sudo systemctl <span class="built_in">disable</span> nginx           //å–æ¶ˆå¼€æœºå¯åŠ¨ Nginx</span><br><span class="line">sudo systemctl reload nginx          //é‡è½½Nginx (å¦‚æ›´æ”¹Nginxé…ç½®éœ€è¦é‡æ–°è½½å…¥æ•°æ®)</span><br><span class="line">sudo systemctl <span class="built_in">enable</span> nginx          //å¼€æœºå¯åŠ¨</span><br></pre></td></tr></table></figure>

<p>é€šè¿‡ä»¥ä¸Šæ–¹å¼å®‰è£…çš„ Nginxï¼Œæ‰€æœ‰ç›¸å…³çš„é…ç½®æ–‡ä»¶éƒ½åœ¨ /etc/nginx/ ç›®å½•ä¸­<br><strong>Nginx çš„ä¸»é…ç½®æ–‡ä»¶æ˜¯ /etc/nginx/nginx.conf</strong><br><strong>Nginx æ—¥å¿—æ–‡ä»¶ï¼ˆaccess.log å’Œ error.log ï¼‰ä½äº /var/log/nginx/ ç›®å½•ä¸­ã€‚</strong></p>
<p>å¦‚æœåœ¨è®¾ç½®å®Œæˆä¹‹åä¸èƒ½æˆåŠŸä½¿ç”¨ï¼Œå¯èƒ½æ˜¯ç”±äº SElinux æœºåˆ¶(å¦‚æœä½ æ˜¯ CentOS 7 çš„ç”¨æˆ·è¯·ç‰¹åˆ«ç•™æ„SElinux è¿™ä¸€æœºåˆ¶)é˜»æ­¢äº† Nginx è½¬å‘å‘å†…ç½‘çš„æ•°æ®<br>å¦‚æœæ˜¯è¿™æ ·çš„è¯ï¼Œåœ¨V2Rayçš„æ—¥å¿—é‡Œä¸ä¼šæœ‰è®¿é—®ä¿¡æ¯ï¼Œåœ¨ Nginx çš„æ—¥å¿—é‡Œä¼šå‡ºç°å¤§é‡çš„ â€œPermission Deniedâ€ å­—æ®µ<br>è¦è§£å†³è¿™ä¸€é—®é¢˜éœ€è¦åœ¨ç»ˆç«¯ä¸‹é”®å…¥ä»¥ä¸‹å‘½ä»¤ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">setsebool -P httpd_can_network_connect 1    &#x2F;&#x2F;debianå¿½ç•¥</span><br></pre></td></tr></table></figure>
<p>éªŒè¯ Nginx æ˜¯å¦æˆåŠŸå¯åŠ¨ï¼Œå¯ä»¥åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€ <a href="http://YOUR_IP" rel="external nofollow noreferrer">http://YOUR_IP</a>   æ³¨æ„ï¼šæ‰“å¼€åˆ™æ˜¾ç¤ºcentosç½‘é¡µ ä½†æ˜¯æç¤ºä¸å®‰å…¨ç½‘ç«™æ²¡å¼€å¯sslåŠ å¯†https</p>
<h3 id="ç”Ÿæˆè¯ä¹¦"><a href="#ç”Ÿæˆè¯ä¹¦" class="headerlink" title="ç”Ÿæˆè¯ä¹¦"></a>ç”Ÿæˆè¯ä¹¦</h3><p><strong>å¦‚æœä½ å·²ç»æœ‰å…¶ä»–è¯ä¹¦å¯å¿½ç•¥ï¼ŒæŠŠè¯ä¹¦å’Œå¯†é’¥æ”¾åˆ°æœåŠ¡å™¨æŒ‡å®šç›®å½•ä¸‹ï¼Œåªéœ€åœ¨Nginx ä¸­æŒ‡å®š è¯ä¹¦å’Œå¯†é’¥è·¯å¾„ã€‚ç”³è¯·è¯ä¹¦æ–¹æ³•å¤ªå¤šå¯é€šè¿‡å®‰è£…acme.shå·¥å…·ç”Ÿæˆè¯ä¹¦æˆ–å…¶ä»–æ–¹æ³•ç”Ÿæˆè¯ä¹¦ï¼Œå¯Googleæœç´¢ã€‚</strong></p>
<p><strong>1.å®‰è£…acem.shè¯ä¹¦ç”Ÿæˆå·¥å…·ï¼Œä»¥ä¸‹æä¾›3ç§æ–¹æ³•å®‰è£…ï¼Œé€‰å…¶ä¸­ä»»æ„ä¸€ç§æ–¹æ³•å®‰è£…è¯ä¹¦å·¥å…· (æ¸©é¦¨æç¤ºï¼šè‡ªåŠ¨å‡çº§acme.shåœ¨rootä¸‹è¾“å…¥ acme.sh upgrade)</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">curl  https://get.acme.sh | sh   // å¦‚æç¤ºå®‰è£…å¤±è´¥ è¯·å…ˆå®‰è£…curl è¾“å…¥ yum -y install curl</span><br><span class="line">wget -O -  https://get.acme.sh | sh     //å¦‚æç¤ºå®‰è£…å¤±è´¥è¯·ï¼ˆå…ˆå®‰è£…wgetï¼‰è¾“å…¥ yum -y install wget å·²ç»å®‰è£…äº†å¿½ç•¥</span><br><span class="line">git <span class="built_in">clone</span> https://github.com/acmesh-official/acme.sh.git   // å¦‚æç¤ºå®‰è£…å¤±è´¥ å…ˆå®‰è£…git å·²ç»å®‰è£…äº†çš„å¿½ç•¥ è¾“å…¥ yum install git</span><br><span class="line"><span class="built_in">cd</span> ./acme.sh</span><br><span class="line">./acme.sh --install</span><br></pre></td></tr></table></figure>
<p>é€šè¿‡ä»¥ä¸Šä»£ç å®‰è£…acme.shæç¤ºçº¢è‰²æŠ±é”™ ä½ å¯ä»¥æŒ‰å®é™…ç›¸å…³æƒ…å†µè€Œå®šå®‰è£…ä¾èµ– æ¯”å¦‚å®‰è£…socat æˆ–è€… netcat<br>       <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">centos7  yum install openssl</span><br><span class="line">centos7  yum install socat  <span class="comment">#é€šè¿‡80ç«¯å£ç”Ÿæˆè¯ä¹¦çš„ä¾èµ–</span></span><br><span class="line">centos7  yum isntall netcat</span><br><span class="line"></span><br><span class="line">debian  apt-get install openssl cron socat curl</span><br><span class="line">debian  apt-get -y install netcat</span><br><span class="line">debian  apt-get -y install socat <span class="comment">#é€šè¿‡80ç«¯å£ç”Ÿæˆè¯ä¹¦çš„ä¾èµ–</span></span><br><span class="line"></span><br><span class="line">å®‰è£…æˆåŠŸåæ‰§è¡Œ <span class="built_in">source</span> ~/.bashrc  ä»¥ç¡®ä¿è„šæœ¬æ‰€è®¾ç½®çš„å‘½ä»¤åˆ«åç”Ÿæ•ˆ</span><br></pre></td></tr></table></figure></p>
<p><strong>2.ç”Ÿæˆè¯ä¹¦ è·¯å¾„ä¸º/root/.acme.shæ–‡ä»¶ä¸‹ å®‰è£…å¥½åå¯è‡ªè¡ŒæŸ¥çœ‹</strong><br>  <strong>æ¸©é¦¨æç¤ºï¼šé€šè¿‡acme.shç”Ÿæˆè¯ä¹¦æœ‰å¤šç§æ–¹æ³•ï¼š</strong><br>  ä¾‹å¦‚â€”è‡ªåŠ¨DNS APIé›†æˆ å¦‚ï¼šcloudflare DNS API ä»¤ç‰Œ å’Œ ä½¿ç”¨å…¨å±€APIå¯†é’¥ acme.shæ”¯æŒå¤§å¤šæ•°dnsç”Ÿæˆè¯ä¹¦<br>  ä¾‹å¦‚â€”ä½¿ç”¨DNSæ‰‹åŠ¨æ¨¡å¼ï¼Œç­‰å¤šç§å…¶ä»–å®‰è£…æ–¹æ³•ï¼Œå¦‚æœä½ æ˜¯ä¸ªå¥½å­¦çš„äººå¯Google </p>
<p>  ç”Ÿæˆè¯ä¹¦å¦‚ä¸‹ï¼šæœ¬æœŸè§†é¢‘åªç”¨æŒ‡å®šç«¯å£ ç”Ÿæˆè¯ä¹¦ <strong>æ¨èä½¿ç”¨443ç«¯å£ç”Ÿæˆè¯ä¹¦</strong> ï¼ˆä¸€èˆ¬ç”¨å•åŸŸåè¶³ä»¥ï¼Œæ¯•ç«Ÿæ˜¯ç¿»å¢™ç”¨æ— éœ€æé‚£ä¹ˆå¤šèŠ±é‡Œèƒ¡å“¨çš„å¤šåŸŸï¼Œæ¯”å¦‚ï¼šä¸»åŸŸbaidu.comé‚£ä¹ˆä¸å»ºè®®ä½¿ç”¨<a href="http://www.baidu.com,å› ä¸ºæ˜¯ç¿»å¢™çš„å‰ç«¯webè¯·è‡ªå®šä¹‰æ¯”å¦‚tw.baidu.com,å‰ç¼€twå¯ä»¥è‡ªå®šä¹‰è¯·ä¸è¦å†™å¤ªé•¿ï¼Œä¸»åŸŸbaidu.comå’ŒäºŒçº§www.baidu.comå¯ä»¥å¤‡ç”¨ä½ æ‡‚çš„ï¼‰" rel="external nofollow noreferrer">www.baidu.com,å› ä¸ºæ˜¯ç¿»å¢™çš„å‰ç«¯webè¯·è‡ªå®šä¹‰æ¯”å¦‚tw.baidu.com,å‰ç¼€twå¯ä»¥è‡ªå®šä¹‰è¯·ä¸è¦å†™å¤ªé•¿ï¼Œä¸»åŸŸbaidu.comå’ŒäºŒçº§www.baidu.comå¯ä»¥å¤‡ç”¨ä½ æ‡‚çš„ï¼‰</a></p>
<p><strong>1.é€šè¿‡ä¾¦å¬80ç«¯å£ç”³è¯·è¯ä¹¦ï¼Œå¦‚æœ80ç«¯å£è¢«å ç”¨,è¯·ä½¿ç”¨443ç«¯å£,è¯·ç¡®ä¿è¿™äº›ç«¯å£éƒ½æ‰“å¼€äº†</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo ~&#x2F;.acme.sh&#x2F;acme.sh --issue -d åŸŸå --standalone -k ec-256</span><br></pre></td></tr></table></figure>
<p><strong>2.å¦‚æœæ‚¨80åœ¨åå‘ä»£ç†æˆ–è´Ÿè½½å‡è¡¡å™¨åé¢ä½¿ç”¨éæ ‡å‡†ç«¯å£ï¼Œåˆ™å¯ä»¥â€“httpportç”¨æ¥æŒ‡å®šç«¯å£</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo ~&#x2F;.acme.sh&#x2F;acme.sh --issue -d åŸŸå --standalone --httpport ç«¯å£</span><br></pre></td></tr></table></figure>
<p><strong>3.ä¾¦å¬443ç«¯å£ä»¥é¢å‘è¯ä¹¦ï¼Œè¯·ç¡®ä¿443ç«¯å£å¼€å¯</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo ~&#x2F;.acme.sh&#x2F;acme.sh --issue -d åŸŸå --alpn -k ec-256</span><br></pre></td></tr></table></figure>

<p><strong>4.å¦‚æœæ‚¨443åœ¨åå‘ä»£ç†æˆ–è´Ÿè½½å‡è¡¡å™¨åé¢ä½¿ç”¨éæ ‡å‡†ç«¯å£ï¼Œåˆ™å¯ä»¥â€“tlsportç”¨æ¥æŒ‡å®šç«¯å£</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo ~&#x2F;.acme.sh&#x2F;acme.sh --issue -d åŸŸå --alpn --tlsport ç«¯å£</span><br></pre></td></tr></table></figure>
<p>  <strong>-k è¡¨ç¤ºå¯†é’¥é•¿åº¦ï¼Œåé¢çš„å€¼å¯ä»¥æ˜¯ ec-256 ã€ec-384ã€2048ã€3072ã€4096ã€8192ï¼Œå¸¦æœ‰ ec è¡¨ç¤ºç”Ÿæˆçš„æ˜¯ ECC è¯ä¹¦ï¼Œæ²¡æœ‰åˆ™æ˜¯ RSA è¯ä¹¦ã€‚åœ¨å®‰å…¨æ€§ä¸Š 256 ä½çš„ ECC è¯ä¹¦ç­‰åŒäº 3072 ä½çš„ RSA è¯ä¹¦</strong></p>
<p><strong>æŠŠè¯ä¹¦å’Œå¯†é’¥å®‰è£…ç§»åˆ°æŒ‡å®šè·¯å¾„ /etc/v2ray ï¼ˆè·¯å¾„å¯è‡ªå®šä¹‰ï¼‰</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ecc å®‰è£…ä»£ç  sudo ~&#x2F;.acme.sh&#x2F;acme.sh --installcert -d åŸŸå --fullchainpath &#x2F;etc&#x2F;v2ray&#x2F;v2ray.crt --keypath &#x2F;etc&#x2F;v2ray&#x2F;v2ray.key --ecc</span><br><span class="line"></span><br><span class="line">rsa å®‰è£…ä»£ç  sudo ~&#x2F;.acme.sh&#x2F;acme.sh --installcert -d åŸŸå --fullchainpath &#x2F;etc&#x2F;v2ray&#x2F;v2ray.crt --keypath &#x2F;etc&#x2F;v2ray&#x2F;v2ray.key</span><br></pre></td></tr></table></figure>



<h3 id="é…ç½®nginx-conf"><a href="#é…ç½®nginx-conf" class="headerlink" title="é…ç½®nginx.conf"></a>é…ç½®nginx.conf</h3><p><strong>vi /etc/nginx/nginx.conf  #è¿›å…¥ç¼–è¾‘é…ç½®æ–‡ä»¶ï¼šé•¿æŒ‰é”®ç›˜ä¸ŠDé”®åˆ é™¤æ‰€æœ‰é…ç½®ä¿¡æ¯ï¼Œå†æŒ‰é”®ç›˜Insé”®è¿›å…¥ç¼–è¾‘æ¨¡å¼å¤åˆ¶å¦‚ä¸‹ä»£ç é»è´´åˆ°é…ç½®ä¸­ç¼–è¾‘ï¼Œå¡«å†™å¯¹åº”è‡ªå·±çš„é…ç½®ä¿¡æ¯åã€‚æœ€ååŒæ—¶æŒ‰é”®ç›˜ä¸Š shift+: é”®ï¼Œåœ¨è¾“å…¥wqä¿å­˜é€€å‡º</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line">user nginx;</span><br><span class="line">worker_processes auto;</span><br><span class="line">error_log /var/<span class="built_in">log</span>/nginx/error.log;</span><br><span class="line">pid /run/nginx.pid;</span><br><span class="line"></span><br><span class="line">include /usr/share/nginx/modules/*.conf;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">events &#123;</span><br><span class="line">    worker_connections 1024;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">http &#123;</span><br><span class="line">    log_format  main  <span class="string">'$remote_addr - $remote_user [$time_local] "$request" '</span></span><br><span class="line">                      <span class="string">'$status $body_bytes_sent "$http_referer" '</span></span><br><span class="line">                      <span class="string">'"$http_user_agent" "$http_x_forwarded_for"'</span>;</span><br><span class="line"></span><br><span class="line">   </span><br><span class="line">    access_log  /var/<span class="built_in">log</span>/nginx/access.log  main;</span><br><span class="line"></span><br><span class="line">    sendfile            on;</span><br><span class="line">    tcp_nopush          on;</span><br><span class="line">    tcp_nodelay         on;</span><br><span class="line">    keepalive_timeout   65;</span><br><span class="line">    types_hash_max_size 2048;</span><br><span class="line"></span><br><span class="line">    include  /etc/nginx/mime.types;</span><br><span class="line">    default_type application/octet-stream;</span><br><span class="line">    include /etc/nginx/conf.d/*.conf;</span><br><span class="line"></span><br><span class="line">server &#123;</span><br><span class="line">    listen 80;</span><br><span class="line">    server_name åŸŸå;</span><br><span class="line">    rewrite ^/(.*) https://åŸŸå<span class="variable">$1</span> permanent; <span class="comment">#å¡«å†™è‡ªå·±åŸŸå</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">    server <span class="comment">#å…³é”®ä»£ç </span></span><br><span class="line">	&#123; </span><br><span class="line">    <span class="comment"># SSL configuration</span></span><br><span class="line">    listen 443 ssl http2 default_server;</span><br><span class="line">    listen [::]:443 ssl http2 default_server;</span><br><span class="line">    ssl_certificate /è·¯å¾„/*.pem; <span class="comment">#ä½ çš„sslè¯ä¹¦*.crt æˆ–è€… *.peméƒ½å¯ä»¥</span></span><br><span class="line">    ssl_certificate_key /è·¯å¾„/*.key; <span class="comment">#ä½ çš„ssl key</span></span><br><span class="line">    ssl_ciphers EECDH+CHACHA20:EECDH+CHACHA20-draft:EECDH+ECDSA+AES128:EECDH+aRSA+AES128:RSA+AES128:EECDH+ECDSA+AES256:EECDH+aRSA+AES256:RSA+AES256:EECDH+ECDSA+3DES:EECDH+aRSA+3DES:RSA+3DES:!MD5;  <span class="comment">#å¥—ä»¶RSAå’Œeccä¸ä¸€æ ·åœ¨ä¸‹é¢æˆ‘ä¼šåˆ†åˆ«ç»™å‡º</span></span><br><span class="line">    ssl_protocols TLSv1.1 TLSv1.2 TLSv1.3;</span><br><span class="line">    root /usr/share/nginx/html; <span class="comment">#ç½‘é¡µè·¯å¾„ï¼Œè¿™é‡Œä¹Ÿå¯ä»¥æ”¾ä½ ä»¬è‡ªå·±çš„htmlç½‘ç«™æ›¿æ¢ä¸‹å°±å¯ä»¥äº†</span></span><br><span class="line">    server_name åŸŸå; <span class="comment">#ä½ çš„æœåŠ¡å™¨åŸŸå</span></span><br><span class="line"> </span><br><span class="line">    location /ray &#123; <span class="comment">#/ray åˆ‡è®°è·¯å¾„éœ€è¦å’Œv2rayæœåŠ¡å™¨ç«¯å’Œå®¢æˆ·ç«¯ä¿æŒä¸€è‡´ å¯è‡ªå®šä¹‰åå­—</span></span><br><span class="line">    proxy_redirect off;</span><br><span class="line">    proxy_pass http://127.0.0.1:ç«¯å£; <span class="comment">#æ­¤IPåœ°å€å’Œç«¯å£éœ€è¦å’Œv2rayæœåŠ¡å™¨ç«¯é…ç½®ä¿æŒä¸€è‡´ï¼Œ</span></span><br><span class="line">    proxy_http_version 1.1;</span><br><span class="line">    proxy_set_header Upgrade <span class="variable">$http_upgrade</span>;</span><br><span class="line">    proxy_set_header Connection <span class="string">"upgrade"</span>;</span><br><span class="line">    proxy_set_header Host <span class="variable">$http_host</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>å¥—ä»¶å¦‚ä¸‹ï¼š</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ECDHE-RSA-AES256-GCM-SHA512:DHE-RSA-AES256-GCM-SHA512:ECDHE-RSA-AES256-GCM-SHA384:DHE-RSA-AES256-GCM-SHA384:ECDHE-RSA-AES256-SHA384;   #RSAå¥—ä»¶</span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">EECDH+CHACHA20:EECDH+CHACHA20-draft:EECDH+ECDSA+AES128:EECDH+aRSA+AES128:RSA+AES128:EECDH+ECDSA+AES256:EECDH+aRSA+AES256:RSA+AES256:EECDH+ECDSA+3DES:EECDH+aRSA+3DES:RSA+3DES:!MD5;  <span class="comment">#Eccå¥—ä»¶</span></span><br></pre></td></tr></table></figure>
<p><strong>ä¿®æ”¹ Nginx é…ç½®åï¼Œè¯·åŠ¡å¿…é‡æ–°åŠ è½½é…ç½®  è¾“å…¥ sudo systemctl reload nginx.service   #å¿…é¡»è¿™æ ·æ“ä½œ</strong></p>
<p>æŸ¥è¯¢æ˜¯å¦å¼€å¯ssl æ‰“å¼€ç½‘ç«™<a href="https://myssl.com/ssl.htmlè¾“å…¥è‡ªå·±åŸŸåï¼Œç«¯å£è¾“å…¥443" rel="external nofollow noreferrer">https://myssl.com/ssl.htmlè¾“å…¥è‡ªå·±åŸŸåï¼Œç«¯å£è¾“å…¥443</a> æˆ–è€… æ‰“å¼€<a href="https://www.ssllabs.com/ssltest/index.html" rel="external nofollow noreferrer">https://www.ssllabs.com/ssltest/index.html</a> æŸ¥è¯¢ ï¼Œä¹Ÿå¯ä»¥googleæœç´¢å…³é”®å­—sslæŸ¥è¯¢ï¼Œå¾ˆå¤šç½‘ç«™å¯ä»¥æŸ¥è¯¢ï¼Œè¯„åˆ†æ˜¯å¦åˆ°è¾¾Açº§åˆ«</p>
<p><strong>æ¸©é¦¨æç¤ºï¼šé€šè¿‡acme.shå·¥å…·ç”Ÿæˆè¯ä¹¦è¯·ä½¿ç”¨443ç«¯å£ ä»£ç å¦‚ä¸‹ï¼šsudo ~/.acme.sh/acme.sh â€“issue -d åŸŸå â€“alpn -k ec-256 ï¼ˆä¾¦å¬443ç«¯å£ä»¥é¢å‘è¯ä¹¦ï¼Œè¯·ç¡®ä¿443ç«¯å£å¼€å¯ æŒ‰æ–‡ç« æµç¨‹æ“ä½œ80ç«¯å£ç”Ÿæˆè¯ä¹¦æ—¶ä¼šæç¤ºç«¯å£å ç”¨ï¼Œå½“ç„¶å¦‚æœä½ æƒ³ç®€å•ç‚¹å¯ä»¥é€šè¿‡å·²æœ‰è´­ä¹°çš„è¯ä¹¦æˆ–è€…é€šè¿‡å®å¡”ç”³è¯·çš„æˆ–è€…å…¶ä»–è¯ä¹¦ï¼ŒæŠŠå¯†é’¥å’Œè¯ä¹¦ç›´æ¥å¤åˆ¶æ‹·è´åˆ°æœåŠ¡å™¨æŒ‡å®šè·¯å¾„ä¸‹ï¼Œåœ¨é…ç½®nginxæŒ‡å‘è¯ä¹¦å’Œè·¯å¾„ã€‚éƒ¨åˆ†å…è´¹è¯ä¹¦ä¼šç¼ºå°‘CAè¯ä¹¦é‚£ä¹ˆåœ¨ç½‘ç«™sslè¯„åˆ†å°±ä¼šå¤§æ‰“æŠ˜æ‰£ï¼Œè§£å†³åŠæ³•æ˜¯é‡æ–°æŠŠCAè¯ä¹¦æ·»åŠ ä¸‹å°±å¯ä»¥äº†</strong></p>
<p><strong>é€šè¿‡åœ¨æµè§ˆå™¨è¾“å…¥è‡ªå·±åŸŸåæŸ¥è¯¢æ˜¯å¦å‘ç°ç½‘ç«™åŠ äº†ä¸€æŠŠé”ğŸ”’å¼€å¯äº†httpsï¼Œ ä¸”ç½‘ç«™åŸŸåsslè¯„åˆ†åˆ°è¾¾A å¦‚æœæ˜¯ï¼Œæ­å–œä½ æ­å»ºæˆåŠŸ.å¦‚æœä½ å·²ç»å­¦ä¼šäº†é‚£ä¹ˆæ¥ä¸‹æ¥çš„è¯¾ç¨‹ä¼šè¶Šæ¥è¶Šæœ‰æ„æ€.</strong></p>
<h3 id="ç”µæŠ¥ç¾¤è®¨è®º"><a href="#ç”µæŠ¥ç¾¤è®¨è®º" class="headerlink" title="ç”µæŠ¥ç¾¤è®¨è®º"></a>ç”µæŠ¥ç¾¤è®¨è®º</h3> </button>
  <button class="button is-medium">
    <span class="icon">
    <i class="fab fa-telegram"></i>
    </span>
    <a href="https://t.me/RootInstitute" rel="external nofollow noreferrer" class="ç‚¹å‡»ä¸‹è½½">ç”µæŠ¥ç¾¤æ·»åŠ </a>

        </div>
        
            <ul class="post-copyright">
            <li><strong>æœ¬æ–‡æ ‡é¢˜ï¼š</strong><a href="https://www.rootfw.com/posts/54c2b25c.html">V2ray+WebSocket+TLS+Nginx</a></li>
            <li><strong>æœ¬æ–‡ä½œè€…ï¼š</strong><a href="https://www.rootfw.com">comebey</a></li>
            <li><strong>æœ¬æ–‡é“¾æ¥ï¼š</strong><a href="https://www.rootfw.com/posts/54c2b25c.html">https://www.rootfw.com/posts/54c2b25c.html</a></li>
            <li><strong>å‘å¸ƒæ—¶é—´ï¼š</strong>2020-06-16</li>
            <li><strong>ç‰ˆæƒå£°æ˜ï¼š</strong>æœ¬åšå®¢æ‰€æœ‰æ–‡ç« é™¤ç‰¹åˆ«å£°æ˜å¤–ï¼Œå‡é‡‡ç”¨ <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" rel="external nofollow" target="_blank">CC BY-NC-SA 4.0</a> è®¸å¯åè®®ã€‚è½¬è½½è¯·æ³¨æ˜å‡ºå¤„ï¼
            </li>
            </ul>
        
        
        <hr style="height:1px;margin:1rem 0"/>
        <div class="level is-size-7 is-uppercase">
            <div class="level-start">
                <div class="level-item">
                    <i class="fas fa-tags has-text-grey"></i>&nbsp;
                    <a class="has-link-grey -link" href="/tags/v2ray/" rel="tag">v2ray</a>
                </div>
            </div>
        </div>
        
        
        
        
<div class="sharethis-inline-share-buttons"></div>
<script type='text/javascript' src='https://platform-api.sharethis.com/js/sharethis.js#property=5f5759bfd449570011d2b344&amp;product=sop' async='async'></script>

        
    </div>
</div>



<div class="card">
    <div class="card-content">
        <h3 class="menu-label has-text-centered">å–œæ¬¢è¿™ç¯‡æ–‡ç« ï¼Ÿæ‰“èµä¸€ä¸‹ä½œè€…å§</h3>
        <div class="buttons is-centered">
            
                
<a class="button is-info donate">
    <span class="icon is-small">
        <i class="fab fa-alipay"></i>
    </span>
    <span>æ”¯ä»˜å®</span>
    <div class="qrcode"><img src="https://cdn.jsdelivr.net/gh/ComeBey/imghosting/comebey-pic/alipay.png" alt="æ”¯ä»˜å®"></div>
</a>

                
                
<a class="button is-success donate">
    <span class="icon is-small">
        <i class="fab fa-weixin"></i>
    </span>
    <span>å¾®ä¿¡</span>
    <div class="qrcode"><img src="https://cdn.jsdelivr.net/gh/ComeBey/imghosting/comebey-pic/wechat.png" alt="å¾®ä¿¡"></div>
</a>

                
        </div>
    </div>
</div>



<div class="card card-transparent">
    <div class="level post-navigation is-flex-wrap is-mobile">
        
        <div class="level-start">
            <a class="level level-item has-link-grey  article-nav-prev" href="/posts/80f65055.html">
                <i class="level-item fas fa-chevron-left"></i>
                <span class="level-item">shadowsocksåŸç”Ÿéƒ¨ç½²</span>
            </a>
        </div>
        
        
        <div class="level-end">
            <a class="level level-item has-link-grey  article-nav-next" href="/posts/a8ffa798.html">
                <span class="level-item">v2rayå®šæ—¶é‡å¯æœåŠ¡crontab</span>
                <i class="level-item fas fa-chevron-right"></i>
            </a>
        </div>
        
    </div>
</div>



<div class="card">
    <div class="card-content">
        <h3 class="title is-5 has-text-weight-normal">è¯„è®º</h3>
        
<div id="valine-thread" class="content"></div>
<script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
<script src='//unpkg.com/valine/dist/Valine.min.js'></script>
<script>
    new Valine({
        el: '#valine-thread' ,
        notify: false,
        verify: false,
        app_id: 'Ipp1FU7Rr7KCIYgNnv1mrOvj-gzGzoHsz',
        app_key: '1pOvMu9iiGMSqeykFKQ5xcNM',
        placeholder: 'Say something...'
    });
</script>

    </div>
</div>





    <script type="text/javascript">
    // ç¦æ­¢å³é”®èœå•
    document.oncontextmenu = function(){ return false; };
    // ç¦æ­¢æ–‡å­—é€‰æ‹©
    document.onselectstart = function(){ return false; };
    // ç¦æ­¢å¤åˆ¶
    document.oncopy = function(){ return true; };
    // ç¦æ­¢å‰ªåˆ‡
    document.oncut = function(){ return false; };
    // ç¦æ­¢ç²˜è´´
    document.onpaste = function(){ return false; };
    </script></div>
                
    
    
    
    
    <div class="column is-4-tablet is-4-desktop is-3-widescreen  has-order-1 column-left ">
        
            
<div class="card widget">
    <div class="card-content">
        <nav class="level">
            <div class="level-item has-text-centered" style="flex-shrink: 1">
                <div>
                    
                    <figure class="image is-200x200 has-mb-6">
                        <img class="" src="https://cdn.jsdelivr.net/gh/ComeBey/imghosting/comebey-pic/4.svg" alt="ComeBey">
                    </figure>
                    
                    <p class="is-size-4 is-block">
                        ComeBey
                    </p>
                    
                    
                    <p class="is-size-6 is-block">
                        Hasan
                    </p>
                    
                    
                    <p class="is-size-6 is-flex is-flex-center has-text-grey">
                        <i class="fas fa-map-marker-alt has-mr-7"></i>
                        <span>Shanghai, China</span>
                    </p>
                    
                </div>
            </div>
        </nav>
        <nav class="level is-mobile">
            <div class="level-item has-text-centered is-marginless">
                <div>
                    <p class="heading">
                        æ–‡ç« 
                    </p>
                    <a href="/archives">
                        <p class="title has-text-weight-normal">
                            44
                        </p>
                    </a>
                </div>
            </div>
            <div class="level-item has-text-centered is-marginless">
                <div>
                    <p class="heading">
                        åˆ†ç±»
                    </p>
                    <a href="/categories">
                        <p class="title has-text-weight-normal">
                            41
                        </p>
                    </a>
                </div>
            </div>
            <div class="level-item has-text-centered is-marginless">
                <div>
                    <p class="heading">
                        æ ‡ç­¾
                    </p>
                    <a href="/tags">
                        <p class="title has-text-weight-normal">
                            38
                        </p>
                    </a>
                </div>
            </div>
        </nav>
        <div id="knowledge-star">
        
    <div class="level">
            <a class="level-item button is-link is-rounded" href="https://www.youtube.com/channel/UC1BAUCyjE7NLpvcwSUInOIg/?sub_confirmation=1" target="_blank" rel="noopener external nofollow noreferrer">
                åŠ å…¥æˆ‘çš„çŸ¥è¯†æ˜Ÿçƒ</a>
        </div>
        <div clas="level" id="knowledge-qrcode" style="display:none;">
            <img src="https://cdn.jsdelivr.net/gh/ComeBey/imghosting/comebey-pic/ruz.png" alt="comebey" height="36">
        </div>
    </div>        
        
        
        
        <div class="level is-mobile">
             
            <a class="level-item button is-white is-marginless" target="_blank" rel="noopener"
                title="Github" href="https://github.com/ComeBey">
                <img src="https://cdn.jsdelivr.net/gh/ComeBey/imghosting/comebey-pic/abt.svg" style="height: 25px;width: 25px;"></img>
                
                <i class="https://cdn.jsdelivr.net/gh/ComeBey/imghosting/comebey-pic/abt.svg"></i>
                
            </a>
             
            <a class="level-item button is-white is-marginless" target="_blank" rel="noopener"
                title="Facebook" href="https://www.facebook.com/Comebey.Blog/?modal=admin_todo_tour">
                <img src="https://cdn.jsdelivr.net/gh/ComeBey/imghosting/comebey-pic/fb.svg" style="height: 25px;width: 25px;"></img>
                
                <i class="https://cdn.jsdelivr.net/gh/ComeBey/imghosting/comebey-pic/fb.svg"></i>
                
            </a>
             
            <a class="level-item button is-white is-marginless" target="_blank" rel="noopener"
                title="youtube" href="https://www.youtube.com/channel/UC1BAUCyjE7NLpvcwSUInOIg/?sub_confirmation=1">
                <img src="https://cdn.jsdelivr.net/gh/ComeBey/imghosting/comebey-pic/youtube2.svg" style="height: 25px;width: 25px;"></img>
                
                <i class="https://cdn.jsdelivr.net/gh/ComeBey/imghosting/comebey-pic/youtube2.svg"></i>
                
            </a>
            
        </div>
        
    </div>
</div>
        
            

    <div class="card widget column-left is-sticky" id="toc">
        <div class="card-content">
            <div class="menu">
                <h3 class="menu-label">
                    ç›®å½•
                </h3>
                <ul class="menu-list"><li>
        <a class="is-flex" href="#å®‰è£…å‰å‡†å¤‡">
        <span class="has-mr-6">1</span>
        <span>å®‰è£…å‰å‡†å¤‡</span>
        </a><ul class="menu-list"><li>
        <a class="is-flex" href="#æ›´æ–°æœåŠ¡å™¨">
        <span class="has-mr-6">1.1</span>
        <span>æ›´æ–°æœåŠ¡å™¨</span>
        </a></li><li>
        <a class="is-flex" href="#æ›´æ”¹rootå¯†ç ">
        <span class="has-mr-6">1.2</span>
        <span>æ›´æ”¹rootå¯†ç </span>
        </a></li><li>
        <a class="is-flex" href="#å®‰è£…bbr">
        <span class="has-mr-6">1.3</span>
        <span>å®‰è£…bbr</span>
        </a></li></ul></li><li>
        <a class="is-flex" href="#å®‰è£…v2rayä»£ç ">
        <span class="has-mr-6">2</span>
        <span>å®‰è£…v2rayä»£ç </span>
        </a><ul class="menu-list"><li>
        <a class="is-flex" href="#å®‰è£å’Œæ›´æ–°V2Ray">
        <span class="has-mr-6">2.1</span>
        <span>å®‰è£å’Œæ›´æ–°V2Ray</span>
        </a></li><li>
        <a class="is-flex" href="#å®‰è£…geoipå’Œgeosite">
        <span class="has-mr-6">2.2</span>
        <span>å®‰è£…geoipå’Œgeosite</span>
        </a></li><li>
        <a class="is-flex" href="#æ¸©é¦¨æç¤º">
        <span class="has-mr-6">2.3</span>
        <span>æ¸©é¦¨æç¤º</span>
        </a></li></ul></li><li>
        <a class="is-flex" href="#å®‰è£…NGINX">
        <span class="has-mr-6">3</span>
        <span>å®‰è£…NGINX</span>
        </a></li><li>
        <a class="is-flex" href="#ç”Ÿæˆè¯ä¹¦">
        <span class="has-mr-6">4</span>
        <span>ç”Ÿæˆè¯ä¹¦</span>
        </a></li><li>
        <a class="is-flex" href="#é…ç½®nginx-conf">
        <span class="has-mr-6">5</span>
        <span>é…ç½®nginx.conf</span>
        </a></li><li>
        <a class="is-flex" href="#ç”µæŠ¥ç¾¤è®¨è®º">
        <span class="has-mr-6">6</span>
        <span>ç”µæŠ¥ç¾¤è®¨è®º</span>
        </a></li></ul>
            </div>
        </div>
    </div>

        
        
            <div class="column-right-shadow is-hidden-widescreen ">
            
            </div>
        
    </div>
    
                
            </div>
        </div>
    </section>
    <footer class="footer">
    <div class="container">
        <div class="level">
            <div class="level-start has-text-centered-mobile">
                <a class="footer-logo is-block has-mb-6" href="/">
                
                    <img src="https://cdn.jsdelivr.net/gh/ComeBey/imghosting/comebey-pic/é˜²ç«å¢™.svg" alt="V2ray+WebSocket+TLS+Nginx" height="28">
                
                </a>
                <p class="is-size-7">
                &copy; 2021 comebey&nbsp;
                Powered by <a href="https://www.youtube.com/channel/UC1BAUCyjE7NLpvcwSUInOIg/?sub_confirmation=1" target="_blank" rel="noopener external nofollow noreferrer">comebey</a> & <a
                        href="https://github.com/ComeBey" target="_blank" rel="noopener">Hasan</a>
                
                <br>
                <span id="busuanzi_container_site_uv">
                å…±<span id="busuanzi_value_site_uv">0</span>ä¸ªè®¿å®¢
                </span>
                
                </p>
            </div>
            <div class="level-end">
            
                <div class="field has-addons is-flex-center-mobile has-mt-5-mobile is-flex-wrap is-flex-middle">
                
                <p class="control">
                    <a class="button is-white is-large" target="_blank" rel="noopener external nofollow noreferrer" title="CC BY-NC-SA 4.0" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">
                        
                        <i class="fab fa-creative-commons"></i>&nbsp;<i class="fab fa-creative-commons-by"></i>&nbsp;<i class="fab fa-creative-commons-nc"></i>&nbsp;<i class="fab fa-creative-commons-sa"></i>&nbsp;
                        
                    </a>
                </p>
                
                <p class="control">
                    <a class="button is-white is-large" target="_blank" rel="noopener external nofollow noreferrer" title="AlphaLxy GitHub" href="https://www.github.com/ComeBey">
                        
                        <i class="fab fa-github"></i>&nbsp;
                        
                    </a>
                </p>
                
                </div>
            
            </div>
        </div>
    </div>
</footer>
    <script src="https://cdn.jsdelivr.net/npm/jquery@3.2.1/dist/jquery.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script>
<script>moment.locale("zh-CN");</script>


<script>
var IcarusThemeSettings = {
    site: {
        url: 'https://www.rootfw.com',
        external_link: {"enable":true,"exclude":[]}
    },
    article: {
        highlight: {
            clipboard: true,
            fold: 'unfolded'
        }
    }
};
</script>


<script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" defer></script>





<script src="/js/animation.js"></script>



<script src="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/js/lightgallery.min.js" defer></script>
<script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/js/jquery.justifiedGallery.min.js" defer></script>
<script src="/js/gallery.js" defer></script>



<div id="outdated">
    <h6>Your browser is out-of-date!</h6>
    <p>Update your browser to view this website correctly. <a id="btnUpdateBrowser" href="http://outdatedbrowser.com/" rel="external nofollow noreferrer">Update
            my browser now </a></p>
    <p class="last"><a href="#" id="btnCloseUpdateBrowser" title="Close">&times;</a></p>
</div>
<script src="https://cdn.jsdelivr.net/npm/outdatedbrowser@1.1.5/outdatedbrowser/outdatedbrowser.min.js" defer></script>
<script>
    document.addEventListener("DOMContentLoaded", function () {
        outdatedBrowser({
            bgColor: '#f25648',
            color: '#ffffff',
            lowerThan: 'flex'
        });
    });
</script>





<a id="back-to-top" title="å›åˆ°é¡¶ç«¯" href="javascript:;" rel="external nofollow noreferrer">
    <i class="fas fa-chevron-up"></i>
</a>
<script src="https://cdn.jsdelivr.net/gh/ComeBey/comebey.github.io@master/js/back-to-top.js" defer></script>












<script src="/js/main.js" defer></script>

<script>
    $(function(){
        var showing = false;
        var headEnter = false;
        var mouseArea =  $("#knowledge-star");
        var qrcode = $("#knowledge-qrcode");
        var headimg = $("#blog-head-img");
        //var originalSrc = headimg.attr("src");

        function knowStarAnim(show){
            if(show === showing) return;
            showing = show;
            qrcode.stop();
            qrcode.toggle(1000);
        }

        mouseArea.mouseenter(function(){
            knowStarAnim(true);  
        });

        mouseArea.mouseleave(function(){
            knowStarAnim(false);
        });

        function headChangeAnim(enter){
            if(enter === headEnter) return;
            headEnter = enter;
            if(enter){
                $("img").attr("title", function() { return this.src });
                $("img").attr("src", function(){
                    if(this.width < 150){
                        return "https://dp2px.com/images/jok-head.jpg";
                    }else{
                        return this.src;
                    }
                })
            }else{
                $("img").attr("src", function() { return this.title });
                $("img").removeAttr("title");
            }
        }

        headimg.mouseenter(function(){
            headChangeAnim(true);
        });
        headimg.mouseleave(function(){
            headChangeAnim(false);
        });
    });
</script>


    
    <div class="searchbox ins-search">
    <div class="searchbox-container ins-search-container">
        <div class="searchbox-input-wrapper">
            <input type="text" class="searchbox-input ins-search-input" placeholder="æƒ³è¦æŸ¥æ‰¾ä»€ä¹ˆ..." />
            <span class="searchbox-close ins-close ins-selectable"><i class="fa fa-times-circle"></i></span>
        </div>
        <div class="searchbox-result-wrapper ins-section-wrapper">
            <div class="ins-section-container"></div>
        </div>
    </div>
</div>
<script>
    (function (window) {
        var INSIGHT_CONFIG = {
            TRANSLATION: {
                POSTS: 'æ–‡ç« ',
                PAGES: 'é¡µé¢',
                CATEGORIES: 'åˆ†ç±»',
                TAGS: 'æ ‡ç­¾',
                UNTITLED: '(æ— æ ‡é¢˜)',
            },
            CONTENT_URL: 'https://cdn.jsdelivr.net/gh/ComeBey/comebey.github.io@master/content.json',
        };
        window.INSIGHT_CONFIG = INSIGHT_CONFIG;
    })(window);
</script>
<script src="/js/insight.js" defer></script>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/ComeBey/comebey.github.io@master/css/search.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/ComeBey/comebey.github.io@master/css/insight.css">
    

    
</body>
</html>