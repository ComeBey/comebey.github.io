<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>comebey</title>
  
  
  <link href="/atom.xml" rel="self"/>
  
  <link href="https://www.rootfw.com/"/>
  <updated>2020-08-11T10:29:53.841Z</updated>
  <id>https://www.rootfw.com/</id>
  
  <author>
    <name>comebey</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>Github API</title>
    <link href="https://www.rootfw.com/posts/87f1021.html"/>
    <id>https://www.rootfw.com/posts/87f1021.html</id>
    <published>2020-08-06T13:09:35.000Z</published>
    <updated>2020-08-11T10:29:53.841Z</updated>
    
    <content type="html"><![CDATA[<article class="message is-warning"><div class="message-body"><p>对于常用Github的用户来说，经常有一些自动化的需求。比如我的需求是定时备份Github的issues和comments到本地。以下为Github的API的使用参考</p></div></article><a id="more"></a><h3 id="基本访问路径-Root-Endpoints"><a href="#基本访问路径-Root-Endpoints" class="headerlink" title="基本访问路径 (Root Endpoints)"></a>基本访问路径 (Root Endpoints)</h3><article class="message is-info"><div class="message-body"><p>一开始读文档的时候，照着它的事例直接在命令行里curl，或者在InSomnia或Postman软件里访问，都完美显示200状态。可是一旦把链接里改写成自己的用户名就各种显示404无页面。还以为是授权问题，然后在页头HEADER中按照各种方式试了username和token密钥，都没用还是404。结果发现，原来不是方法的问题，纯粹是链接地址没写对！<br>实际上只是读取的话，完全不用任何授权，可以在命令行、Insomnia、网页等各种情况下直接输入链接访问任何人的所有公开信息。<br>然后对照官方路径列表Root Endpoints得到的链接，好像怎么访问都不对。反而在Stackoverflow中看到的一个链接，顺藤摸瓜自己发现了各种正确的访问路径，总结如下：</p></div></article><p>首先！访问的链接最后不能有/。如<a href="https://api.github.com/users/solomonxie是可以访问到我个人信息的，但是https://api.github.com/users/solomonxie/就不行了，唯一不同是多了一个/">https://api.github.com/users/solomonxie是可以访问到我个人信息的，但是https://api.github.com/users/solomonxie/就不行了，唯一不同是多了一个/</a>.<br>其次！不同于一般URL访问，GIthub的API访问链接是区分大小写的！<br>个人主要信息。 <a href="https://api.github.com/users/用户名,得到数据如下图：">https://api.github.com/users/用户名,得到数据如下图：</a><br>image</p><p>个人所有repo。<a href="https://api.github.com/users/用户名/repos。会得到一个repo的JSON格式列表。">https://api.github.com/users/用户名/repos。会得到一个repo的JSON格式列表。</a><br>repo详细信息。<a href="https://api.github.com/repos/用户名/仓库名。repo的路径就开始和个人信息不同了。">https://api.github.com/repos/用户名/仓库名。repo的路径就开始和个人信息不同了。</a><br>获取某个repo的内容列表。<a href="https://api.github.com/repos/solomonxie/gists/contents，注意这只会返回根目录的内容。">https://api.github.com/repos/solomonxie/gists/contents，注意这只会返回根目录的内容。</a><br>获取repo中子目录的内容列表。<a href="https://api.github.com/repos/solomonxie/gists/contents/目录名。一定要注意这里一定要完全遵循原文件名的大小写，否则无法获得信息。如果是更深层的内容，则在链接列按照顺序逐级写上目录名称。">https://api.github.com/repos/solomonxie/gists/contents/目录名。一定要注意这里一定要完全遵循原文件名的大小写，否则无法获得信息。如果是更深层的内容，则在链接列按照顺序逐级写上目录名称。</a><br>获取repo中某文件信息（不包括内容）。<a href="https://api.github.com/repos/solomonxie/gists/contents/文件路径。文件路径是文件的完整路径，区分大小写。只会返回文件基本信息。">https://api.github.com/repos/solomonxie/gists/contents/文件路径。文件路径是文件的完整路径，区分大小写。只会返回文件基本信息。</a><br>获取某文件的原始内容（Raw）。1. 通过上面的文件信息中提取download_url这条链接，就能获取它的原始内容了。2. 或者直接访问：<a href="https://raw.githubusercontent.com/用户名/仓库名/分支名/文件路径">https://raw.githubusercontent.com/用户名/仓库名/分支名/文件路径</a><br>repo中所有的commits列表。<a href="https://api.github.com/repos/用户名/仓库名/commits。">https://api.github.com/repos/用户名/仓库名/commits。</a><br>某一条commit详情。<a href="https://api.github.com/repos/用户名/仓库名/commits/某一条commit的SHA">https://api.github.com/repos/用户名/仓库名/commits/某一条commit的SHA</a><br>issues列表。<a href="https://api.github.com/repos/用户名/仓库名/issues。">https://api.github.com/repos/用户名/仓库名/issues。</a><br>某条issue详情。<a href="https://api.github.com/repos/用户名/仓库名/issues/序号。issues都是以1,2,3这样的序列排号的。">https://api.github.com/repos/用户名/仓库名/issues/序号。issues都是以1,2,3这样的序列排号的。</a><br>某issue中的comments列表。<a href="https://api.github.com/repos/用户名/仓库名/issues/序号/comments。">https://api.github.com/repos/用户名/仓库名/issues/序号/comments。</a><br>某comment详情。<a href="https://api.github.com/repos/用户名/仓库名/issues/comments/评论详情的ID。其中评论ID是从issues列表中获得的。">https://api.github.com/repos/用户名/仓库名/issues/comments/评论详情的ID。其中评论ID是从issues列表中获得的。</a></p><h3 id="查询参数-Parameters"><a href="#查询参数-Parameters" class="headerlink" title="查询参数 (Parameters)"></a>查询参数 (Parameters)</h3><p>如果在上面基本链接中加入查询条件，那么返回的数据就是filtered，过滤了的。比如要求只返回正在开放的issues，或者让列表数据分页显示。常用如下：</p><p>分页功能。格式是?page=页数&amp;per_page=每页包含数量。<br>如<a href="https://api.github.com/users/solomonxie/repos?page=2&amp;per_page=3">https://api.github.com/users/solomonxie/repos?page=2&amp;per_page=3</a></p><p>issues状态。格式是?state=状态。<br>如<a href="https://api.github.com/repos/solomonxie/solomonxie.github.io/issues?state=closed">https://api.github.com/repos/solomonxie/solomonxie.github.io/issues?state=closed</a></p>]]></content>
    
    <summary type="html">
    
      &lt;article class=&quot;message is-warning&quot;&gt;&lt;div class=&quot;message-body&quot;&gt;
&lt;p&gt;对于常用Github的用户来说，经常有一些自动化的需求。比如我的需求是定时备份Github的issues和comments到本地。以下为Github的API的使用参考&lt;/p&gt;
&lt;/div&gt;&lt;/article&gt;
    
    </summary>
    
    
      <category term="github" scheme="https://www.rootfw.com/categories/github/"/>
    
    
      <category term="github" scheme="https://www.rootfw.com/tags/github/"/>
    
  </entry>
  
  <entry>
    <title>新版V2ray+WebSocket+TLS+Nginx</title>
    <link href="https://www.rootfw.com/posts/d2834d54.html"/>
    <id>https://www.rootfw.com/posts/d2834d54.html</id>
    <published>2020-07-28T14:18:07.000Z</published>
    <updated>2020-08-15T13:50:50.861Z</updated>
    
    <content type="html"><![CDATA[<h3 id="同步vps时间和电脑时间"><a href="#同步vps时间和电脑时间" class="headerlink" title="同步vps时间和电脑时间"></a>同步vps时间和电脑时间</h3><h4 id="centos7"><a href="#centos7" class="headerlink" title="centos7"></a>centos7</h4><p>更新服务器 <code>yum update -y</code> (部分系统提示<strong>NO packages marked for update</strong>则无需更新)<br>设置硬件时钟调整为与本地时钟一致, 设置时区为上海 date -R 是查看服务器当前时间</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">date -R</span><br><span class="line">timedatectl <span class="built_in">set</span>-local-rtc 1</span><br><span class="line">timedatectl <span class="built_in">set</span>-timezone Asia/Shanghai</span><br></pre></td></tr></table></figure><h4 id="Debian"><a href="#Debian" class="headerlink" title="Debian"></a>Debian</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">date -R</span><br><span class="line">rm -rf /etc/localtime</span><br><span class="line">cp /usr/share/zoneinfo/Asia/Shanghai /etc/localtime</span><br></pre></td></tr></table></figure><h3 id="安装依赖"><a href="#安装依赖" class="headerlink" title="安装依赖"></a>安装依赖</h3><h4 id="debian"><a href="#debian" class="headerlink" title="debian"></a>debian</h4><p>安装依赖</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">apt update</span><br><span class="line">apt install curl</span><br></pre></td></tr></table></figure><h4 id="centos7-1"><a href="#centos7-1" class="headerlink" title="centos7"></a>centos7</h4><p>安装依赖</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">yum makecache</span><br><span class="line">yum install curl</span><br></pre></td></tr></table></figure><h3 id="安装完后执行下面代码"><a href="#安装完后执行下面代码" class="headerlink" title="安装完后执行下面代码"></a>安装完后执行下面代码</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">curl -O https:&#x2F;&#x2F;raw.githubusercontent.com&#x2F;v2fly&#x2F;fhs-install-v2ray&#x2F;master&#x2F;install-release.sh</span><br><span class="line">curl -O https:&#x2F;&#x2F;raw.githubusercontent.com&#x2F;v2fly&#x2F;fhs-install-v2ray&#x2F;master&#x2F;install-dat-release.sh</span><br></pre></td></tr></table></figure><a id="more"></a><h3 id="安装和更新V2Ray"><a href="#安装和更新V2Ray" class="headerlink" title="安装和更新V2Ray"></a>安装和更新V2Ray</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bash install-release.sh</span><br></pre></td></tr></table></figure><h4 id="文件内容输出"><a href="#文件内容输出" class="headerlink" title="文件内容输出"></a>文件内容输出</h4><figure class="highlight diff"><figcaption><span>每行代码 " + " 号忽略</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="addition">+info: unzip is installed.</span></span><br><span class="line"><span class="addition">+info: Extract the V2Ray package to /tmp/tmp.RS0y2YR2ZS/ and prepare it for installation.</span></span><br><span class="line"><span class="addition">+installed: /usr/local/bin/v2ray</span></span><br><span class="line"><span class="addition">+installed: /usr/local/bin/v2ctl</span></span><br><span class="line"><span class="addition">+installed: /usr/local/lib/v2ray/geoip.dat</span></span><br><span class="line"><span class="addition">+installed: /usr/local/lib/v2ray/geosite.dat</span></span><br><span class="line"><span class="addition">+installed: /usr/local/etc/v2ray/00_log.json</span></span><br><span class="line"><span class="addition">+installed: /usr/local/etc/v2ray/01_api.json</span></span><br><span class="line"><span class="addition">+installed: /usr/local/etc/v2ray/02_dns.json</span></span><br><span class="line"><span class="addition">+installed: /usr/local/etc/v2ray/03_routing.json</span></span><br><span class="line"><span class="addition">+installed: /usr/local/etc/v2ray/04_policy.json</span></span><br><span class="line"><span class="addition">+installed: /usr/local/etc/v2ray/05_inbounds.json</span></span><br><span class="line"><span class="addition">+installed: /usr/local/etc/v2ray/06_outbounds.json</span></span><br><span class="line"><span class="addition">+installed: /usr/local/etc/v2ray/07_transport.json</span></span><br><span class="line"><span class="addition">+installed: /usr/local/etc/v2ray/08_stats.json</span></span><br><span class="line"><span class="addition">+installed: /usr/local/etc/v2ray/09_reverse.json</span></span><br><span class="line"><span class="addition">+installed: /var/log/v2ray/</span></span><br><span class="line"><span class="addition">+installed: /etc/systemd/system/v2ray.service</span></span><br><span class="line"><span class="addition">+installed: /etc/systemd/system/v2ray@.service</span></span><br></pre></td></tr></table></figure><h3 id="安裝最新發行的geoip-dat和geosite-dat"><a href="#安裝最新發行的geoip-dat和geosite-dat" class="headerlink" title="安裝最新發行的geoip.dat和geosite.dat"></a>安裝最新發行的geoip.dat和geosite.dat</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bash install-dat-release.sh</span><br></pre></td></tr></table></figure><h3 id="创建编辑配置文件"><a href="#创建编辑配置文件" class="headerlink" title="创建编辑配置文件"></a>创建编辑配置文件</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cd &#x2F;usr&#x2F;local&#x2F;etc&#x2F;v2ray</span><br></pre></td></tr></table></figure><p>在/usr/local/etc/v2ray下面创建一个名为config.json配置文件<br>复制以下代码到config.json</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//复制以下代码</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="attr">"log"</span> : &#123;</span><br><span class="line">    <span class="attr">"access"</span>: <span class="string">"/var/log/v2ray/access.log"</span>,</span><br><span class="line">    <span class="attr">"error"</span>: <span class="string">"/var/log/v2ray/error.log"</span>,</span><br><span class="line">    <span class="attr">"loglevel"</span>: <span class="string">"warning"</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">"inbound"</span>: &#123;</span><br><span class="line">    <span class="attr">"port"</span>: <span class="number">9000</span>, <span class="comment">//重点(此端口与nginx配置保持一致)</span></span><br><span class="line">    <span class="attr">"listen"</span>: <span class="string">"127.0.0.1"</span>, <span class="comment">//重点(此端口与nginx配置保持一致)</span></span><br><span class="line">    <span class="attr">"protocol"</span>: <span class="string">"vmess"</span>,</span><br><span class="line">    <span class="attr">"settings"</span>: &#123;</span><br><span class="line">      <span class="attr">"clients"</span>: [</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="attr">"id"</span>: <span class="string">"eb950add-608e-409d-937f-e797324387093z"</span>, <span class="comment">//你的UUID，可更改需与客户端保持一致 </span></span><br><span class="line">          <span class="attr">"level"</span>: <span class="number">1</span>,</span><br><span class="line">          <span class="attr">"alterId"</span>: <span class="number">64</span> <span class="comment">//此ID也需与客户端保持一致（不要设置超过100以上可自定义）</span></span><br><span class="line">        &#125;</span><br><span class="line">      ]</span><br><span class="line">    &#125;,</span><br><span class="line">   <span class="attr">"streamSettings"</span>:&#123;</span><br><span class="line">      <span class="attr">"network"</span>: <span class="string">"ws"</span>, <span class="comment">//可设置tcp等</span></span><br><span class="line">      <span class="attr">"wsSettings"</span>: &#123;</span><br><span class="line">           <span class="attr">"path"</span>: <span class="string">"/ray"</span> <span class="comment">//与nginx配置相关（可自定义）</span></span><br><span class="line">      &#125;</span><br><span class="line">   &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">"outbound"</span>: &#123;</span><br><span class="line">    <span class="attr">"protocol"</span>: <span class="string">"freedom"</span>,</span><br><span class="line">    <span class="attr">"settings"</span>: &#123;&#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">"outboundDetour"</span>: [</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">"protocol"</span>: <span class="string">"blackhole"</span>,</span><br><span class="line">      <span class="attr">"settings"</span>: &#123;&#125;,</span><br><span class="line">      <span class="attr">"tag"</span>: <span class="string">"blocked"</span></span><br><span class="line">    &#125;</span><br><span class="line">  ],</span><br><span class="line">  <span class="attr">"routing"</span>: &#123;</span><br><span class="line">    <span class="attr">"strategy"</span>: <span class="string">"rules"</span>,</span><br><span class="line">    <span class="attr">"settings"</span>: &#123;</span><br><span class="line">      <span class="attr">"rules"</span>: [</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="attr">"type"</span>: <span class="string">"field"</span>,</span><br><span class="line">          <span class="attr">"ip"</span>: [</span><br><span class="line">            <span class="string">"0.0.0.0/8"</span>,</span><br><span class="line">            <span class="string">"10.0.0.0/8"</span>,</span><br><span class="line">            <span class="string">"100.64.0.0/10"</span>,</span><br><span class="line">            <span class="string">"127.0.0.0/8"</span>,</span><br><span class="line">            <span class="string">"169.254.0.0/16"</span>,</span><br><span class="line">            <span class="string">"172.16.0.0/12"</span>,</span><br><span class="line">            <span class="string">"192.0.0.0/24"</span>,</span><br><span class="line">            <span class="string">"192.0.2.0/24"</span>,</span><br><span class="line">            <span class="string">"192.168.0.0/16"</span>,</span><br><span class="line">            <span class="string">"198.18.0.0/15"</span>,</span><br><span class="line">            <span class="string">"198.51.100.0/24"</span>,</span><br><span class="line">            <span class="string">"203.0.113.0/24"</span>,</span><br><span class="line">            <span class="string">"::1/128"</span>,</span><br><span class="line">            <span class="string">"fc00::/7"</span>,</span><br><span class="line">            <span class="string">"fe80::/10"</span></span><br><span class="line">          ],</span><br><span class="line">          <span class="attr">"outboundTag"</span>: <span class="string">"blocked"</span></span><br><span class="line">        &#125;</span><br><span class="line">      ]</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>v2ray调试</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo systemctl restart v2ray</span><br><span class="line">sudo systemctl status -l v2ray</span><br></pre></td></tr></table></figure><p>设置v2ray开机启动</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl enable v2ray</span><br></pre></td></tr></table></figure><p>打开 80（HTTP）和 443（HTTPS）端口(如果看过我前几期视频，确定防火墙规则设置好了，谷歌云可以忽略。其他品牌服务器请确认已经开启了80和443端口如果没有可尝试下面代码操作或者服务器网页端<br>开启<code>http80端口</code>和<code>https 443端口</code>)</p><p>也可以通过下面的命令来打开这两个端口:请自行开启防火墙开机启动</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo firewall-cmd --permanent --zone=public --add-service=http</span><br><span class="line">sudo firewall-cmd --permanent --zone=public --add-service=https</span><br><span class="line">sudo firewall-cmd --reload</span><br></pre></td></tr></table></figure><h3 id="安装NGINX"><a href="#安装NGINX" class="headerlink" title="安装NGINX"></a>安装NGINX</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#安装 EPEL 仓库（谷歌云忽略此步骤，如果你是使用其他品牌vps服务器如果没有安装EPEL请先安装）</span></span><br><span class="line">sudo yum install epel-release</span><br><span class="line"></span><br><span class="line"><span class="comment">#安装 Nginx  【 yum remove nginx 如果想删除nginx卸载命令 】</span></span><br><span class="line">sudo yum install nginx</span><br><span class="line"></span><br><span class="line">sudo systemctl <span class="built_in">enable</span> nginx.service         <span class="comment">#设置开机启动Nginx</span></span><br><span class="line"></span><br><span class="line">sudo systemctl start nginx.service          <span class="comment">#启动Nginx服务</span></span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">调试代码如下：</span><br><span class="line">sudo systemctl start nginx.service                //开启 Nginx</span><br><span class="line">sudo systemctl stop nginx.service                //停止 Nginx</span><br><span class="line">sudo systemctl status -l nginx.service          //查看 Nginx运行状态</span><br><span class="line">sudo systemctl restart nginx.service            //重新启动 Nginx</span><br><span class="line">sudo systemctl <span class="built_in">disable</span> nginx.service           //取消开机启动 Nginx</span><br><span class="line">sudo systemctl reload nginx.service           //重载Nginx (如更改Nginx配置需要重新载入数据)</span><br><span class="line">sudo systemctl <span class="built_in">enable</span> nginx.service            //开机启动</span><br><span class="line">     </span><br><span class="line">     </span><br><span class="line">调试代码如下： Nginx调试也可以不需要代码后面添加 **.service** 请先**sudo systemctl start nginx.service**</span><br><span class="line">和**sudo systemctl <span class="built_in">enable</span> nginx.service** 然后在通过下面代码也可以调试.</span><br><span class="line"></span><br><span class="line">sudo systemctl start nginx              //开启 Nginx</span><br><span class="line">sudo systemctl stop nginx              //停止 Nginx</span><br><span class="line">sudo systemctl status -l nginx        //查看 Nginx运行状态</span><br><span class="line">sudo systemctl restart nginx             //重新启动 Nginx</span><br><span class="line">sudo systemctl <span class="built_in">disable</span> nginx           //取消开机启动 Nginx</span><br><span class="line">sudo systemctl reload nginx          //重载Nginx (如更改Nginx配置需要重新载入数据)</span><br><span class="line">sudo systemctl <span class="built_in">enable</span> nginx          //开机启动</span><br></pre></td></tr></table></figure><p>通过以上方式安装的 Nginx，所有相关的配置文件都在 /etc/nginx/ 目录中<br><strong>Nginx 的主配置文件是 /etc/nginx/nginx.conf</strong><br><strong>Nginx 日志文件（access.log 和 error.log ）位于 /var/log/nginx/ 目录中。</strong></p><p>如果在设置完成之后不能成功使用，可能是由于 SElinux 机制(如果你是 <code>CentOS 7</code> 的用户请特别留意SElinux 这一机制)阻止了 Nginx 转发向内网的数据<br>如果是这样的话，在V2Ray的日志里不会有访问信息，在 Nginx 的日志里会出现大量的 “Permission Denied” 字段<br>要解决这一问题需要在终端下键入以下命令：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">setsebool -P httpd_can_network_connect 1    &#x2F;&#x2F;非常重要debian忽略</span><br></pre></td></tr></table></figure><p>验证 Nginx 是否成功启动，可以在浏览器中打开 <a href="http://YOUR_IP">http://YOUR_IP</a>   注意：打开则显示centos网页 但是提示不安全网站没开启ssl加密https</p><h3 id="生成证书"><a href="#生成证书" class="headerlink" title="生成证书"></a>生成证书</h3><p><strong>如果你已经有其他证书可忽略，把证书和密钥放到服务器指定目录下，只需在Nginx 中指定 证书和密钥路径。申请证书方法太多可通过安装acme.sh工具生成证书或其他方法生成证书，可Google搜索。</strong></p><p><strong>1.安装acem.sh证书生成工具，以下提供3种方法安装，选其中任意一种方法安装证书工具 (温馨提示：自动升级acme.sh在root下输入 acme.sh upgrade)</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">curl  https://get.acme.sh | sh   // 如提示安装失败 请先安装curl 输入 yum -y install curl</span><br><span class="line"></span><br><span class="line">wget -O -  https://get.acme.sh | sh     //如提示安装失败请（先安装wget）输入 yum -y install wget 已经安装了忽略</span><br><span class="line"></span><br><span class="line">git <span class="built_in">clone</span> https://github.com/acmesh-official/acme.sh.git   // 如提示安装失败 先安装git 已经安装了的忽略 输入 yum install git</span><br><span class="line"><span class="built_in">cd</span> ./acme.sh</span><br><span class="line">./acme.sh --install</span><br></pre></td></tr></table></figure><p>通过以上代码安装acme.sh提示红色抱错 你可以按实际相关情况而定安装依赖 比如安装socat 或者 netcat<br>       <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">centos7  yum install socat  <span class="comment">#通过80端口生成证书的依赖</span></span><br><span class="line">centos7  yum install netcat</span><br><span class="line"></span><br><span class="line">debian  apt-get install openssl cron socat curl</span><br><span class="line">debian  apt-get -y install netcat</span><br><span class="line"></span><br><span class="line">安装成功后执行 <span class="built_in">source</span> ~/.bashrc  以确保脚本所设置的命令别名生效</span><br></pre></td></tr></table></figure></p><p><strong>2.生成证书 路径为/root/.acme.sh文件下 安装好后可自行查看</strong><br>  <strong>温馨提示：通过acme.sh生成证书有多种方法：</strong><br>  例如—自动DNS API集成 如：cloudflare DNS API 令牌 和 使用全局API密钥 acme.sh支持大多数dns生成证书<br>  例如—使用DNS手动模式，等多种其他安装方法，如果你是个好学的人可Google </p><p>  生成证书如下：本期视频只用指定端口 生成证书 <code>**推荐使用443端口生成证书**</code>（一般用单域名足以，毕竟是翻墙用无需搞那么多花里胡哨的多域，比如：主域baidu.com那么不建议使用<a href="http://www.baidu.com,因为是翻墙的前端web请自定义比如tw.baidu.com,前缀tw可以自定义请控制三个字符，主域baidu.com和二级www.baidu.com可以备用你懂的）">www.baidu.com,因为是翻墙的前端web请自定义比如tw.baidu.com,前缀tw可以自定义请控制三个字符，主域baidu.com和二级www.baidu.com可以备用你懂的）</a></p><p><strong>1.通过侦听80端口申请证书，如果80端口被占用,请使用443端口,请确保这些端口都打开了</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo ~&#x2F;.acme.sh&#x2F;acme.sh --issue -d 域名 --standalone -k ec-256</span><br></pre></td></tr></table></figure><p><strong>2.如果您80在反向代理或负载均衡器后面使用非标准端口，则可以–httpport用来指定端口</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo ~&#x2F;.acme.sh&#x2F;acme.sh --issue -d 域名 --standalone --httpport 端口</span><br></pre></td></tr></table></figure><p><strong>3.侦听443端口以颁发证书，请确保443端口开启</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo ~&#x2F;.acme.sh&#x2F;acme.sh --issue -d 域名 --alpn -k ec-256</span><br></pre></td></tr></table></figure><p><strong>4.如果您443在反向代理或负载均衡器后面使用非标准端口，则可以–tlsport用来指定端口</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo ~&#x2F;.acme.sh&#x2F;acme.sh --issue -d 域名 --alpn --tlsport 端口</span><br></pre></td></tr></table></figure><p>  <strong>-k 表示密钥长度，后面的值可以是 ec-256 、ec-384、2048、3072、4096、8192，带有 ec 表示生成的是 ECC 证书，没有则是 RSA 证书。在安全性上 256 位的 ECC 证书等同于 3072 位的 RSA 证书</strong></p><h3 id="证书和密钥安装到指定路径"><a href="#证书和密钥安装到指定路径" class="headerlink" title="证书和密钥安装到指定路径"></a>证书和密钥安装到指定路径</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;etc&#x2F;v2ray （路径可自定义）</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ecc 安装代码 sudo ~&#x2F;.acme.sh&#x2F;acme.sh --installcert -d 域名 --fullchainpath &#x2F;etc&#x2F;v2ray&#x2F;v2ray.crt --keypath &#x2F;etc&#x2F;v2ray&#x2F;v2ray.key --ecc</span><br><span class="line"></span><br><span class="line">rsa 安装代码 sudo ~&#x2F;.acme.sh&#x2F;acme.sh --installcert -d 域名 --fullchainpath &#x2F;etc&#x2F;v2ray&#x2F;v2ray.crt --keypath &#x2F;etc&#x2F;v2ray&#x2F;v2ray.key</span><br></pre></td></tr></table></figure><h3 id="配置NGINX-conf"><a href="#配置NGINX-conf" class="headerlink" title="配置NGINX *.conf"></a>配置NGINX *.conf</h3><p><strong>vi /etc/nginx/nginx.conf  #进入编辑配置文件：长按键盘上D键删除所有配置信息，再按键盘Ins键进入编辑模式复制如下代码黏贴到配置中编辑，填写对应自己的配置信息后。最后同时按键盘上 shift+: 键，在输入wq保存退出</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line">user nginx;</span><br><span class="line">worker_processes auto;</span><br><span class="line">error_log /var/<span class="built_in">log</span>/nginx/error.log;</span><br><span class="line">pid /run/nginx.pid;</span><br><span class="line"></span><br><span class="line">include /usr/share/nginx/modules/*.conf;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">events &#123;</span><br><span class="line">    worker_connections 1024;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">http &#123;</span><br><span class="line">    log_format  main  <span class="string">'$remote_addr - $remote_user [$time_local] "$request" '</span></span><br><span class="line">                      <span class="string">'$status $body_bytes_sent "$http_referer" '</span></span><br><span class="line">                      <span class="string">'"$http_user_agent" "$http_x_forwarded_for"'</span>;</span><br><span class="line"></span><br><span class="line">   </span><br><span class="line">    access_log  /var/<span class="built_in">log</span>/nginx/access.log  main;</span><br><span class="line"></span><br><span class="line">    sendfile            on;</span><br><span class="line">    tcp_nopush          on;</span><br><span class="line">    tcp_nodelay         on;</span><br><span class="line">    keepalive_timeout   65;</span><br><span class="line">    types_hash_max_size 2048;</span><br><span class="line"></span><br><span class="line">    include  /etc/nginx/mime.types;</span><br><span class="line">    default_type application/octet-stream;</span><br><span class="line">    include /etc/nginx/conf.d/*.conf;</span><br><span class="line"></span><br><span class="line">server &#123;</span><br><span class="line">    listen 80;</span><br><span class="line">    server_name 域名;</span><br><span class="line">    rewrite ^/(.*) https://域名<span class="variable">$1</span> permanent; <span class="comment">#填写自己域名</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">    server <span class="comment">#关键代码</span></span><br><span class="line">&#123; </span><br><span class="line">    <span class="comment"># SSL configuration</span></span><br><span class="line">    listen 443 ssl http2 default_server;</span><br><span class="line">    listen [::]:443 ssl http2 default_server;</span><br><span class="line">    ssl_certificate /路径/*.pem; <span class="comment">#你的ssl证书*.crt 或者 *.pem都可以</span></span><br><span class="line">    ssl_certificate_key /路径/*.key; <span class="comment">#你的ssl key</span></span><br><span class="line">    ssl_ciphers EECDH+CHACHA20:EECDH+CHACHA20-draft:EECDH+ECDSA+AES128:EECDH+aRSA+AES128:RSA+AES128:EECDH+ECDSA+AES256:EECDH+aRSA+AES256:RSA+AES256:EECDH+ECDSA+3DES:EECDH+aRSA+3DES:RSA+3DES:!MD5;  <span class="comment">#套件RSA和ecc不一样在下面我会分别给出</span></span><br><span class="line">    ssl_protocols TLSv1.1 TLSv1.2 TLSv1.3;</span><br><span class="line">    root /usr/share/nginx/html; <span class="comment">#网页路径，这里也可以放你们自己的html网站替换下就可以了</span></span><br><span class="line">    server_name 域名; <span class="comment">#你的服务器域名</span></span><br><span class="line"> </span><br><span class="line">    location /ray &#123; <span class="comment">#/ray 切记路径需要和v2ray服务器端和客户端保持一致 可自定义名字</span></span><br><span class="line">    proxy_redirect off;</span><br><span class="line">    proxy_pass http://127.0.0.1:端口; <span class="comment">#此IP地址和端口需要和v2ray服务器端配置保持一致，</span></span><br><span class="line">    proxy_http_version 1.1;</span><br><span class="line">    proxy_set_header Upgrade <span class="variable">$http_upgrade</span>;</span><br><span class="line">    proxy_set_header Connection <span class="string">"upgrade"</span>;</span><br><span class="line">    proxy_set_header Host <span class="variable">$http_host</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>套件如下：</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ECDHE-RSA-AES256-GCM-SHA512:DHE-RSA-AES256-GCM-SHA512:ECDHE-RSA-AES256-GCM-SHA384:DHE-RSA-AES256-GCM-SHA384:ECDHE-RSA-AES256-SHA384;   #RSA套件</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">EECDH+CHACHA20:EECDH+CHACHA20-draft:EECDH+ECDSA+AES128:EECDH+aRSA+AES128:RSA+AES128:EECDH+ECDSA+AES256:EECDH+aRSA+AES256:RSA+AES256:EECDH+ECDSA+3DES:EECDH+aRSA+3DES:RSA+3DES:!MD5;  <span class="comment">#Ecc套件</span></span><br></pre></td></tr></table></figure><p><strong>修改 Nginx 配置后，请务必重新加载配置  输入 sudo systemctl reload nginx.service   #必须这样操作</strong> </p><p>最后请输入<code>reboot</code>重启服务器<code>（记得执行）</code></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">reboot</span><br></pre></td></tr></table></figure><p>查询是否开启ssl 打开网站<a href="https://myssl.com/ssl.html输入自己域名，端口输入443">https://myssl.com/ssl.html输入自己域名，端口输入443</a> 或者 打开<a href="https://www.ssllabs.com/ssltest/index.html">https://www.ssllabs.com/ssltest/index.html</a> 查询 ，也可以google搜索关键字ssl查询，很多网站可以查询，评分是否到达A级别</p><p><strong>温馨提示：通过acme.sh工具生成证书请使用443端口 代码如下：sudo ~/.acme.sh/acme.sh –issue -d 域名 –alpn -k ec-256 （侦听443端口以颁发证书，请确保443端口开启 按文章流程操作80端口生成证书时会提示端口占用，当然如果你想简单点可以通过已有购买的证书或者通过宝塔申请的或者其他证书，把密钥和证书直接复制拷贝到服务器指定路径下，在配置nginx指向证书和路径。部分免费证书会缺少CA证书那么在网站ssl评分就会大打折扣，解决办法是重新把CA证书添加下就可以了</strong></p><p><strong>通过在浏览器输入自己域名查询是否发现网站加了一把锁🔒开启了https， 且网站域名ssl评分到达A 如果是，恭喜你搭建成功.如果你已经学会了那么接下来的课程会越来越有意思.</strong></p><h3 id="BBr安装"><a href="#BBr安装" class="headerlink" title="BBr安装"></a>BBr安装</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget &quot;https:&#x2F;&#x2F;github.com&#x2F;chiakge&#x2F;Linux-NetSpeed&#x2F;raw&#x2F;master&#x2F;tcp.sh&quot; &amp;&amp; chmod +x tcp.sh &amp;&amp; .&#x2F;tcp.sh</span><br></pre></td></tr></table></figure><h3 id="如果想卸载V2Ray执行下面代码"><a href="#如果想卸载V2Ray执行下面代码" class="headerlink" title="如果想卸载V2Ray执行下面代码"></a>如果想卸载V2Ray执行下面代码</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bash install-release.sh --remove</span><br></pre></td></tr></table></figure><h3 id="查询tls开启状态"><a href="#查询tls开启状态" class="headerlink" title="查询tls开启状态"></a>查询tls开启状态</h3><p><a href="https://www.ssllabs.com/ssltest/index.html">https://www.ssllabs.com/ssltest/index.html</a> 输入自己域名查询即可</p><p><code>温馨提示：如果想短时间内提升自己的可以参加我的培训，多年实战沉淀精品课程，vIP课程基本上所有平台找不到，一阵见血帮你打通任督二脉，人人都可以是专家</code>。<br><a href="https://www.rootfw.com/posts/4b7bc44c.html">点击课程详情</a><br><a href="https://t.me/RootInstitute">添加公开电报群</a><br><a href="https://cdn.jsdelivr.net/gh/ComeBey/imghosting/comebey-pic/html.zip">Nginx前端模板下载</a></p>]]></content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;同步vps时间和电脑时间&quot;&gt;&lt;a href=&quot;#同步vps时间和电脑时间&quot; class=&quot;headerlink&quot; title=&quot;同步vps时间和电脑时间&quot;&gt;&lt;/a&gt;同步vps时间和电脑时间&lt;/h3&gt;&lt;h4 id=&quot;centos7&quot;&gt;&lt;a href=&quot;#centos7&quot; class=&quot;headerlink&quot; title=&quot;centos7&quot;&gt;&lt;/a&gt;centos7&lt;/h4&gt;&lt;p&gt;更新服务器 &lt;code&gt;yum update -y&lt;/code&gt; (部分系统提示&lt;strong&gt;NO packages marked for update&lt;/strong&gt;则无需更新)&lt;br&gt;设置硬件时钟调整为与本地时钟一致, 设置时区为上海 date -R 是查看服务器当前时间&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;date -R&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;timedatectl &lt;span class=&quot;built_in&quot;&gt;set&lt;/span&gt;-local-rtc 1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;timedatectl &lt;span class=&quot;built_in&quot;&gt;set&lt;/span&gt;-timezone Asia/Shanghai&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;


&lt;h4 id=&quot;Debian&quot;&gt;&lt;a href=&quot;#Debian&quot; class=&quot;headerlink&quot; title=&quot;Debian&quot;&gt;&lt;/a&gt;Debian&lt;/h4&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;date -R&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;rm -rf /etc/localtime&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;cp /usr/share/zoneinfo/Asia/Shanghai /etc/localtime&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;安装依赖&quot;&gt;&lt;a href=&quot;#安装依赖&quot; class=&quot;headerlink&quot; title=&quot;安装依赖&quot;&gt;&lt;/a&gt;安装依赖&lt;/h3&gt;&lt;h4 id=&quot;debian&quot;&gt;&lt;a href=&quot;#debian&quot; class=&quot;headerlink&quot; title=&quot;debian&quot;&gt;&lt;/a&gt;debian&lt;/h4&gt;&lt;p&gt;安装依赖&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;apt update&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;apt install curl&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h4 id=&quot;centos7-1&quot;&gt;&lt;a href=&quot;#centos7-1&quot; class=&quot;headerlink&quot; title=&quot;centos7&quot;&gt;&lt;/a&gt;centos7&lt;/h4&gt;&lt;p&gt;安装依赖&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;yum makecache&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;yum install curl&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;安装完后执行下面代码&quot;&gt;&lt;a href=&quot;#安装完后执行下面代码&quot; class=&quot;headerlink&quot; title=&quot;安装完后执行下面代码&quot;&gt;&lt;/a&gt;安装完后执行下面代码&lt;/h3&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;curl -O https:&amp;#x2F;&amp;#x2F;raw.githubusercontent.com&amp;#x2F;v2fly&amp;#x2F;fhs-install-v2ray&amp;#x2F;master&amp;#x2F;install-release.sh&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;curl -O https:&amp;#x2F;&amp;#x2F;raw.githubusercontent.com&amp;#x2F;v2fly&amp;#x2F;fhs-install-v2ray&amp;#x2F;master&amp;#x2F;install-dat-release.sh&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
    
    </summary>
    
    
      <category term="科学上网" scheme="https://www.rootfw.com/categories/%E7%A7%91%E5%AD%A6%E4%B8%8A%E7%BD%91/"/>
    
      <category term="v2ray" scheme="https://www.rootfw.com/categories/%E7%A7%91%E5%AD%A6%E4%B8%8A%E7%BD%91/v2ray/"/>
    
    
      <category term="v2ray" scheme="https://www.rootfw.com/tags/v2ray/"/>
    
  </entry>
  
  <entry>
    <title>v2ray新版本配置TLS</title>
    <link href="https://www.rootfw.com/posts/3e3bccee.html"/>
    <id>https://www.rootfw.com/posts/3e3bccee.html</id>
    <published>2020-07-28T06:54:23.000Z</published>
    <updated>2020-08-15T13:46:13.098Z</updated>
    
    <content type="html"><![CDATA[<p><a href="https://www.hostbuf.com/t/988.html">Finalshell SSH连接工具下载</a><br><a href="https://mobaxterm.mobatek.net/download-home-edition.html">Mobaxterm SSH连接工具下载</a> </p><h3 id="1-服务器时间同步"><a href="#1-服务器时间同步" class="headerlink" title="1.服务器时间同步"></a>1.服务器时间同步</h3><p>设置硬件时钟调整为与本地时钟一致, 设置时区为上海 date -R 是查看服务器当前时间<br>centos7时间同步</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">date -R</span><br><span class="line">timedatectl <span class="built_in">set</span>-local-rtc 1</span><br><span class="line">timedatectl <span class="built_in">set</span>-timezone Asia/Shanghai</span><br></pre></td></tr></table></figure><a id="more"></a><p>Debian系统同步时间如下：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">date -R</span><br><span class="line">rm -rf /etc/localtime</span><br><span class="line">cp /usr/share/zoneinfo/Asia/Shanghai /etc/localtime</span><br></pre></td></tr></table></figure><h4 id="debian"><a href="#debian" class="headerlink" title="debian"></a>debian</h4><p>安装依赖</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">apt update</span><br><span class="line">apt install curl</span><br></pre></td></tr></table></figure><h4 id="centos7"><a href="#centos7" class="headerlink" title="centos7"></a>centos7</h4><p>安装依赖</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">yum makecache</span><br><span class="line">yum install curl</span><br></pre></td></tr></table></figure><h3 id="2-安装dat和release-sh"><a href="#2-安装dat和release-sh" class="headerlink" title="2.安装dat和release.sh"></a>2.安装dat和release.sh</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">curl -O https://raw.githubusercontent.com/v2fly/fhs-install-v2ray/master/install-release.sh</span><br><span class="line">curl -O https://raw.githubusercontent.com/v2fly/fhs-install-v2ray/master/install-dat-release.sh</span><br></pre></td></tr></table></figure><h3 id="3-安装和更新V2Ray"><a href="#3-安装和更新V2Ray" class="headerlink" title="3.安装和更新V2Ray"></a>3.安装和更新V2Ray</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bash install-release.sh</span><br></pre></td></tr></table></figure><h4 id="安装v2ray输入如下内容"><a href="#安装v2ray输入如下内容" class="headerlink" title="安装v2ray输入如下内容"></a>安装v2ray输入如下内容</h4><figure class="highlight diff"><figcaption><span>每行代码 " + " 号忽略</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="addition">+info: unzip is installed.</span></span><br><span class="line"><span class="addition">+info: Extract the V2Ray package to /tmp/tmp.RS0y2YR2ZS/ and prepare it for installation.</span></span><br><span class="line"><span class="addition">+installed: /usr/local/bin/v2ray</span></span><br><span class="line"><span class="addition">+installed: /usr/local/bin/v2ctl</span></span><br><span class="line"><span class="addition">+installed: /usr/local/lib/v2ray/geoip.dat</span></span><br><span class="line"><span class="addition">+installed: /usr/local/lib/v2ray/geosite.dat</span></span><br><span class="line"><span class="addition">+installed: /usr/local/etc/v2ray/00_log.json</span></span><br><span class="line"><span class="addition">+installed: /usr/local/etc/v2ray/01_api.json</span></span><br><span class="line"><span class="addition">+installed: /usr/local/etc/v2ray/02_dns.json</span></span><br><span class="line"><span class="addition">+installed: /usr/local/etc/v2ray/03_routing.json</span></span><br><span class="line"><span class="addition">+installed: /usr/local/etc/v2ray/04_policy.json</span></span><br><span class="line"><span class="addition">+installed: /usr/local/etc/v2ray/05_inbounds.json</span></span><br><span class="line"><span class="addition">+installed: /usr/local/etc/v2ray/06_outbounds.json</span></span><br><span class="line"><span class="addition">+installed: /usr/local/etc/v2ray/07_transport.json</span></span><br><span class="line"><span class="addition">+installed: /usr/local/etc/v2ray/08_stats.json</span></span><br><span class="line"><span class="addition">+installed: /usr/local/etc/v2ray/09_reverse.json</span></span><br><span class="line"><span class="addition">+installed: /var/log/v2ray/</span></span><br><span class="line"><span class="addition">+installed: /etc/systemd/system/v2ray.service</span></span><br><span class="line"><span class="addition">+installed: /etc/systemd/system/v2ray@.service</span></span><br></pre></td></tr></table></figure><h3 id="4-安裝最新發行的geoip-dat和geosite-dat"><a href="#4-安裝最新發行的geoip-dat和geosite-dat" class="headerlink" title="4.安裝最新發行的geoip.dat和geosite.dat"></a>4.安裝最新發行的geoip.dat和geosite.dat</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bash install-dat-release.sh</span><br></pre></td></tr></table></figure><h3 id="5-创建和编辑配置文件"><a href="#5-创建和编辑配置文件" class="headerlink" title="5.创建和编辑配置文件"></a>5.创建和编辑配置文件</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cd &#x2F;usr&#x2F;local&#x2F;etc&#x2F;v2ray</span><br></pre></td></tr></table></figure><p>在/usr/local/etc/v2ray下面创建一个新的config.json配置文件<br>复制以下代码到config.json</p><figure class="highlight json"><figcaption><span>/usr/local/etc/v2ray</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"inbounds"</span>: [</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">"port"</span>: <span class="number">443</span>, <span class="comment">// 建议使用 443 端口</span></span><br><span class="line">      <span class="attr">"protocol"</span>: <span class="string">"vmess"</span>,    </span><br><span class="line">      <span class="attr">"settings"</span>: &#123;</span><br><span class="line">        <span class="attr">"clients"</span>: [</span><br><span class="line">          &#123;</span><br><span class="line">            <span class="attr">"id"</span>: <span class="string">"23ad6b10-8d1ae3e35cd38297"</span>,  <span class="comment">//UUID</span></span><br><span class="line">            <span class="attr">"alterId"</span>: <span class="number">64</span> <span class="comment">//额外id</span></span><br><span class="line">          &#125;</span><br><span class="line">        ]</span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="attr">"streamSettings"</span>: &#123;</span><br><span class="line">        <span class="attr">"network"</span>: <span class="string">"tcp"</span>, <span class="comment">//协议自己替换比如WS</span></span><br><span class="line">        <span class="attr">"security"</span>: <span class="string">"tls"</span>, <span class="comment">// security 要设置为 tls 才会启用 TLS</span></span><br><span class="line">        <span class="attr">"tlsSettings"</span>: &#123;</span><br><span class="line">          <span class="attr">"certificates"</span>: [</span><br><span class="line">            &#123;</span><br><span class="line">              <span class="attr">"certificateFile"</span>: <span class="string">"/etc/v2ray/v2ray.crt"</span>, <span class="comment">// 证书文件</span></span><br><span class="line">              <span class="attr">"keyFile"</span>: <span class="string">"/etc/v2ray/v2ray.key"</span> <span class="comment">// 密钥文件</span></span><br><span class="line">            &#125;</span><br><span class="line">          ]</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  ],</span><br><span class="line">  <span class="attr">"outbounds"</span>: [</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">"protocol"</span>: <span class="string">"freedom"</span>,</span><br><span class="line">      <span class="attr">"settings"</span>: &#123;&#125;</span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>v2ray调试</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo systemctl restart v2ray</span><br><span class="line">sudo systemctl status -l v2ray</span><br></pre></td></tr></table></figure><p>设置v2ray开机启动</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl enable v2ray</span><br></pre></td></tr></table></figure><h3 id="6-生成证书"><a href="#6-生成证书" class="headerlink" title="6.生成证书"></a>6.生成证书</h3><p><strong>如果你已经有其他证书可忽略，把证书和密钥放到服务器指定目录下。申请证书方法太多可通过安装acme.sh工具生成证书或其他方法生成证书，可Google搜索。</strong></p><p><strong>1.安装acem.sh证书生成工具，以下提供3种方法安装，选其中任意一种方法安装证书工具 (温馨提示：自动升级acme.sh在root下输入 acme.sh upgrade)</strong></p><figure class="highlight bash"><figcaption><span>/root/.acme.sh</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">curl  https://get.acme.sh | sh   // 如提示安装失败 请先安装curl 输入 yum -y install curl</span><br><span class="line"></span><br><span class="line">wget -O -  https://get.acme.sh | sh     //如提示安装失败请（先安装wget）输入 yum -y install wget 已经安装了忽略</span><br><span class="line"></span><br><span class="line">git <span class="built_in">clone</span> https://github.com/acmesh-official/acme.sh.git   // 如提示安装失败 先安装git 已经安装了的忽略 输入 yum install git</span><br><span class="line"><span class="built_in">cd</span> ./acme.sh</span><br><span class="line">./acme.sh --install</span><br></pre></td></tr></table></figure><p>通过以上代码安装acme.sh提示<code>红色</code>抱错 你可以按实际相关情况而定安装依赖 比如安装socat 或者 netcat<br>       <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">centos7  yum install socat     <span class="comment">#通过80端口生成证书的依赖</span></span><br><span class="line">centos7  yum isntall netcat</span><br><span class="line"></span><br><span class="line">debian  apt-get install openssl cron socat curl</span><br><span class="line">debian  apt-get -y install netcat</span><br><span class="line"></span><br><span class="line">安装成功后执行 <span class="built_in">source</span> ~/.bashrc   <span class="comment">#以确保脚本所设置的命令别名生效</span></span><br></pre></td></tr></table></figure></p><p><strong>2.生成证书 路径为/root/.acme.sh文件下 安装好后可自行查看</strong><br>  <strong>温馨提示：通过acme.sh生成证书有多种方法：</strong><br>  例如—自动DNS API集成 如：cloudflare DNS API 令牌 和 使用全局API密钥 acme.sh支持大多数dns生成证书<br>  例如—使用DNS手动模式，等多种其他安装方法，如果你是个好学的人可Google </p><p>  生成证书如下：本期视频只用指定端口 生成证书 <strong>推荐使用443端口生成证书</strong> （一般用单域名足以，毕竟是翻墙用无需搞那么多花里胡哨的多域，比如：主域baidu.com那么不建议使用 <a href="http://www.baidu.com">www.baidu.com</a> 因为是翻墙的前端web请自定义比如tw.baidu.com,前缀tw可以自定义请不要写太长，主域baidu.com和二级 <a href="http://www.baidu.com">www.baidu.com</a> 可以备用你懂的 ）</p><p><strong>1.通过侦听80端口申请证书，如果80端口被占用,请使用443端口,请确保这些端口都打开了</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo ~&#x2F;.acme.sh&#x2F;acme.sh --issue -d 域名 --standalone -k ec-256</span><br></pre></td></tr></table></figure><p><strong>2.如果您80在反向代理或负载均衡器后面使用非标准端口，则可以–httpport用来指定端口</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo ~&#x2F;.acme.sh&#x2F;acme.sh --issue -d 域名 --standalone --httpport 端口</span><br></pre></td></tr></table></figure><p><strong>3.侦听443端口以颁发证书，请确保443端口开启</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo ~&#x2F;.acme.sh&#x2F;acme.sh --issue -d 域名 --alpn -k ec-256</span><br></pre></td></tr></table></figure><p><strong>4.如果您443在反向代理或负载均衡器后面使用非标准端口，则可以–tlsport用来指定端口</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo ~&#x2F;.acme.sh&#x2F;acme.sh --issue -d 域名 --alpn --tlsport 端口</span><br></pre></td></tr></table></figure><p>  <strong>-k 表示密钥长度，后面的值可以是 ec-256 、ec-384、2048、3072、4096、8192，带有 ec 表示生成的是 ECC 证书，没有则是 RSA 证书。在安全性上 256 位的 ECC 证书等同于 3072 位的 RSA 证书</strong></p><p>温馨提示：如何80或者443端口被占用导致我们无法申请密钥和证书，我们可以通过kill封杀端口在重新申请。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">netstat -tlnp|grep 80</span><br><span class="line">或者</span><br><span class="line">netstat -tlnp|grep 443</span><br><span class="line">然后</span><br><span class="line">kill 1103（这个1103是进程端口id）</span><br><span class="line"></span><br><span class="line">如果终止不了，可以强制终止</span><br><span class="line">kill -9 1103</span><br></pre></td></tr></table></figure><h3 id="7-证书和密钥安装到指定路径"><a href="#7-证书和密钥安装到指定路径" class="headerlink" title="7.证书和密钥安装到指定路径"></a>7.证书和密钥安装到指定路径</h3><p>/etc/v2ray （路径可自定义）</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ecc 安装代码 sudo ~/.acme.sh/acme.sh --installcert -d 域名 --fullchainpath /etc/v2ray/v2ray.crt --keypath /etc/v2ray/v2ray.key --ecc</span><br><span class="line"></span><br><span class="line">rsa 安装代码 sudo ~/.acme.sh/acme.sh --installcert -d 域名 --fullchainpath /etc/v2ray/v2ray.crt --keypath /etc/v2ray/v2ray.key</span><br></pre></td></tr></table></figure><p>將 /etc/v2ray/v2ray.key 修改為 644 权限</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chmod 644 &#x2F;etc&#x2F;v2ray&#x2F;v2ray.key</span><br></pre></td></tr></table></figure><h3 id="8-BBr安装"><a href="#8-BBr安装" class="headerlink" title="8.BBr安装"></a>8.BBr安装</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget <span class="string">"https://github.com/chiakge/Linux-NetSpeed/raw/master/tcp.sh"</span> &amp;&amp; chmod +x tcp.sh &amp;&amp; ./tcp.sh</span><br></pre></td></tr></table></figure><h3 id="9-查询tls开启状态"><a href="#9-查询tls开启状态" class="headerlink" title="9.查询tls开启状态"></a>9.查询tls开启状态</h3><p><a href="https://www.ssllabs.com/ssltest/index.html">https://www.ssllabs.com/ssltest/index.html</a> 输入自己域名查询即可<br>关于config.json配置文件可以自己写，当然也包括其他各种负载均衡，反向代理。如果想短时间内提升自己的可以参加我的培训课。 </p><h3 id="10-如果想卸载V2Ray执行下面代码"><a href="#10-如果想卸载V2Ray执行下面代码" class="headerlink" title="10.如果想卸载V2Ray执行下面代码"></a>10.如果想卸载V2Ray执行下面代码</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bash install-release.sh --remove</span><br></pre></td></tr></table></figure><p><a href="https://t.me/RootInstitute">添加电报群</a></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;a href=&quot;https://www.hostbuf.com/t/988.html&quot;&gt;Finalshell SSH连接工具下载&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;https://mobaxterm.mobatek.net/download-home-edition.html&quot;&gt;Mobaxterm SSH连接工具下载&lt;/a&gt; &lt;/p&gt;
&lt;h3 id=&quot;1-服务器时间同步&quot;&gt;&lt;a href=&quot;#1-服务器时间同步&quot; class=&quot;headerlink&quot; title=&quot;1.服务器时间同步&quot;&gt;&lt;/a&gt;1.服务器时间同步&lt;/h3&gt;&lt;p&gt;设置硬件时钟调整为与本地时钟一致, 设置时区为上海 date -R 是查看服务器当前时间&lt;br&gt;centos7时间同步&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;date -R&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;timedatectl &lt;span class=&quot;built_in&quot;&gt;set&lt;/span&gt;-local-rtc 1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;timedatectl &lt;span class=&quot;built_in&quot;&gt;set&lt;/span&gt;-timezone Asia/Shanghai&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
    
    </summary>
    
    
      <category term="科学上网" scheme="https://www.rootfw.com/categories/%E7%A7%91%E5%AD%A6%E4%B8%8A%E7%BD%91/"/>
    
      <category term="v2ray" scheme="https://www.rootfw.com/categories/%E7%A7%91%E5%AD%A6%E4%B8%8A%E7%BD%91/v2ray/"/>
    
    
      <category term="v2ray" scheme="https://www.rootfw.com/tags/v2ray/"/>
    
  </entry>
  
  <entry>
    <title>v2ray官方新老脚本安装</title>
    <link href="https://www.rootfw.com/posts/f3e24172.html"/>
    <id>https://www.rootfw.com/posts/f3e24172.html</id>
    <published>2020-07-26T08:21:24.000Z</published>
    <updated>2020-08-06T11:32:01.024Z</updated>
    
    <content type="html"><![CDATA[<h3 id="下载-V2Ray"><a href="#下载-V2Ray" class="headerlink" title="下载 V2Ray"></a>下载 V2Ray</h3><ol><li><a href="https://github.com/v2ray/v2ray-core/releases">Github Release: github.com/v2ray/v2ray-core</a></li><li><a href="https://github.com/v2ray/dist/">Github 分流: github.com/v2ray/dist</a></li><li><a href="https://github.com/v2ray/homebrew-v2ray">Homebrew: github.com/v2ray/homebrew-v2ray</a></li><li><a href="https://www.archlinux.org/packages/community/x86_64/v2ray/">Arch Linux: packages/community/x86_64/v2ray</a></li><li><a href="https://snapcraft.io/v2ray-core">Snapcraft: snapcraft.io/v2ray-core</a></li><li>原安装脚本已被弃置，由 <a href="https://github.com/v2fly/fhs-install-v2ray">fhs-install-v2ray</a>替换。</li></ol><a id="more"></a><h3 id="老版本安装"><a href="#老版本安装" class="headerlink" title="老版本安装"></a>老版本安装</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bash &lt;(curl -L -s https:&#x2F;&#x2F;install.direct&#x2F;go.sh)</span><br></pre></td></tr></table></figure><p>此脚本会自动安装以下文件：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;usr&#x2F;bin&#x2F;v2ray&#x2F;v2ray：V2Ray 程序；</span><br><span class="line">&#x2F;usr&#x2F;bin&#x2F;v2ray&#x2F;v2ctl：V2Ray 工具；</span><br><span class="line">&#x2F;etc&#x2F;v2ray&#x2F;config.json：配置文件；</span><br><span class="line">&#x2F;usr&#x2F;bin&#x2F;v2ray&#x2F;geoip.dat：IP 数据文件</span><br><span class="line">&#x2F;usr&#x2F;bin&#x2F;v2ray&#x2F;geosite.dat：域名数据文件</span><br></pre></td></tr></table></figure><p>此脚本会配置自动运行脚本。自动运行脚本会在系统重启之后，自动运行 V2Ray。目前自动运行脚本只支持带有 Systemd 的系统，以及 Debian / Ubuntu 全系列。</p><p>运行脚本位于系统的以下位置：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;etc&#x2F;systemd&#x2F;system&#x2F;v2ray.service: Systemd</span><br><span class="line">&#x2F;etc&#x2F;init.d&#x2F;v2ray: SysV</span><br></pre></td></tr></table></figure><p>脚本运行完成后，你需要：<br>编辑 <code>/etc/v2ray/config.json</code> 文件来配置你需要的代理方式；<br>运行 <code>service v2ray start</code> 来启动 V2Ray 进程；<br>之后可以使用 <code>service v2ray start|stop|status|reload|restart|force-reload</code> 控制 V2Ray 的运行。</p><h3 id="新版本安装"><a href="#新版本安装" class="headerlink" title="新版本安装"></a>新版本安装</h3><h4 id="debian"><a href="#debian" class="headerlink" title="debian"></a>debian</h4><p>安装依赖</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">apt update</span><br><span class="line">apt install curl</span><br></pre></td></tr></table></figure><h4 id="centos7"><a href="#centos7" class="headerlink" title="centos7"></a>centos7</h4><p>安装依赖</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">yum makecache</span><br><span class="line">yum install curl</span><br></pre></td></tr></table></figure><p>centos或者debian安装完毕依赖执行下面代码</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">curl -O https:&#x2F;&#x2F;raw.githubusercontent.com&#x2F;v2fly&#x2F;fhs-install-v2ray&#x2F;master&#x2F;install-release.sh</span><br><span class="line">curl -O https:&#x2F;&#x2F;raw.githubusercontent.com&#x2F;v2fly&#x2F;fhs-install-v2ray&#x2F;master&#x2F;install-dat-release.sh</span><br></pre></td></tr></table></figure><p>安装和更新V2Ray</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bash install-release.sh</span><br></pre></td></tr></table></figure><p>文件路径</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">info: unzip is installed.</span><br><span class="line">info: Extract the V2Ray package to &#x2F;tmp&#x2F;tmp.RS0y2YR2ZS&#x2F; and prepare it for installation.</span><br><span class="line">installed: &#x2F;usr&#x2F;local&#x2F;bin&#x2F;v2ray</span><br><span class="line">installed: &#x2F;usr&#x2F;local&#x2F;bin&#x2F;v2ctl</span><br><span class="line">installed: &#x2F;usr&#x2F;local&#x2F;lib&#x2F;v2ray&#x2F;geoip.dat</span><br><span class="line">installed: &#x2F;usr&#x2F;local&#x2F;lib&#x2F;v2ray&#x2F;geosite.dat</span><br><span class="line">installed: &#x2F;usr&#x2F;local&#x2F;etc&#x2F;v2ray&#x2F;00_log.json</span><br><span class="line">installed: &#x2F;usr&#x2F;local&#x2F;etc&#x2F;v2ray&#x2F;01_api.json</span><br><span class="line">installed: &#x2F;usr&#x2F;local&#x2F;etc&#x2F;v2ray&#x2F;02_dns.json</span><br><span class="line">installed: &#x2F;usr&#x2F;local&#x2F;etc&#x2F;v2ray&#x2F;03_routing.json</span><br><span class="line">installed: &#x2F;usr&#x2F;local&#x2F;etc&#x2F;v2ray&#x2F;04_policy.json</span><br><span class="line">installed: &#x2F;usr&#x2F;local&#x2F;etc&#x2F;v2ray&#x2F;05_inbounds.json</span><br><span class="line">installed: &#x2F;usr&#x2F;local&#x2F;etc&#x2F;v2ray&#x2F;06_outbounds.json</span><br><span class="line">installed: &#x2F;usr&#x2F;local&#x2F;etc&#x2F;v2ray&#x2F;07_transport.json</span><br><span class="line">installed: &#x2F;usr&#x2F;local&#x2F;etc&#x2F;v2ray&#x2F;08_stats.json</span><br><span class="line">installed: &#x2F;usr&#x2F;local&#x2F;etc&#x2F;v2ray&#x2F;09_reverse.json</span><br><span class="line">installed: &#x2F;var&#x2F;log&#x2F;v2ray&#x2F;</span><br><span class="line">installed: &#x2F;etc&#x2F;systemd&#x2F;system&#x2F;v2ray.service</span><br><span class="line">installed: &#x2F;etc&#x2F;systemd&#x2F;system&#x2F;v2ray@.service</span><br></pre></td></tr></table></figure><p>安裝最新發行的 geoip.dat 和 geosite.dat</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bash install-dat-release.sh</span><br></pre></td></tr></table></figure><p>创建编辑配置文件</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cd &#x2F;usr&#x2F;local&#x2F;etc&#x2F;v2ray</span><br></pre></td></tr></table></figure><p>在/usr/local/etc/v2ray下面创建一个新的config.json配置文件<br>复制以下代码到config.json</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">"log"</span>: &#123;</span><br><span class="line">        <span class="attr">"access"</span>: <span class="string">"/var/log/v2ray/access.log"</span>,</span><br><span class="line">        <span class="attr">"error"</span>: <span class="string">"/var/log/v2ray/error.log"</span>,</span><br><span class="line">        <span class="attr">"loglevel"</span>: <span class="string">"warning"</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">"inbound"</span>: &#123;</span><br><span class="line">        <span class="attr">"port"</span>: <span class="number">12345</span>, <span class="comment">//请在防火墙开启对应的端口</span></span><br><span class="line">        <span class="attr">"protocol"</span>: <span class="string">"vmess"</span>,  <span class="comment">//vmess协议</span></span><br><span class="line">        <span class="attr">"settings"</span>: &#123;</span><br><span class="line">            <span class="attr">"clients"</span>: [</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="attr">"id"</span>: <span class="string">"db790014-700d-9b1c-d987-5aed2afa60ae"</span>,  <span class="comment">//UUid 这个ID可以通过v2ray客户端生成new替换</span></span><br><span class="line">                    <span class="attr">"level"</span>: <span class="number">1</span>,</span><br><span class="line">                    <span class="attr">"alterId"</span>: <span class="number">52</span>  <span class="comment">//额外id</span></span><br><span class="line">                &#125;</span><br><span class="line">            ]</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">"outbound"</span>: &#123;</span><br><span class="line">        <span class="attr">"protocol"</span>: <span class="string">"freedom"</span>,</span><br><span class="line">        <span class="attr">"settings"</span>: &#123;&#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">"inboundDetour"</span>: [],</span><br><span class="line">    <span class="attr">"outboundDetour"</span>: [</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="attr">"protocol"</span>: <span class="string">"blackhole"</span>,</span><br><span class="line">            <span class="attr">"settings"</span>: &#123;&#125;,</span><br><span class="line">            <span class="attr">"tag"</span>: <span class="string">"blocked"</span></span><br><span class="line">        &#125;</span><br><span class="line">    ],</span><br><span class="line">    <span class="attr">"routing"</span>: &#123;</span><br><span class="line">        <span class="attr">"strategy"</span>: <span class="string">"rules"</span>,</span><br><span class="line">        <span class="attr">"settings"</span>: &#123;</span><br><span class="line">            <span class="attr">"rules"</span>: [</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="attr">"type"</span>: <span class="string">"field"</span>,</span><br><span class="line">                    <span class="attr">"ip"</span>: [</span><br><span class="line">                        <span class="string">"0.0.0.0/8"</span>,</span><br><span class="line">                        <span class="string">"10.0.0.0/8"</span>,</span><br><span class="line">                        <span class="string">"100.64.0.0/10"</span>,</span><br><span class="line">                        <span class="string">"127.0.0.0/8"</span>,</span><br><span class="line">                        <span class="string">"169.254.0.0/16"</span>,</span><br><span class="line">                        <span class="string">"172.16.0.0/12"</span>,</span><br><span class="line">                        <span class="string">"192.0.0.0/24"</span>,</span><br><span class="line">                        <span class="string">"192.0.2.0/24"</span>,</span><br><span class="line">                        <span class="string">"192.168.0.0/16"</span>,</span><br><span class="line">                        <span class="string">"198.18.0.0/15"</span>,</span><br><span class="line">                        <span class="string">"198.51.100.0/24"</span>,</span><br><span class="line">                        <span class="string">"203.0.113.0/24"</span>,</span><br><span class="line">                        <span class="string">"::1/128"</span>,</span><br><span class="line">                        <span class="string">"fc00::/7"</span>,</span><br><span class="line">                        <span class="string">"fe80::/10"</span></span><br><span class="line">                    ],</span><br><span class="line">                    <span class="attr">"outboundTag"</span>: <span class="string">"blocked"</span></span><br><span class="line">                &#125;</span><br><span class="line">            ]</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>v2ray调试</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo systemctl restart v2ray</span><br><span class="line">sudo systemctl status -l v2ray</span><br></pre></td></tr></table></figure><p>设置v2ray开机启动</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl enable v2ray</span><br></pre></td></tr></table></figure><h3 id="BBr安装"><a href="#BBr安装" class="headerlink" title="BBr安装"></a>BBr安装</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget &quot;https:&#x2F;&#x2F;github.com&#x2F;chiakge&#x2F;Linux-NetSpeed&#x2F;raw&#x2F;master&#x2F;tcp.sh&quot; &amp;&amp; chmod +x tcp.sh &amp;&amp; .&#x2F;tcp.sh</span><br></pre></td></tr></table></figure><p>如果想卸载V2Ray执行下面代码</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bash install-release.sh --remove</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;下载-V2Ray&quot;&gt;&lt;a href=&quot;#下载-V2Ray&quot; class=&quot;headerlink&quot; title=&quot;下载 V2Ray&quot;&gt;&lt;/a&gt;下载 V2Ray&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/v2ray/v2ray-core/releases&quot;&gt;Github Release: github.com/v2ray/v2ray-core&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/v2ray/dist/&quot;&gt;Github 分流: github.com/v2ray/dist&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/v2ray/homebrew-v2ray&quot;&gt;Homebrew: github.com/v2ray/homebrew-v2ray&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://www.archlinux.org/packages/community/x86_64/v2ray/&quot;&gt;Arch Linux: packages/community/x86_64/v2ray&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://snapcraft.io/v2ray-core&quot;&gt;Snapcraft: snapcraft.io/v2ray-core&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;原安装脚本已被弃置，由 &lt;a href=&quot;https://github.com/v2fly/fhs-install-v2ray&quot;&gt;fhs-install-v2ray&lt;/a&gt;替换。&lt;/li&gt;
&lt;/ol&gt;
    
    </summary>
    
    
      <category term="科学上网" scheme="https://www.rootfw.com/categories/%E7%A7%91%E5%AD%A6%E4%B8%8A%E7%BD%91/"/>
    
      <category term="v2ray" scheme="https://www.rootfw.com/categories/%E7%A7%91%E5%AD%A6%E4%B8%8A%E7%BD%91/v2ray/"/>
    
    
      <category term="v2ray" scheme="https://www.rootfw.com/tags/v2ray/"/>
    
  </entry>
  
  <entry>
    <title>设置服务器登陆密码</title>
    <link href="https://www.rootfw.com/posts/3828c730.html"/>
    <id>https://www.rootfw.com/posts/3828c730.html</id>
    <published>2020-07-26T07:18:33.000Z</published>
    <updated>2020-08-08T23:00:28.251Z</updated>
    
    <content type="html"><![CDATA[<h3 id="centos7"><a href="#centos7" class="headerlink" title="centos7"></a>centos7</h3><p>拿到root权限后，修改SSH配置文件<code>/etc/ssh/sshd_config</code></p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/ssh/sshd_config</span><br><span class="line">PasswordAuthentication no 改成 yes</span><br><span class="line">PermitRootLogin no 改成 yes</span><br></pre></td></tr></table></figure><p>设置密码,输入两次，输入<code>不提示任何字符</code></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">passwd</span><br></pre></td></tr></table></figure><p>重启SSH服务，最后通过账号为root，密码为自己刚设置的通过第三方ssh登陆连接</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">service sshd restart</span><br></pre></td></tr></table></figure><h3 id="Debian-9和10"><a href="#Debian-9和10" class="headerlink" title="Debian 9和10"></a>Debian 9和10</h3><a id="more"></a><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">apt-get install ssh <span class="comment">#选择安装</span></span><br><span class="line">vim /etc/ssh/sshd_config</span><br><span class="line"><span class="comment">#PermitRootLogin prohibit-password 改为 PermitRootLogin yes</span></span><br><span class="line"><span class="comment">#PasswordAuthentication no 改为 PasswordAuthentication yes</span></span><br></pre></td></tr></table></figure><p>设置密码,输入两次，输入<code>不提示任何字符</code></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">passwd</span><br></pre></td></tr></table></figure><p>重启SSH服务，最后通过账号为root，密码为自己刚设置的通过第三方ssh登陆连接</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo &#x2F;etc&#x2F;init.d&#x2F;ssh restart</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;centos7&quot;&gt;&lt;a href=&quot;#centos7&quot; class=&quot;headerlink&quot; title=&quot;centos7&quot;&gt;&lt;/a&gt;centos7&lt;/h3&gt;&lt;p&gt;拿到root权限后，修改SSH配置文件&lt;code&gt;/etc/ssh/sshd_config&lt;/code&gt;&lt;/p&gt;
&lt;figure class=&quot;highlight sh&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;vim /etc/ssh/sshd_config&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;PasswordAuthentication no 改成 yes&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;PermitRootLogin no 改成 yes&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;设置密码,输入两次，输入&lt;code&gt;不提示任何字符&lt;/code&gt;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;passwd&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;重启SSH服务，最后通过账号为root，密码为自己刚设置的通过第三方ssh登陆连接&lt;/p&gt;
&lt;figure class=&quot;highlight sh&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;service sshd restart&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;Debian-9和10&quot;&gt;&lt;a href=&quot;#Debian-9和10&quot; class=&quot;headerlink&quot; title=&quot;Debian 9和10&quot;&gt;&lt;/a&gt;Debian 9和10&lt;/h3&gt;
    
    </summary>
    
    
      <category term="Linux" scheme="https://www.rootfw.com/categories/Linux/"/>
    
      <category term="centos7" scheme="https://www.rootfw.com/categories/Linux/centos7/"/>
    
    
      <category term="linux" scheme="https://www.rootfw.com/tags/linux/"/>
    
      <category term="服务器" scheme="https://www.rootfw.com/tags/%E6%9C%8D%E5%8A%A1%E5%99%A8/"/>
    
  </entry>
  
  <entry>
    <title>速率换算</title>
    <link href="https://www.rootfw.com/posts/20b4bacc.html"/>
    <id>https://www.rootfw.com/posts/20b4bacc.html</id>
    <published>2020-07-24T03:02:19.000Z</published>
    <updated>2020-08-19T09:00:17.151Z</updated>
    
    <content type="html"><![CDATA[<div id="hexo-blog-encrypt" data-wpm="文章已进行加密，需要密码才能继续阅读." data-whm="无效的密码。请检查并重试.">  <div class="hbe-input-container">  <input type="password" id="hbePass" placeholder="" />    <label for="hbePass">请输入访问密码.</label>    <div class="bottom-line"></div>  </div>  <script id="hbeData" type="hbeData" data-hmacdigest="d5eb4dc0a8624720e1c42b7287f984283ad005c442d2dfc1921f5183ba0d0d31">2f7a88df0239e0748d58d0a9b316299070c5528599e28cf3753cbf402924bff206588185a2c0a74aafd5f9290ecf54acb674ad0ca4695d1fa7b32b055733edfb6344300234ffcd424303ae673565098ed0d850b91bad2a90ef7b1393210a856a83fb87dc16bb4c05e8c150f6e5154e26093e32a3cb4f22c46c090cb706e0a5de9865eb9d9dc6a86ba7305116fc00d15e9b2082d38937f5451e25fbe9ce7b66700833ea8ad8935f8ec22ba9aba4c18116483a4d9793120b52ceb1a65dfd004fbd88c236e2c40a407ff6f58c9a76f07c4041d2d5d36c32274d13f726dc5e178003a7af281470a5742dcb24341b7e499ed83e7c0f7e4006cbbfbb7b5cc40295d0ca1aa84c48879c8e05d9f127a1ff0fa58f416897ae0bf8c90787b6bb419bccae9b707cf6033e5c158e8b1978b500e8ede651a63d27484eeb2cf18ca7a25c0df42684fa89dc67b7447543a7951073536fadbfd1b6d6c7582a93e179f7cb2917f2a75b4a4a785bc9b6e292898e183a5ff0c691d24da6650f29d1908381b5612e808f82c6659c9fdf02431e668551f73237d50713c7a184713600c3ed5179d3db600ce1ef6f16453604abaa0dd9f2891743209f583f6adcf1d4e85c945bca13b4eeab77c20d33e53b555514079f104672b4b5d2d9178a389fa7a2af8a6655cd774c6c19e9edfc34493b708498b4a62797384b61e666f7554916b0364049674c55a711c9532aaeebb4e2c86af5730c1b91dacd8b21325ef216d8cba63e403f5487387e64019813765227c9f7e562553a1f40e5064708af7f0f66c60ca3ffd15a5a6f9232102f25b7f358fea56efaa36e90e8d4b2e88719467fc0f254e6ca6849ccccdfecc1136b83f05822229c4cee4f5a6e1897622c1315861deedc74d6767d6fe3246977b20e00ef84bc39f8e4751283b026bde0c3f350e50bb5278850e44878c97c1f23c845d84a43066884cd3540075513f93bdf8c02a6820720d79df8cc80275dd87936d621401a0db8470db41e0146fa151eee7397fe8e9b3f2e97a5ba74c1b7a95b2580ad442f71a31cc89d156600e9964cad084007c19849fdac578d5a2df8b11546705980b42162fb6c51ec38cee9d87cea5694c80d784ffcf4ed208b64372f35ee8fe3dc2af2e59961668799b79a8728117661fbdea692ce44cc82f5b6668358f238527593e5fadf48ef18d7b6177f1c15fc534d30b6169b924a842020c90f5169e9add03c6d58e2d1a31d61c3dc7cd7a7289d076e22c754db53cb60dc9d4b18664e2f4150a0919f10f982e4fa89b2f46bc7617ba1d27ecc06840cacbd8307274a34ce9087e363c35eb568dffec442257e902e7f73a8dfa768f50171b7652222b2107343bbad8c2a5c6ed78fc68db4da5cae0715d38710df35e882d98675aa8aa37b66c5a43b339810469727db72f2c41e41750f84cc8b91a6285e926e0065414b3c9c493871555d327cfc0350045bb9e156cc95f2edc00e7a96432e84ea64880d99b503970e1b39531a828164d16c6fd6d0ce08104f477811a88ae8049b03059d8106dccffee5597bf2efc28fb2f7bdf85d5522873403c17a99415e0669c90d2fb8434a6f89e05b8388b2f13f159c7e1b101a4cb4d9a7b7f40365618fc3abcefae937448cb53c78d39d99d1dda14a6c2cffe30a839887ab38bf0a8445fdf3002630f16bc357fdfb8086ee022c8f49da22cb4a1fcc1d3184b3c27316c867e9e88db6662d7278823bd2f36ee7254eabab91ae247482a47c63498ad5a62d6b19f4412971314d2f79dfb7832ea3236a37242225cd50fa2953a8083804a0fad6899b3d65fb1b9e7f224e60e07447007cf6b330171d22332d5e0c54025e1a19cdd234b92d6b9226252a9dbea796fa15651174e3b6c45e928450fc7d11629749841355c5d2fc5df969668cb549c23755ffd4e2f93e3d09cc02d8f75ec6d7c04fb97af91407d613a91d7abbacf3c4da839375dad7d407078389cdc16ce01391d5cb7dc20993b1bc1218b9541cce6628e71249b19670520097b8ccc5b2a2e0be6b695ef05085727b6f0f668dc2d366c3a62638bd801027a65ce3932ba82639647091274775f2c676f076618161b9fc4c956d5787d2ea77d30c5a3485d60da0469098c6dde8e5996cf453b42a925ef1f29357f4ff2ace797439f56225ce312288d9d1c5fb181fd8373f16a2ce6acc69768dd7cb610f0fad8ea2c1e370467f50b0d4813a3613584706f570aa80ba5d0639e8e01dff04195efe25c7ec45fdeb4c75d0284cb98409772da5017bb19023763fa8e509205bdd5c5c7866c3bfa20f175c722974dec381f85afce2ff13fda4f13ac298dbd25389a88b32abde56aa6467b36ec9fe3ab462556fb13d0af79d2730798977e5ef17b0ffaa74be859fab6af21d12e7fa6d1bf2604ed465f6f3a696ad803bd818b1fbfcd57c9bd30fe56afd123462f151bab6edb4eb7373e52dfa36f1e5e93e75c41d21b667736a21c739eea4d6348e0678b7da8757e7604d26b627d3a99c0cb87725e2698ce163c8946b26bc9f291d7e6589f864c3950e769f7b7d07d66dc8a042c8f9a46e74325937e4129f90cc11c55d397beceebf8808443eb2786a4b6acac69eaa5a5f7cae62312c873351904ed94bf46c6567d420c6761a0e8e226f6d8e5d62420bfe52401861e5e4b1fe79e2bc155321cad2f363881e0ccd78a5969cee223449530662e8063f005099a1beb87735b900c29cf2398ba07ae9d869605cf5baa4698078b8219abc02802cbe9b6802da5457af9a4e5c1399ab596f24e6de5942b49be4dd749ca9b7f9eb51fd80cb87bfa3dcb7f0c11bb408899fa5ffe5ebab2d9598e04281a48401a197505138062408eb6257a31375fec8d1d51bdd2b9995fc261138bfcddfffad3159fc81fd58a3151aaa5d4267653fb0a5556fe198d5fcd6e76d5098e81dd7fe222e4b6e033c8770ff49fcf57a69fd7e0b6db42f5e6279fde09db42d5f6af7247a01d536ec57f904d85df4fffa3bcd187ad10ec5f0d53ed448fd5aaf7d4a28e77e6d4d56f93f570f6f1510de38fa98cae8cef0ce61bf1bfd241448f2e216704806966dd7177bc3cfe472d25cf6af84a0defffb9db66ccb922c4c45659b26afb9e37ed13bfd3a80be6f96513f2f8f1f557c02b656eeb07a57bb28e2aee5140e1d754a6dd9344bd8a14fbc5b36009052431bddb702b26e7b1a9e977529b12ee70f3d05d74d325c6bc3199742dc3f19cb168cb26c3237de130766c133b2a8553468b129c3b36d1c68a4c21357de916c1c1c52012320249d99ed3e5ca30c8d9217847aa612bee5ab4879541adf067705ae2a68cda6d12c9d0cffaebe030e0db17a5820dd2a92cdd6e884adec79a75a000cd7630a516e1ac8c10008f56cf4a67097cf4c944ddb93dd7fa8b1455c88fe8ca3f17e93994cc5d602f0dd6847fb2f93abaf1e3c886fbcac580628bcbd8536271a28eae2972054b14e6c93a0491f9ea0eda5112ea42ef51c7a97c9a85af8154e05145406ef2ef2fb96b70728e0bd38d206ec19fadaa42503fb50ef32579bb4b250924a11a39d93ed9805a4ba6fa3a119e2dfc77811e7c98bd31d98a335e1b73fc361ebf08dc32fd7bf25398ca68a80433977496b1eb71d4492045c320851f46361f8f27573484ccf289321b7d86ba1ae5b711985528481b71860d48a9d6c6d9fd29a9f8be3c90ccdb232b2453e5edab1f4711094ee5d3636ca67e23d7695c14cb9a0e5752fd5227769d2a99bff5cb252388b55c769f3acbad022109bc7a68b167c2b84c9f4bde8cf457df6bf76dad58417ababeca7879825</script></div><script src="/lib/blog-encrypt.js"></script><link href="/css/blog-encrypt.css" rel="stylesheet" type="text/css">]]></content>
    
    <summary type="html">
    
      无权限访问，仅提供VIP用户学习阅读.
    
    </summary>
    
    
      <category term="VIP培训" scheme="https://www.rootfw.com/categories/VIP%E5%9F%B9%E8%AE%AD/"/>
    
      <category term="文章" scheme="https://www.rootfw.com/categories/VIP%E5%9F%B9%E8%AE%AD/%E6%96%87%E7%AB%A0/"/>
    
    
      <category term="v2ray" scheme="https://www.rootfw.com/tags/v2ray/"/>
    
      <category term="vip" scheme="https://www.rootfw.com/tags/vip/"/>
    
  </entry>
  
  <entry>
    <title>VIP培训课程</title>
    <link href="https://www.rootfw.com/posts/4b7bc44c.html"/>
    <id>https://www.rootfw.com/posts/4b7bc44c.html</id>
    <published>2020-07-22T06:56:56.000Z</published>
    <updated>2020-08-15T13:59:54.043Z</updated>
    
    <content type="html"><![CDATA[<div class="notification is-info"><p>精品课程开课了：欢迎报名，多年实战沉淀跨平台，梯子源码解剖·一键脚本如何写·多服务器中转·匿名IP·linux实战·跨平台实战一针见血开启您的学术世界。本课程内容不在任何平台公开教学，同学们快来吧！<br>感谢大家的支持，原频道Hasan W已经删除不在更新视频，新频道大家可以在YouTube自己搜索关键字comebey 或者 [点击关注]</p></div><a id="more"></a><h2 id="课程目录"><a href="#课程目录" class="headerlink" title="课程目录"></a>课程目录</h2><h3 id="开门见山"><a href="#开门见山" class="headerlink" title="开门见山"></a>开门见山</h3><p>多年实战横跨多平台沉淀，前后端，大数据等等！曾走过数不清的弯路，开发过主流某<code>知名</code>源码架构。因为某些核心点网络上基本学不到，必须不断实践总结的经验，那绝对不是任何平台能轻易学到的知识点。如果你真想学点有用的知识，方可报名。</p><h3 id="初级公开课程"><a href="#初级公开课程" class="headerlink" title="初级公开课程"></a>初级公开课程</h3><p>1.所有目前主流FQ开源部署，源码基础分析<br>2.各种服务器初级流量中转开源部署<br>3.各种机场模板介绍及基本部署<br>4.各种前端后端等等及习惯网络知识</p><p>所有视频我会上传YouTube，从最基础的学起，涵盖所有目前YouTube主流各类FQ原生部署方法，各种网站及博客部署等等网络知识，大家想学什么，可以给我提建议或者意见。包括一些基础的实操。我不想和大家灌输太多没用的理论，我也不想像其他UP主说相声一样，真正实操起来懂的真的没几个懂。youtube讲FQ的圈不大。YouTube缺少真正能把翻墙代码讲清楚讲透的人。从来不缺视频内容搬运，和二次创新。随便找个别人写的博客内容，拼拼凑凑。就开始录视频。最起码的版权是什么都不知道，一个不懂尊重原创作者的up不值得尊重！甚至很多朋友看了其他某些UP讲的视频来问我，说实话我感到很悲哀，如果他们解决不要你的问题，为什么要执着去学他们方法？因为有些视频内容就有误导性。但是反而大家就是喜欢看热闹。并不是点击高的视频内容一定优质，好的视频内容，建立在原创的基础，视频内容发布出来是能马上能解决你问题的，<code>一针见血</code>当然这和个人学习能力也有一定关系。那么在这初级阶段，我讲的每一期视频，只要你用心学习，哪怕多看几遍。我保证很快你能学以致用，且融会贯通。当然大家请支持任何原创视频。<code>公开电报群一个</code></p><h3 id="中级收费课程"><a href="#中级收费课程" class="headerlink" title="中级收费课程"></a>中级收费课程</h3><p>1.主流FQ原生部署中级培训，深入分析源码及功能实现，及相关理论知识。如果基础的理论知识不清楚，就输在起跑线了。<br>2.服务器中转核心知识点，服务器及多服务器延迟测试及基础知识点。相信我中转并不是那么的简单，当特殊人群需要特殊服务器做跳板去特殊地方匿名IP会开启你学术之旅。<br>3.因为特殊原因其他培训内容均不在博客中详细简介</p><p>课程针对真正想学知识，尊重知识的人，主要是大家遇到各种问题以后自己就能解决，培养自己有这种能力。大部分遇到的问题我都会让你自己亲手学会。linux系统各个版本从基础代码学起，结合到各种FQ服务，看懂核心代码真正的含义及基础功能添加，优化自己独一无二脚本。只有看懂了代码，自己知道如何优化，基本上你再去搭建任何翻墙服务是非常轻松的。包括其他等等系列课程<code>中级交流群一个</code>排除一些广告发布商进群。这也是我老群的教训。 费用366为期一年，每天一块钱</p><h3 id="高级收费课程"><a href="#高级收费课程" class="headerlink" title="高级收费课程"></a>高级收费课程</h3><p>主要针对想通过这个行业想变现盈利的朋友，各种FQ脚本深入优化，记住是深入优化，或二次开发。如何写自己的一键脚本。外贸公司中大型穿墙网络代码部署，外网访问各种功能纯代码配置等。搭建机场高级进阶，各种服务器深入学习中转，机场网站前端代码优化，后端功能添加。前端web css。网站安全维护等其他核心知识要点。<code>因为特殊原因其他培训内容均不在博客中详细简介</code> <code>高级交流群一个</code> 费用3685为期一年</p><h3 id="一对一课程"><a href="#一对一课程" class="headerlink" title="一对一课程"></a>一对一课程</h3><p>针对内心有迫切学习的欲望，尊重知识尊重版权的人。远程或直播亲自教学，一个礼拜脱变之路。课程不在此公布。费用5680，添加本人私人联系方式。笨鸟先飞！一个礼拜后可进高级交流群</p><p>所有报名截止到每年9月1号，在一年课程中所有学员中，我会选几名悟性高的学生一起和我共同开发项目。所有报名的同学请保持互相尊重谦虚的良好美德去学习。知识无价，请您尊重！也请您尊重知识产权！</p><p>以上所有视频为comebey原创视频版权所有。收费课程按需求选择购买，收费课程为本人多年实战总结的金品课。`</p>]]></content>
    
    <summary type="html">
    
      &lt;div class=&quot;notification is-info&quot;&gt;
&lt;p&gt;精品课程开课了：欢迎报名，多年实战沉淀跨平台，梯子源码解剖·一键脚本如何写·多服务器中转·匿名IP·linux实战·跨平台实战一针见血开启您的学术世界。本课程内容不在任何平台公开教学，同学们快来吧！&lt;br&gt;感谢大家的支持，原频道Hasan W已经删除不在更新视频，新频道大家可以在YouTube自己搜索关键字comebey 或者 [点击关注]&lt;/p&gt;
&lt;/div&gt;
    
    </summary>
    
    
      <category term="VIP培训" scheme="https://www.rootfw.com/categories/VIP%E5%9F%B9%E8%AE%AD/"/>
    
      <category term="文章" scheme="https://www.rootfw.com/categories/VIP%E5%9F%B9%E8%AE%AD/%E6%96%87%E7%AB%A0/"/>
    
    
      <category term="VIP" scheme="https://www.rootfw.com/tags/VIP/"/>
    
  </entry>
  
  <entry>
    <title>服务器之间延迟测试qperf</title>
    <link href="https://www.rootfw.com/posts/70b5ad4f.html"/>
    <id>https://www.rootfw.com/posts/70b5ad4f.html</id>
    <published>2020-07-08T05:58:05.000Z</published>
    <updated>2020-08-19T09:00:05.175Z</updated>
    
    <content type="html"><![CDATA[<div id="hexo-blog-encrypt" data-wpm="文章已进行加密，需要密码才能继续阅读." data-whm="无效的密码。请检查并重试.">  <div class="hbe-input-container">  <input type="password" id="hbePass" placeholder="" />    <label for="hbePass">请输入访问密码.</label>    <div class="bottom-line"></div>  </div>  <script id="hbeData" type="hbeData" data-hmacdigest="50dcbe98f13c3325c0756d34ee22d1189c0e7dfc8300b39f654c537776f2a701">dece3ec1f024bad0105a2e28cae8795b7268a3ac0d0685b7cd0b53309bf2a59bd61458a44b8e5996b2d0422f1ea3f849c6ab9b3707e9a17fa1d5ae64c9b5126485f5d355b562af077c13fa4f6a01ac2d1e8a78b4fd606fa41c54232fd2ad1cd98eb7ea213c3cfb5df460704de6d483c0df4c04222c0d95440a9f23d2a521f1e44e802dbb71ee5cbaf4c320803e6c0f7bfcb0a91bee7fad8ecef8ad320990997c03df03ef5e9c6b97ca9bdd2de529f0d2c1b8d7424cbf1fe02144b4b2b7f572d6e83dd68ba92345dd79db5d497c1687dea6ad04a003e4ed0df564c8e2b9008f0a866493f4da1e9f8be44abd0ba6b578506f53f0772e8f1532b0d9a19b1290a10a96dff05cac5a54b7a8a59f8eabcb57641ad2967da8b552d910af9b80b6f4ea853cd37376f96464c74a6be6eb805e465e5b7d62b7bf59c925d7c2cd358266a8d05223df9648ecc93d9cd4bcecd14a01f449dd6c75a04b834312c63280fbe414eec455168b9014ccdfd07e5908fc19766babb83d26e02903028fad4031e0a66e975a41dd09b4d74e7a328f02165899d7888f612e65ec8b440de867d0136a04fa6a25a8cdec75cb896206391b184cafdc2953231a8e955cb88c0f03ad19130aa2943bb8dfa4a1c1e1fae373a6fcdd7d1d460323fc17b0c519819bcfe4b31e0e4cf8ab34f4b697edd564e06ecfa57b407035fbb8a33280c0b8a6dc37471a52ae206c93bad61639a2cf5c1b1cef7de991c03887af03925f76554e2a44b6396890af7b6667bb9b0710304362a573c6e96029fcd94be6100d155b6cd0fc993f06295864786e9f4f9c816b7672ea82d407c3b1712e5a86f0c1c568dfe036ebba9e6e6f80fce88570aacc9bb18499be4635cc74eb36830b6dfff656980445b92c5646a2d5b3cb70a3d81df3b58f9617ed554023cf3658ed8a5b26a7a32d47f057c15bb4a7ff7dad13a902c51c15170cdd9dc2c5510ae97fe76cdb5e54ac74ec5415dbec79db3f5ca67ef05393f188531a14c13b81f08b4707e81fd86496b1f566463f852f8c186781e7163f5988b9c1eeeb8331b716283c4163889ca0f183da083a2ded08772b4966e7a43a574d46d6ff1c9e297dc10033f27fc33d57ccbd083fadd2f337bbbc4dc1525099a919b8cbf3b5e21c4aad9fe5e4e0309c66c688559599ce0d20eacb7cac3ab948b74ea0fa8fac9895a8ad85b1b4211f1a02f8f0b070872fcb75077de02fa0bb398768a3c42f582c33e2f4121ed4d5a78e53e8154b4ad5c807c54d691edb283bdb90a9d4b55fb48f0756a0ccf4df17ea525b5cc42470510008506c99214a4a9e70f6210cb44bc72d29c0e7645b5115d1289fcd382b157f15caeac147178fcdd8cb5e68da0e7fc3554ea4260d19c98c74df8a3b39f9abb1c4af20c936b252508c175b280ab16f4582738d6e1a916ad291453da7bc892266bdc94542e6eb552ab41c382875ffc330dae3be765044fdc1dee8e60c87489a19b1dc526030fb01adf60659d5f6dd472a663183bf8fd23d4577df34a7b6407395ed76ca1cd7ba7327fa663e332a907968458653cbb5aa3ce514689e25ffe6d87cd8dd45ee69dce93ae5952e4313892c97ca61905e49fce8d3792bd6fe64723dc0be3777558f5715073840129d4c46cc8de3651729eb8d7d34fd517be0f725059dcf33f13acfd7adb4341527cdebd32dd05e1b72a56635840f174ad4eb80cefa9cb0e9c4613936f369df20dac8fcb139ae7096c923fb14dd7524ea626771957a38c7a660c14cfaf0e16d59b02ab8d4442ebc3636fd1ec916e4e8d1e618484a8de4f170a87eb1110f1909a28fca916acc55d897da08a61f9707538add050828ccdf061fd06bf73656504ab0f5c878834c010c30ead30b9231bdb589d579eaa152b95233bb53b6e5bd375a316814e0038d36c3732994aed15f71b6c5fd1df3370af620dc46d07f62d6558530d4cec08f319070706b6c280e785fcfc716ecb7ee942af1f1e8167ebfd27233305fc8114f2874198fa8c55f384253b8117e3678212d8b6054205e9db9c53729b631cdebcd6602733b1830b6ed79f62552ed6f3afe5691cda5eb8ed4f598c76fc3f78b1e7e8cc3192470f1ba730d949cc40e2b9d856a217b884b7789c067ca6d723c596a5879f86860b17476dd1ed191083bf1839272ec0f38469d84f61f0c9034a69833583c1f78fe36c9f776cb85db47e88e70ef9072c7351e4d120e3e38d4e8d38a0af7925ef73a89cb452e905ee13c4e966e902cc977d01ffbf81d27e91ca508997ccf39f2a977a2e0363395ef0e1a1fb4a48bcec90939b556c7e1ca84c3b33e4f607bb1783cc2b2379a7dda34843fbec8873509fc4ece175c7b169ab9c8e0dbd65174523cd34b303e8602602188613d93f1c26a08be6027a47ce093a7cf10e9ff6e1005ba0b7a9a244bc6466ff7442b3392e64f92a7865043fdb8c1dd6068606af6b82150ddc35f29605acf610c17fb0b4b563c3792be8d37e4e5e1281bc018a09f537a2df10dbc5ddd5e01e02ee723f757844a7664369ae5b427bb6e8850a92aa7a9020557d7c229759a41dce2041b2865fcadddcaf39bd132fb852803afe619cd746fe18d29718d4126f2fc455b50c29ae972af52f58502d2041bf50a7955c1df6aef65fade66a56d0aea36fd1a9e1668f636f0e5d13d905318facf84a15121a9ac23ebbcc896213179b35fcfa903faa37c615dfb11d15ff7c71f7472e41a172647e94a67c3a56432201952ea0be0ac45ed6c11aca34ed7eb95f83bfa185cbd407227f47749d193c22afb29c0bb1cd3041dc54e677856e22842855ab48607e5e71cc897da2f11a2755192845a5aedc82e4aae6a054cd1e0993690bb80ecf44e76b284f1775f458ae02f3e77f58af14a3493b8d8d6c42015abe39e68721bd0f244154aeb87363e6102da40e4275edde426021a1576522342451d3d7ad8cac7bc0818cf47258e0b042371db1719d8050d2422bb90eeaca11fe467112cf2a530479b666b21c8458833e1cfae28d010a415579e6883bfd5747a8927458822745348d99dd5712716d6347e72bc3ea32579fc68ce3ca5126bbfa320016c210c53e3c3b6e9f4904303656273efeebb95d47a1f1ce17636ceef6cfeba0347d3946c032c981e4271a1ed3bbee16224483cbab677ecfca763adff5e85df1f5893185c037369b4f72355363bec018b6761a239d0164c7952ef1c186c44c50b8ca6b3c8d372a83b34c6571928643a560955c18d0167e478fe54cf209678b3965bd3c74018c6d49dee5d5c54eb0944c14c6b5f2504c1bb18a7778a2fac5ba639f38c8eeaf00b46826a201e290b2b1b2e2494d5239a4d4a6431c799fc90fa2a20f9b6c5579b3d9bffd6ff18ab533d9e6827da127e5ad820e35370125f07cda4783a8f4ba1a02013c076a89ef1f515825e0a3362cc916a936f293a595252aeab29f756fb7752089746db99d0dfe0f1b2ab78a014c34977252b0270948a610216203818ce4561050f12a56f6ab571b6a2c1b90eee4895667055c585d43e0ecd9cfa3e925650f83eb0bc8d650edadd4a416d847ece61b1155da8c52773238ac90dd04846789bdcb868e3e75b35debf1601444ba9d164960d0a000539270307063a7ae0b8da9459ce862ff021032b099d636640b1d81294149e6f777d21bcd46d6324457303acc768e07ce64334ac935ddc18d036f0a05648bb2e4e7957a7e3c2e629b61eec3ee80c1151522083ba219e7e6205afd428d160df4b3bc5eece9bb24fe542395212983ab7896800823abb6167720528ac316a50147b14c2c3d6178f0fdc5a1634ae9f717a613f2395457064a897ee79a7b969259f7ef6fc50292c6c8b687f3ee9798f6118822374b435c611f8a8c6f75784863326b49b388ed93b2bebb8a0187405887c131e51831c49daafeb4ad62ac2dce69809ed2309f8c254c6921e11e59d5dfa2bd1640489457d8271383c947434d83789f4005312b0a1545b2c24aa687c9f653aed2800458664b166a0dc1c19c62a34f970ab07c111ad9dff6e59f2e0eb09a6fed313cc0b5fdea60c9feffafbc7bf3e3d482de6ff4c2727aa0cbd20f84f11062aa9a9beac39bdaa906b02c32351cc6453ea7851fdb845825aa4b166dc04485fd2a490301d4d659b1916c9b7b3286c251613a1bc6cab788f0a217ce8c6951c856b3fe2905a289023a0186de91d105e09aab4c33397126b238d8e0b35a990e0d9efb55c8a29743725a1e483bad91c4b436c555be0d4f2c39bcd754045b6ffd4623b81e67dd217f1a34804930143310a21726669975c79f157e729ef3589c3284593e2f46db8e2d36a9dacd56cdd559fed5772f11530e4304b3b5ad24801a67b8ad778b181ab17473049ee9530054c69167111083281030f911680175bad86e2edef37d8b117fdae4dd2cdbdfccd0ed2f3cedb55265ea934d7df7f4932788c463b74fcd826f8f234ed4849e404b42843dd6f14574cf09e399b483876f997fec738412872a4cb691ac3b79e54e4ac3eaf673c13b58c7d20eccbb4a4f6a1dc27bbfc16d11d91878fd9c60bd571ea690196905f6c9d8d32d9bead0e083a3d03ac1443d2d05eb4cbf93291647ce4b15643a89205852dfab2cfffc1fcb3ffa363abe7f39c186e0003e1fecc4b4d885339174b67e15896ba792f3c3bb17f3bc71f8778cecff4f22e8bc86e6de24e5ade8d860b57c25321e7fdbb88d18ec53f19ae589dc42474bc254f83e47451456cdbf6885d775711605fca910c20d41521909b2093488c2b89c1fedc009c771562b1b7ba76aee825e1c343ee9659fe29badb9c5527121984132a5d65130de611ea77f07ef86c6837bb65441ee4d584e3bf1c1aeba6b8acd02367ed0cdf21b91b933aa1f7d7e6a0190670d46d1bdb956b4f19fc8ef1e05c217d8bcb2eae1382a3520169e0f4d111da5a9054ad835e6aac00be23b9eafb2d9a360f30cf1625fb6675c174ff83d6bd92474d360b997e1f16c85cea7d495da1805b84a01e8b35cecd878964628f11aa6785a6c9c14c77e920e73d3d7e9953bbbe359f4c785a52c4ed71ef9b2c7e1108ef33c2ec1d46fdf86fcd926e15c373f0024379a7a2e70073bae0cd6579e44cc513d7d3aa35c85c9169c5afbbf38061cfd6ab50a5eee575c9ad31cbac8fe8100fe9663edb0182ea423a727e540512a8139da64defa66106d41f0edccdceeb6cd81861c91923f598b8e68b71dcd08ab93abf08684644f367a3f41306927df2da0d55d8bde75bbd927a13112addfd2e94448c25d64b5a7a03c38dca8515e38585481e9e6c38a46fee13e6c4601b81cfc49a6de55e756b9066a5bbfb5d187fe60f4d61e252df0f437a7a506615fae9733701f8d7226e64eee0fa3b3b94777d58c10844e86a5ed65edaa1827ce014decd81151ff95588df955d687b009e65ebbf34139b0fccb7736e3e5d1d419ad4d7624ec75096a36ed296cc128fa259809a3b8402f117109c874be1ec0a2efbc29fc1553dc1218536cfb27d38eb9fd84b41473ead8e57eb19776595e60afd9047776cee197230b7b04ee8ddb687aa97a3783bccfb710b73a64c1a283b0802afaddebd309aafb483325fe8a4c216b04c1fb860124633a7eca41bdcee50b6a5118bf609d2e5ed261ccc82f85dd7ad7f93c1858a9e916b1f47c03a1212b5a0e0013224f26d2cc37efb5e0de603f65fb872e72830e90e9a4021f4b33bd95bd4f048cb501e6fb140b974359fca633d2625015e361a8bdeed3838d53b1c05f5a01d49a55ab8c8a9dcab427f58dbc16c0d366a70dd0c0f18f4db4bc1d3a76c636e62706d8ee6af576353138025ea2688515e27262dc838d94a7e6b371c8857ec56f71d5ec544569ab9f60897dd472837ff9c88f1225d04dcefef7c3848c39d2313dfaad429f5392639cede92985505d8e89ff9e542d47f0c4c148e5ed3612cec925b52c78b0289202b28ccbb398dcf4ee268561f20988b0634e507e6a417f7269f3365ee7c5556be39ab8948e0a03f81ac77fca2e1c4c3ed47a27507d3c15a185cd2bbb084eeafb0061ea8a5de606eea8034dc1ab3af8c4ee1552719344ff3cdd4b2e77e02f2c4da19f253c645e7f0c5ac6706c58d35a17c514531d4f7d5291b8b7e977390eb6373e034c020fc266c0d839920e03aae0d3e364569c85a4ec0e31a9254681f121c2309d175d51435538acc09f4999773a37ec468864254cb84cd1e75202967153b51d2ca61bf1bf01040fa57811455baf94eed1eb768f57bf68993856f1f42c830ba0013fe934b75a9ba434000252552e555690e126aadd037b4b6939d9f56ae63774e6c6fbde243daddd45ea9dbd0e85d1d3afcb32c417c9e142f47ef64f4df75584b59a902a5d4a89c982ecf40d02df018157760fc42829177f50f7dd1ed027ffffadfb1ecb8f3b15a55d610b02df1950161a5217d8182de17ed1d7d505ae54fab25888e7fcd8c3195cec1d3f74f587a617f3a7e2167b213990352cdcb1ee33ae3ba2e9e8d25c08aa5b71111726cdb0192fe259bad6be6e725c07382ad87645e5f77e16378b969c9d713f8c33e57e6110c943fd1eb38822f85eb387a5a6939912edaea267cc26eba79afac940790c04c2d1d62e0d6e5ed987f5eacb15bad6fff975363f1aaf78297659d74ee0a73f92336531283c9a61190cfe96df0a6844e282c588094265bebe9b0da5441b73e680a3728f1fb3723d7aae0c842b2b524f0f2b517022bcc99d082a3312bb619db5ce03741a9e9a7cdd05efd3447bc56fdc3ba3cd678a1eea1e2c0e544785dc67c57a86051239dd215044bfbb75db3b9f890ed9d984d35e5c12b4ad79a71251cc64d36f0cc05ad1ad2bcac89451ef67d29ac49f46ff7e6f397bdb38f6c9f00af0993c216a73b3ce9cbd0a28a7b38dc7da9a8d76890bd64f49b39ce720dbffefe6ec778162ce403ebb5806098f2dc1c359d5babab1a616ab5a7f96947d359b1972cfce1212c98acccd1e23b8b8280cc168246b2713a25fdc860f4df6aedfeeeecc71f32fb0114f285ab6b97e64113aa54ddeb9b16974e2c4828e97d06c580b0853110d43804033c110b92fbc0d970c4e7522402093ffd1a33aac782c1ec06307c3c6cd2a31a0234b4c0d640af18ce196f5f87960d1ffa52b292a534c242430efd08236d524313e79426ffaa855367a2551de774d6c58d585f129249d7c3d225cbd93ab8068de43aeb142c12afd7291bec7b94cad56bf8f489ca0aee20d433ab69b95bca58b76d5cda5357f7ca2e2a3932b694a0ae3554c7fdd3a486102057d6aee4f038e397aa12fae2beb4a55cd3c58865b967b5cd8bacacfffefa2729ec431e406eed99b3becab93c962ef651ee762dff4822ffdb8b3e070c0290f3b3bbe9c2afa230e08a70738a17be3eae305d70da5b32057622dc197535db36789bb6eaeb8c39e82e24594f539c7122c78b8ce7d4834bac5ed6af9e71581bbb5470aaf68584a32fcc43c5751733bf9d2a0d83c7f5f97525f5f58b90081de62e6845c7812409e088fd66be142b01cb32335de4e68464cab93a0c952d3fa8c6b83cde03b36fcf954f76faab66e173deeae3a9e51e29795179441e5ef1861e24588b814b595cd23650be6664105f33bd0f45489df500b62b5ff160bc9a969839c19389ebd4c710f3f4f8f3b93e02006f58a57651b1fbddba4f8e2e67ded1821771106922e058a42618226da39b81a71c840ba039ee1527e98917dcbf534f92a5cc04ba37742bdfc7bd186bd6c549018270a6e1cf591b7f62594b45c9990d662f93b58d20d655204dea0752e41e76c16ee41964b08aec4f0e90687c4455edef45dd602d0ea18b803e11c35567089ee20dbd93a763039a9bfc99e6a29e7f2b3946526fc53d55324074f4908805fcb6e05ad1761b1723d026f8999dbe6ad36f64e8c9703418fdecd1381d71c64a5b6890ac5064a68e4ff3ee8b2e76dbd04883f4c7d27f14dd904d3f6c3544ab61458dd5bcf01a0bfcb2299a036427dbd943f109e11f337feacae43a2eab47f09223738014dc6047dac70678366e5a3e6677ca1a536c4207b5f48327d5468fd9b4f1a27234b0cbe7229b7f8450d2dc9d047a41c9dd172ec2cdd95f23cf88b5891fb4a0ccd6a61bb2432f5a50ba42f8ca6c290d6bee5c0470dbf4ace7a82876c390bcaaa0f123554f44194b2c0c70a8d2947531cbce30b75ca5b645fb147776a88171ff42bcf14e18a05ea2e77157787effbaaa2f7c3f19f92e2f1dd2ae4801ed7cf7fccd4cbbea7a0b646f6a129f03e642f5e21452926213bbf523a05ad15e6fc27ff333cfe66e3a20835bcc357d20cddf8f7828e11d09273781a440dbc0a9198b70bc9b042ffe1ed1f22db7984b27a0653c6ba02a8fe69ee88e20a7536eb5e1766ae9a152dbc9f0923e8abd4222e44281e152ba8be526006684276bb90fdb8df8979767bee3840692e2e3ddf1631000e3fae82f93c82c3ed8637906288cd89788623d8ccaa22e1ca3c7c1861cfa2a8bb24bbf66cb4866274c048703c08daa17b50a7749e07c9a4f6a6d38cfa00b0c963dddcfb975f6e66a28aff9bd6f15166cace7325520121a8914ed4cdfd88f0b2986b2285b4e55c7f98f5382cec7eb294910c2b1f2c1b0de72a9bce8decb67b973d6b2c32f29d1b482aeba3338a8131196857418612611fbe2077a87c7e3c4559ef0ee67c7ad6857d56686d6445f99ac6f1b19c93d78372535f491ecd16375f77421234ce7fad5d62d65703422afc03a113d8ec16f423a95d8f3d69ad3742f54adb83d15cdcf2c51d22cee3b6fa410e5a9832b1f625b066d96b364e7bb6974c0f92de159992a1424b9e9aec8bd8bc7ed6ceff557721c49b1269fa7a96d5295cf239a0508b18f72881632fe4c3c6f230a6ec911d3a9b35e0e2ec3e33eef461d0d7f2a8cdb6f42656ba6b24fcc8bff4549b78f2111d2cdf22c5195d5dcbd14010d4690f96f7bb0aa34aa278a61b3bd2e264b472f701a1ac64abec6369b7b4ab1ab29864e326e5e4623868f351c4b8c725a411bc167f2de43ceaa5229f143f4543f4bffe7b70475bfb05e08d54cd35e5fbac5221078fa81a870b4f1f6bc49b6e04b1b8f6934ea4f0b91f330ebcff68197d4f0dba6fc804f8cdf0a4f6c61f9b3054700b05b69af1d3ecbcb38eb133a5fa1c0d668553ad1eb34060a5e2220cea58e57a584ab5c700cccf55f22cf985d23adee28fd0fd451e77487fd0b2e9aa438ada8da01d121ce93ded51f082486318b1fd686e56e0a05f2d1c22b2804f95537d77cd1320060e07c731dbe5b4b46e0177be848a7b6bce71cb8fab37d679b332edb75bcf49441cb355ceadecb636c8b966e0737e1f867c212a87932d073316c722b9937739c8a694a01434f94340586cb25e1bb55f2057aa1b4f0e033e7716b727380ec5fac4b357ac482181dff9592564e160fbd6fd9b88d64fd65d3a8349c773781ae86b8f0afd9d7a271f03ab062f176b673896b4393e1b1fe102dd037b1186167a1cac345cf29e820adf82c1d6c4c0be832e4c86d9bdfcaa870a4a09c29840b34c3159bb91b829faf22e488a3c28669e9bad854925508faa0bcdd00e69f95a7f5dceca85b70860d9463b8b2190d06935bcef6b64fc8953b517baa24152c08f1e47960edda33ecff59db2d55ab12816ea33bc0fcbfb87844efe49be4734d3c090c2c7a7f2852d4d3e4614c87e0161e33d3366fd3f23fb891e6de4138270a3f8f83bea04194a8eb5a43f660137d1a01be8ca4db366bb35e39f2f62476bf26d5a84adc947575b5cce68b508d3ec1abcaf2a67b36722695e93d6ef12b26dabbb55db8f7002e2a275fc052ef287cd77045780e716e63149d0c8723f6e6e7dc4f5949cf8e9cb8c7cea11b4c0b5018dfa5bda26ed7b5d11aeb11fc0fe8120ffe6d19c8072d900c3758294c6a3475d7b42e91befb6c752104ecdbd434c182ce4b995ef0f560bb2d1d2ac90e584ee7feb8f7ceb6f280477fecc5e0d16babeb5a503475a9a8f13322e2980d36b3d95712a87dc9d336108706a389d15e2a3f15174393f5c56e287d7a0685e517bde4dc8bff75e07904b3a7e6f887a675e0b170357d0a07312428c9c7bfc4fa4399d444b2bbef5e6e76c401badb713eb8974925bfbb3ca4810d92026f474fd7f13f67cd0cab142a1cbf8cd6c163dd8f3b910526d55c640922cec9722621a106ab829425342966af4cda22f1a16f6ae9ba81193d2b98ea8965d8bea501fe83bad21a79d1bde03a641ca4087db20c8cbfcf79323611e8e0ee9af31c96250dcee6faa842bb54fcef61a9f6778232f40a973e6e13a38a21b3d3c07b67b662c3b7d44123ce42ada9507e8ec70273176589d1519a2f1e5cb85669f164c22fd881225c3df90f70bfe613c74a7592e20d97802986879ee6503a7659d6972e8603449bf3bce8b9e1f98dfb0201099be1e89546a29f991a871e55858b48448e82796966a0ecb43163715f3d01697a4149cff9341b00ca3b64dc108e60c0da444e90629b4c6510d731445026c51e7671a37e630de6eca9b00561a889fac4e4f803c781252c3f2b0891c8f3950a3e639d4474efcd596a26e0f624dd11144a485576303ae65f9ca149a964550b9e05817ee2731d6a04814b41473b62ef89ea7590fedbf7e754bf190a25a60dc4e2e9b386ac2980e2bec5a531886891c749d99d9e4508892d7766073b55962d97920ef5c9a60ee2966cb41ddebb4bf68fd9b50d0a92fdeb681660c7ae62de0d8fb233372df95db278ff72cb789f64b9f4a3b336e81c7cd2d0b8e320dcbd2e6706bdb02fa512649df00091f89024a1755a95ed8279028e30b20a55033f32ccf511512a83511515231aea45737e5387e6d3827d81e33e2cdd4042e49cfdad87c69063e058692cf8e5eecd1db6043a02e8b7808ab04536939558cb60c2e25c1570d4774dcc567463b609a312fdf12d67ac1e7b613b6b15e643cb6bcf3ac2afa6ae0a961ff2c7e1d4c953b8a3fcddbed2208cf21a84d4302d485206d9baf3ea42f29f20eb10365f09d792614150b75a0766ce4fe992bb983c92d9df897affc79074ecb006f25b5450d083f3e396b5cd72d46d11b13e27a8783ccfb294a9ce9805698be8a4f9f27e6f44a2d5ad3e6ae09a14c0cdd9a6090bc51ab65abea48694ecd635717abb1346946cf3e6c3e07c7aa9711a553b1bc951c5d4e3a00e7025fb528a0991a3173783e72224e50967c064e0f63db5391c8c12bad5cca5e634f330b475d3f9d305bbdf01bb9a2a525d6cbb80e6b08b8509970a5526fcf884dd7c8aec316f367cad9f82e07070d0b461cb1fb727eb3cb9c27a82d2a16efb76c3b808bad6196169dea21e1ab7142aade8427dc4580df5b12fbc5f32ef1c9b76ca5d3c55537ebd50b25174524abf7124ea3becdfdb3c307719fba8f3717f19ddec050701733611e88fcd5b70896d1130168b3b10f636124bebbebac99ec527aeb0d3aa88e04b1b8076fc6d1b9593cfce978ad5e3c9fa73f4c69d95cf3c9e12146b0edc85f956faa3e7b6a9774fe3c6899566e1626d81c01975c4d63d9bef72c102521527998df1fffcb077fdd7a39ad5011c90a9d2675623443e22ccaa535ad56f7b64fdf4fc50e6f8d169cb2327022a6bf6b21c16b0176fc2bd4e50fb68472c2526cddbfea940d8ad340cb3ea09b254cddd7c24cca746a0f6e5c026165bbe7f752fbdaae7360aa2ab1ba9a7a83517ba158f2b54835d3f41bcaae7c204d8b9ced7151df2e78d50028a9770aa52b47412a9ae3421ebd1264090d6f5d36df3a0d92cc3a520cc7d2eb385dc0fe958d3115c43459874f741966fb4dc33089e2eff5c7b282c029b046ac39fb473c535dd6d201725fc5a1d80a848fa42bb87f56a3968072bc29cb78ebd269474f860090f584ffd8f454364a2cacf414a3decbf8bd562e1ab50b33eb4ba7d7d779063e46ee9b668fb11eca406063120a63dfc4fd5cd940d2e69b04e1cf96371578be412a6f11be5d72c16c17bac782b2dbef5ef2425ee56bf605a3bcde40ea0c5cf6c274ebca29579f6486d553328518d21d159883b64c6c2117eb9c9602b30e342f416f3864417288713fea438e0092f8d46574fd83530c139226631047abec5186ab5eedabd304f93e40e9bd34a7402d5c826454978e4af7c68a4e4f88d77498d92a5b4c765fd1e4ce61b445c6f6b7ef7e756d35b833fdebf528b98cd52987fc8166dc4c6c21672dc2c9946636a20a3bb7f10c30d5f7abe81da6ce6aa957fb4fc0f1d134bd42c308e3dc659693d0d2c32de8dbce2b95dfdfabb70e7a948c60fd99c7a2d56da2b86a32a255db6b01d6726eba53e80c05318ee9360625e5ddaba1a8164d2783f76227627d1df6d6a40bf109190b0bb6f0722fd992e7826d135e0bb2a812c47e72b564245691e4063fbf0f06b62c01179550fc9b8287a9904291df5f2958df362ff066bfcb6c8c968b60f21824bb8be4d02ddd3e2a195fda28f3be60dce55451a2d9da6dd67fa63086f633675d64d83c5dfdabe30041deb0ab8a96d58adb6e14b61d93aa14fdc004070ddc154de3cc8613de54b2127ddd22ef5cdf323e2bff6ffac883050f4d81c3859d105d5e3272fa3590cef22d6746640f2518fa4de6f4765ea6e3dc31496e1323e3a7b47f83839c9af737d3164ff03ccd3ee8f3f80e26e80908e98635a806a00592383f95e99e0b810e9b23f91c910329a36f5c2cda6e5674cf4a5441a685988944f3d199ff719198f75f857c6b4138797bc751a2838677bc25080f2424a114f77777b4e93d17244dfa3cda3ad84e98e384b14e45ab2610887d56fa2dc2cc76bde09aea2486415c3108f13f0f1df2a05ac73d5b78b7864cf6e7b9c911c571cd1387c9f21950cbc91e52f62b3270cc1bb8847147bc432fd92cd680093412d1d8c27c8f647fde3a13860acfc0aea7e3a9841efbbd20573c9cc8f67106a45b534fcbdb067adbf03657e18676f6e21267e6e2a95222baccdb0649bae954d19c48e73c8352326b637863e47c10862ce44a25be043eaccfa0358c7209451a912e2f89600f979d7197d4d38e27a31aa6cf80b7027d29df104b4e2b8c2f1f3644fe7d7fecf2242f99d1b4923957bbb885d4e807da19d435019a1a902786fc9be9494ba8d04158280605807e81d005b13eff276df839933678c556c04fb069c7a7a65c01a620197968257c3d96c29c64994266580a250a5306d83349532fb339612c8cca6e400d7c72c555ae600bb93fa324c0e1b796bf9e8fcf4d3c1d8f759c9fd8c08df9721e89eb0407ae913ca923b82500b21ee4498c62029a93a07bfd323ef6560d91316e5633a655e3b86081e2d678f1f946aac189b10f882543492420c4e3ca1aa7b3f46b8ca0597c9ca0d2d7f891a1fb04eabdab42b21e6c611dee737069fed4abc5790077cadb0c8a522b11264bbcbae37ca85f787fc1842eae3488488532ffe45a551925323ba0c5bf4ef4942f5123379677a1847f42abc748e9fe55b226cd2d1b42ff98d800d08be386f0392087032f0366a126fb716db3decad1ff8294dc8f9106a394377a2eb6784be963d3e61ee69bbfa894b884f87387735bf0b624b49dcd75eac66fc14038cec6b81f37ed7e798f14d1541e254942938a8495b42a0883bc9b836c6aadd37bff89d636d0dc325befc9888afecdca26aea406054151fa3a09cc9cb84ffccbf40750dd22235b838c4ec1ede101ef80bc43fdeec5f8e649d04c6fb7cd0d089f3a97b4cb8cb6cf83ec983a071ddef633f40f7115982ea96f106f466f5955c2b5f660731a77673643e075ec78cf9ea163d71a22391dad78a416d1c0e786d839af8a63024e709bd454ea5eed2f280dcf33fcd7bc37bc34bea537fb79ceb35af09b2655a79d30be8165db1a36192399d07af462ee8eb8f83a9ceaa96388578ec33352488df531ea5bd8d7e177014ad21fa8ac21c4be59cc87b22a2e527908f14699c0e0935d3e25cceb022f2b9a7fc308eb5c7c76478d6c4d49591d1856a7d6ae365dfe586da50e94bcf136fe9758ac89fb820f716ec3a15d30be485c5216dda214efe1865183d5e33cf51d665af9637f98de137c0dbd846befd5de37bf9d73e74410ea9b9c95d149843bfca1ad98a65db832173f769eab6a263dd2404e230845990ffeecbb7481100866a82df9d1cbba9ef87ea7e305a3cf846aeb0177204924838262c54e0938073df97e177ac52a8ec287fac24896b3c55ac10f8c55c5b5d9804f4e7ff1dd0a0def821b5a21497e005982926ac3779c7e84c5a011cf001ffd9c5d37f9c80d0eda388b0fa30f8c7ebbe7a6b032d770668e5dcd89dc00dc7f14e59e0da5c15c7610ecc2aecadb4beedda6a307535469f5e43ca6ec0867b88824cb3b2964670c198415959220f1bdd3a9f3526cb098bf47307fca788cafe9fa696a8de5147398354daa69b30819e50752a34c8e0d1368bb4d276528134f2f5faddc1e1b34009c7233675a14fd011bb238e4d431c094f3d89085f914c2e34d6388799d112ce0dc6113b22b133de0385d2fc78dffb209a6a1f0dd50f9c6c652eeab7d1c5b5a004e230596aad8e409fdbf34c5ae5e9b1c72f458e7931e2a2542014422a78b0ab856d5dc6eb065487fe53229038f416ed1895b5c00e7346c843a4f48ff23713626c1c87c77bbb6fb9031552682a5a64b204aed951f4b316beeeb05d516fa85ceabe653a7e458e2c57c022c535adf6fe9a33a8d1b93bd34164bb5aa99f224e733765ec49ba5e4f2bcbc3bb5d2f296d166f91aeb15e2842651666110e877ba36fb2df2320f249b1e9b225bc073abacd3665551c7d47d74d7c8dacf8fcda29e44592a458e8bbc84c7c0c94e898999fa1f7d5b92d75544ae5858182a8867ea378909ec0719dbf33817efb018eb9e5e3b0723e50a5768ea597ceb521a59090e0974447363cec123ed5c0d317c065b34f95eb1236fa94e74dfd10f609daab25dd8edf12c31fdb24bc23d0c5f1d49cf6d939e2534172908ca23c290aff20c76f361f946020b82254941b333a723828fb26ee0a36e0cf8321cad67c5a9f0f4960a0cf9b9a7b53b3f424e8d1c025efcbc744a4f0ddc952193e6dd7774a6a262ac193211f066618587ceb62b85e6fc43529dffa4ffe80e140ae3b610c3e27e5bf641ddff16df2ac2e89818393e3d4d90a934ed2d1eaf77acaa057440af93814c488d03d523588e1ff4b40341b6e5935129cef30ff2ed3b0a1d3365facf016ce640c0a442fcf57741d9f79b98c44a8ba11152177dd09ce5d2fffd582e2cf0b0eaae2c0c25f18663a9bb2367fb4619b58fa8af41a8907719c530e5036bea5bdfaba601abf2d4f6fb7b5a93fe817e1847ee248d337c1211a42517e7fe619086b608cfc79b5193170aae556925457540eb520d8fb150d31ef7adc7e44054e247af9b71a01910416fbf0ea511dfbaee10686a7de9a05bc287ff8737235b214308018264ba4b05057920a4493211c2578eaa0e2e0d813d5979808cf64d275eaad1be43df84e453b89906d158b5e98ae3183c8f819b6cf791d751db3524a8c832437d22cb00a336b7712c492c14cf437997ce284e78d1207b6a660007e36913de5a53e4594f41110c3dcbfee3acddca28355a020ef35e4eef4ccc047b0ebfa8c5b3eea2e9cb0771b346e8e719d4fc1eb94911357ca8f8ad8d68cdf19c985c8063ca524eef6dbf735f062fb6f1f24dd4e606f01449fa0f9ea86a2919a40eca8b1109cac25ca305d9bbb8b4127ea0f1065a92451aca456dfffec93fc13a1fb1889ff5645e3fc5fdb06689650f84dba035185b6c7250ff9b4923a71c4f8730cc335604b9bec45ff99e3b838249114eb0e99c27829248684ea71337516602d0135c03075ae883b84c37e8779e1b4b933cf380741690d1a945ef78bf898d885aed8493e9c4dc37166ac04f9e9ef811407985f266ac630957e2a24ff76be3a3924be20031d790f67cfc94ca6912ce6336f3a48deaf9eca91a963cd30cfdcb666424057f56c75ef382fc1d38744ba0d514485a554d338241a72f3859d229cafc6fd0f295c9d09854623c9e101c46e83435bc5ac40091a1b5176191911b0419cf6db51d865f60f8179eeef117c8b5b9cfce5d8e212818153b16bb93ece059136fe978abcd6aa9a10f83b6b24df09910653cb4e9dda586329aa783592d90dbec4226627fb1c3a27b4f90002957bebc5f23ca16e6565f1d94ba5ea087fd1ca392b3f7d4f7505694177b536c9b25819ea3c6b7896f5ce2ff8125bdca6a91c198168a534fff28df38ba54d6e9609cdd5dced9a7588898e433c12a04acb70897ebddddac247e18ce6efce1445c8db0fa3ca31934f922d79b9bda998bccd23b4fd7f86d8027556b538383124a9ddf88db5ccbf351960b9b9928e20100d79c4d7ed9ab04efc2a32612baf2a913b68872ce8338d35c1c521525c830764688242862eb5f23320e9992608199976f471769c5e39bd83edb2f001b20930604a4e74bfc54589078363f472f6ff4f0c446731dd6b7d55c48ecc2a00a43e276ed457a28cff0063f0ca9493751b96dda1c40006959d830ac5113f641d7f0c6fa37dd7b6965907b8a97af86f43545bd5bf6c1fdceb603d120545c6daaea04296423b1fa14f84e1f0b4cddd66927f983fc31956c2ab7033e68c9a2ac0259a5483b6db6c4b1c8ac47139f34cc23ddfde448d7e8eea9dd84dff6e3411f96679987b48223458e3f53ef587ed14772c2b2a931db491c4e93baee4e64d6e5df17332f6ef34817ec2038aebef6d471afccdf07bf39a53d0569c5fb68871cca13d878c5ff939ea47cf3a5ba674da580a66740ee127b8c0959a855b9f1d4d251ba80d6a5409495e57b399edfa71254b5cd26c7d3290e1471aaeead35bc2043393b346dbe9500ec0a9ae940e080802c87628272c14fbac47d9c9cc6c7e9c089f663044f4fe28eff6b2fcb1034533250fc77e589527abc166aa9b9d1333ee922657982d9b45657ba92e5724ec94397902e47cdc72a6715f3f306bc96c6959f85a0064ed492b838eaefba790f47cce821f1babdae51e572ff610245f4cc274eeda32c81e9ce95ce8e2123f2929fdb140dc50bfbbfd0857ebcd65ae64b7549f051117878b1cafb2c7c5f8fb6edd59a3871c7662d5877f6957bd3f8b3cafa673f222d97c285259e9610e841286c17657b47c1b0d7e1d4e5850398d5d89e00f2f9b57564c235b343000045497eb5ccf082046f89e371eed65009b75f2f97f9e5f1ddffbad7658236ecfbde8d1cd0014f68e3c67e1df9e2232686e774e15107cf4696c53bf7db213478dd27f443a58197ce05e50dc4ab4c781100ed8c72723b1944a810d8c634651a511e8df3ec8b7115c8fb70b28ffcf4512cc84115eab705cde2e12750b555ba6b10ee8c26a06888b115922f1929c28b62c8744d99347137f4617a4c84f1e1d46920b99eba3b6fada1a755126ef6c0d9deda9be5a933f667daeeb81aff03255a48faab76c55950c206d9a3996bed7fc84c3c46f3eac3f884af1acb46f4ea1440bc795a3d3292fde85241eaac020272df54893f5ee1e6fc0587f5fdde19bd09159545a850c3fdf8fec7d993ffc71c0c5952b8a972d1ccedbea57d874bf1cf50d334cfb79b6247a3a48e980b7d1376643dc5599d718e507f2af58d21ee723826264a777bf8f03869e4182aa248d9c2c013ef16715507d74d83ae777af5d19d3ae2a1ba3fc888689bc1369cbfa41a4d30e10addb45fda6e4714e0125c0d5bbe71b09b8c1e91536a14a66e086e31d5ea33a69a323dc93d6710ceb76d1d27da9a2efebbda6a378cbc73c02717a217ba68f0a95fe6cecbc693271030281e17c36426997939f53d769340f6940ea76c92e7c8dca67ca16632a5bf6471828a3afd8220dd553601ffc710bf8b528efe5c66db1336753044229f841e6fca214caba2729488aa244559bb2e10c7671d1e93ce23ffff6e7eb3b8550057bc805e3cac87c66be92c5f077e31e34c7be99bd7fa61405622a7cc74df289a644957252f8df2010f7d653474e3da7561d8c80cf801111fdcb7b7bd3465ea12802b69e84ff165bf37e32bff0fc3fcc2e19622abbab688b74639c66bab8e45990bce5f35ce142df5dca4e6fba6f396170cfd2d7abe3ab2c9006c13b6cfc4e10bf9f4a347cd009e11d1be77b8b378374b6b6b0d9af4cbb89e626d3fac081c0a3537b0315c0186b6809e9454a0eb606b4307875a1a010a496e6fb024b7d2cb3693169f21f347e7d0976c32d7e154a9955ad8ee8c3e83529056fbf591179e206fd9ce1779782742c1acbf03cb2a3333226a235d42e1483e5bfb644ef14cb9a2f97a274ebf639df6f6d2c0b0166f99a02f63a850fcd0a522360b7e4f334dbbc142f07c81820baca6198b9ff4bcd3003a74ba075ca6fa5de98796646fcd75955413e4ac2ec8b0b044e06c31ffdeda1fb6e30a6cc26a11a5d936bfea3feccb21fe8832a4013c2ce3cdae95d934433ec57ec7839190b470ddd644e14ce8d59fdab409e7eafa8520ba34e4090508d54ccb10dfae6712f5134a1b831e38fb5a9879142b68e666468f04e2061b42357c69efb75e61cd07d8398e24cecbeab64c28766ba47dcf49d2c8bb53a50256129a2c2c3e78e9288cf5b6bff45c6628397433b42486729d26713229092895e3aedc6a2499c3a8de68d7604efaf9492d01439859dae9cde154722bad4b8048e1d232ee39a836053336a7ec6e1c99c141532a39e3d640e6136641305a001f7e011d37137c59b9d34d667596b2f3ea884c85c2c0c6d40638fd0db72c8eb9ab9baec410ef0a3e1a526e6c9b28ae5706d176a5e8997dd649fbf62c02d99b97784aa43e65549c076e1df7cd0c020ea4ed7c8c4878b8d3e64c0c23a004c1596cc96fc87fe6135d82fdcad3ed462f32c9a2bc3bf6f20f7f4ab170ed292b7c7a2a74323aae68a44041683d371575859e45c347856eb559704973bcbb440cf337f971371b067f70256f59f63ac4e27528bf41913f7c2d586b8a0d6e33dacc0d2ae53c1bd893481172f781f63c935186100b6120143097b7dd26003542e70a0f2363900357e5101da545acebec7e40ba019de46180ea28c10aba537f1a1eba5661c63383cbcd158e79567c258544bd7e98001c75d8cd900d5942faf448c24a5f8193113dec462f0783386dea9c656f0462ea7bf66cf48ca5071dccd6718b73d7c7fa68d9eca1ba31b7f76a1e5880e61e7a4da7fa28a17f5538e95fbcfbc81ec2ed97e82700291e1d1e6c57f0d296a9c3afb4ee96652a8b7dafc91eba2cfd25c1252bb0046e2d64c5d88beae4806b7185b9ef934ae44f9620e0051a9dd00f019077df0d467489789537cb3e687b6f6b966847681b7cd4910354306dab8605c694777da844602dd4362ed9ae09ae4fc729360ddc427dceb68d79de26c7bbc0095963bf01dd6c640b16b943cd17fc663ff340528a50a4539d58a7acb34a45457d87ac30d4ba60b733a699f1b00fdff9f72b6a5dc5b14b45f5ca41f7a551e3da5af1f750b1f52b35943abe5596b0be525a99f2a6f225d86d75c4d7a098c596c8a46e80955cf6e814d7845de5417de9db208da1393ca4b90abbc891c8aa7bfd5ebdfb4ee8b48487f356a7c4cfa8f3287b4087d1c5bb0c015bcce93b499fb343321da32b4577844442765285f2418a3e668d8300357971120474d693c179247bfec32d903359b5fe774486afada71770ab917af62ca13a36b83cd705bf2c6bc8231bba13026a9d8a7adf9e4202a4b6459f6ecc4fdba7360c6f45f23f6763b20c5d090fb9c5089fde022c186b7e0d0d6f839834d0b1b1a728a5ce1925c20cc2db40cd01e573ca77206a941302ee905752d94ccadfa1212a78981018293a70a00f0c27fa397c492ea93a70ba6967d80ca61e058dd0b9f2e76366db3b1105e85872e46a33ff3c0695cf3dd660a78bbd5e77c824b8371cb74e0c2dd9e9fea1d4781d8fec99c459f660d1c735cfb047a9edc1bd38289f6487629ab791d6c2ea27958840c100d8c94a90d0186604aa25f400cc8ed5261f0ab514558b0a2e3c9b821e8c8661014d35d6f7039964b266d69f9829b5d1a7c2d5c704449a818cae1cce0d09e232d71603555599ce72975768322adf2514f28d5cccc1b7ff44a2f5a440eaf06ed6ff7394e34f80f20f5f6c3ac85748f7b511a327ec9192160512426f4f3e43a72dc079aded14cd132ae3a189270ceafb308d21e435f37a07cf7a45768f01cc284e013651b1e1ad6b5b1ed849eb72ff9b008ad7d05b4949fe14171a25e2c39720d6c383fecfc57aa35829c799577fa88557cdb0a359e815b0d58be30de3c3a0afd0a6882045f7534a428aa08f8fe5fa1dfb2808b4c0dd0747848eb52a701f21d65c9f38915172b2f98c8fe409434c1281a7f90bc0e7f36ecb3e8bdd980768562d7959003373c2c6ad1b66d6fd1c529fbeecb34f1604b5d379fcc5b1085963c1ceb0c7652a00f0730e2e1c3ef121b854a833807bc6d04cfe2e7840c95dd6b50a22111e10015afafbbbe4de83b50e7067ca324d6fbb817ff6a3dbd76725e0886a8f7caefe4b7466c0f7a034c2ec6ba27e6405f0a39f0305d2ff3ef055952959419b735f446f61fb7e5c69828bd81dcca8305bb426f7f3c486a0d3a5b1da8733d2a4663198d6618f54d0c06565c5263e066a066120710197041a399dd1c8bc34c96558a7ce1c79a196b992d741f5d3bc93e8077a2437c45f63d36c514ce8dfa94d319f192229c74ee16d68e2809a6b764bca2646d6922d9b91b9637a0543028a0d9a126c13b1d0530ccf020887a00437249a122fcbcc95095f6c410a90593ebf67cc3f003cfbae172427c9b751da8afe88b176bc8fbf4f3c777570d1679af6352926cd470631d8690bce10af5beaa46546e5f6b81491db61bd49d09da978a45046bb5c1daec958bb5e17eac2acdd312883f0cb0d23c6bd8076eee69dd70e344b95a95382328aecd53c3215d4463e66b4ee2f97fcce7661801cc2cc05df96462748ae5452b437e47a449b7d7e34704dbc4028b8afe921ec316c4d99dc77bd075f1c4ac9cd458f0226e2025b2d445a3fda0f62ba2b7a42c8b253ca94b01b5c9d7be84ea3febaaa032e42543ae62527a69be8db72ee94fb84b578f21fb1a965eb07b4eced6dde72b022faf4af6edfcf9bdfccf6664002b12b3246d93b50870a61e069c3cc602fb5e6e792000bd9c6dd72edab14d94d1f0aab018d9f0b5170d26dc673eadf533217ce2aa14461c9f07f2e4ee5c6bcdd43babf743d19a11584c3cd539ff8e46b21072bff64da85465df4c0d436df0d21c7d08b6e3872f860c90b7a89ab0b8f07faead56b74e841f9425b418987fda96956f40a31e24188786ef695aad98e9310cf44e14c598c8a09cb17dab4e675d01ebd761f04952cfa67ecb4eb07da26a1a39e4c8f2043c99fa9a8d8e345f32c93f4271dbbb4cabcc01c1f2f8aa0a795470942ff79b8f58dc3eae30aaec143d736a13feb35bd8b70a7e5dbb033ee21d48c19d71a3e7e1bde023f6e90e5542f8306faf920d553da5d8311f0b9f77bb9bda94d4aba0f0cc0758ba278bb504e4e7f47f80009c37ea86fa4e88fda2f5ff46f4706685bed8837d2de9321656049b567adc0deae77d13a953b8ec46f5a78404ddfdbd9beb9b22b952a483307a00d2cd44f576b85e7a370a103ad3a946d591b526ffb76e85f10841c71f5c5aa2fa0019803483008707672ee76e3e06147d33db3d021380129b54df11f386eb30b2fe9978c2c1c4b91c42e2881bcdef9ba063d022419b37fd942315d681d7fafa84b803ea1181b66f8e2a8a6d0cdcff1bdcc51269e6184ad42d269944c06d46de755c773d966604c9f4fb85e882deada6bc95e8a3bb13b1df8e9a5bcfe93e82eee85b7c1d1188027c3545c2015ef98a24eb38fa2464a30eafa8f778b5b80530d0a5a5db1e0050d6d313a0e3985967f1cacd9d7451924e4493c658d729a79eb520e2dc05fa5c3ccce8fbf6c6aa1574c122198c6964ace969e78b84b17464cd8a6e9d02a91d9cff425bac08a1908c1d0c18723c8d6ef89ab2067492afad2ed774899b6e8f5495598b093cc9c43f4a57e0825502126ec9278493f524d3e49d9cecda8ecf5eb3116f8b290adfdc615d9a7e8c92f6ea35cbdbf04700e083875d5ca8f5a73cc5aa9f5800009577d74835af66d70f7c2d41149cc5d84be9d6bbfea468b50d8d83ba6a0b6958c2109028e5d0176c39372d302ac9a379b8f13725c15433a7c27921d1e3cbf95522953a9bfd5874f12546f36a24e4c656a6bd495c5f2a3d69c8fd658cc35d354533ad3f54efcc97c714ecafe49bdfe5fa88ddefbb2b53bcd2907fd662156a760664042476624aa332f683058b7ee08cf79570312bed749fad81e710df6095ad98abaa3a7c4b51566f9eab696317e6db45cc60839c18b63b547a577030e622c95cd6e3640f352803f10b5bf3afc7a5a44680faa8d06203bf5142b2184b813b53ca4efd31dd9cdcd91c1d83d65b3784c2469591deae16154ffde9ecc51aa805162e69f256f7bb3e546739cc050609f08a8788f42258ae382eab338cdb3fa04bee87618b9d76c4119c95c658297d8220a2ccc7b807908163b92f93d56f7ffcd040e1c1ba94ad43052b195cfbb029a9cd399d24e5292228e4dc2a3e1ca3b9959eba4f3bbf72dadd6ced1b19bcc1d526e6b1f9e4fd6dbdd2c7f08e61b42b13cc12f6f564d28eebc615b43dcc908bac797ab8f86fb2ea40950ba8ec67a23684f0aafc23c3c67c31689f0afaed8de5f203f5e18556d3f3d0e15462b4775a26aeaa0953832a98d1bc4edf4ae995ec714a254173f202b79d0af4867fdc5ba8df063ef8b971522e744c13c4c28f933bb3ebcce6f9bc086a6ac6645f49994ee268f31e90d3bc9b00927e3321d9e3c8e9470a1a4924b2d3c18b5fd566eac20863274bf0b78116fd315676f6d2b73efeba922f082464f0a694551dc431be28ae14c0bb49c65afdee0570665e8250bffe9668f22ba89307d63841282e221077531e619feca4fb919b7626ba075225b37c2e48db311bbdeafe900d7526975e99fedd7ee565964a7141330ac0635d8a896ce749be0f16a7c1db41e3b7f634897c7dc8ff00bdf124abfe780c7982007adffd6e79ad52d2f36fe179108e7fefd2f9fefa9df4a1f47adc738d97caee49479b4dfe979b8118555ee9fa9e8286028e9d3da902515ac7661ecb574618190e7cd87d4025ae20f36d93e9c340902c566af44e72148ce337cc0e2331a681ff5f47dec9bd4077c64d4a54369a45950e1d1814aeaf48140ae249733ad261d2e339e1c9085aa49802035b2c33a0417d687e402edd1497ded834ee082af352ce53e3dc26eb6fa87febc2b427c8ef6b921bd42cb82df082e82aba197d9e7220edafd16837b810181617ea3c134206df319234cbc2754bfc4d040c48e40c8cc31ce9bab781ae49707c16d2ab9cd81243cfef728304a649ac79f6f1977a9236439b6ffa568a6004f4fdb770d57822dbe4a2d726b2cc5b08136e2acfb07eb46c24aca45c655ff2158239c3842831367abecb55787449b91143f4535ae027ab62d3c9ba1dfed0d1bcc8c52129077a3ee26db577a49b2f77318bd9c8bb8412f82c6c5f16ede36d9020ad2628f780ebf0d2069bd5bdde936e1d9ef7d448b94ecf017771989a0b48cea95b94756fe8192d592d81c3030866fbac13db34bc0839fb81283f15e3fed64ecd32fdae9fb1de5059a4003543c8751040b73cfc2ba72ee4fd37b1487fd408e8c86f09c4161044ed16896f431b4acbda89b23e0e1b8fc2d90c2a1b1524cd9a189ba21e936c78bb94f13d17d0d7b6982fa0463c45c87acdd56a1fa71ca005770fc0afc37064cbf17393863c0b6084990ba28bf339d281f26582cb2a344c05f068baa00fb55e0fc79b038a69455dba07fe5e98a64ecfc816a12bd351fdf1d7e4f0cf1c2cdb943b6739b01a95761aee40b43931b7583da567e5335483e815cfbe17129b9b44b5ebd1a6d607c97f4fe842f8ba51482a873d26eef70cd5490df7ac5cc3acd04dc2ea19274e4e1dc0c044d935185670205fcea19fbbc4688b0bcfb1dfe04b1dbcb88c6d87856b619498dafdbabfceaf37f177b7424d5454819e0e0576344e60273ff40407604e7ce8bcf5bd3c4a46f61030fbccb115bdd12b5d7b14540a41f5e20fcaf4677b6725f1cf8cc7e45f05c14a6e92c703d0340cc4eeabdfcb4a68389effd0dccd19467e858a01dface89b354dfb6010b5de7d1a7af6f8674289def54265e303af3708faf890ea28e462c7b98b7844f2686cf9bc576c30e643309b7fa673c31292494642499df2ccd4b84de5d7cb2c2502dc59694754ef02ab8e8d7771e68171b756f8e0ec13e595c0a6a3ebc2f8947eb4776c121414b66c3192ab4834ca8604bb2db7db2fc20f07c410fc700515c2d7eb2b91cb89a00d0101b105c43ad5f2aee1ef09ac80fa8a45e4255a4e2b1d25d183fc198d9225af724be06dc8392fdc8ffcdf54f8625c7c532eea911662313dd8c084d0f3552df963cc7f637eafb90972bd8ea234c136fab47479ee1f5d5df02a79fd5ad76bca3beea4ae1a038515cb4d9cc9774f29e2a97bc370c1f9d7f2fe0c2196d23fd68f7f3e42e02c7c3a9e6cca000efa08cb801da6deacf0682e51c730360fe5871d72a0a297be6752c587b38808693d55731ea7fa8e7d28230625a5ff2549933c6998fd5e3e54243ee1b1cc5094ebf4bb53c0b270dcfa7fe30e26a804cd2f1927a139df7a0b527c44ffbb945dcf7224dc41cea2c1940192b52689f4f003456c09f88fa259aefa45e8954ee16461c461e355b7fb73d08327546b0bde60846f1c1b02bdae79cecc426e6e30080fc7e26dd856076bbeb7a08b407d8d3bc275ce20e71d8ebf62403f676730f8ca2d269c7afd5226e4441bbba521fe87776ec18194fe74304df163ccb82fe9101498c79dbd1eb788</script></div><script src="/lib/blog-encrypt.js"></script><link href="/css/blog-encrypt.css" rel="stylesheet" type="text/css">]]></content>
    
    <summary type="html">
    
      无权限访问，仅提供VIP用户学习阅读
    
    </summary>
    
    
      <category term="VIP培训" scheme="https://www.rootfw.com/categories/VIP%E5%9F%B9%E8%AE%AD/"/>
    
      <category term="文章" scheme="https://www.rootfw.com/categories/VIP%E5%9F%B9%E8%AE%AD/%E6%96%87%E7%AB%A0/"/>
    
    
      <category term="v2ray" scheme="https://www.rootfw.com/tags/v2ray/"/>
    
      <category term="Linux" scheme="https://www.rootfw.com/tags/Linux/"/>
    
      <category term="vip" scheme="https://www.rootfw.com/tags/vip/"/>
    
  </entry>
  
  <entry>
    <title>v2ray流量中转</title>
    <link href="https://www.rootfw.com/posts/5b02b57f.html"/>
    <id>https://www.rootfw.com/posts/5b02b57f.html</id>
    <published>2020-07-06T03:43:30.000Z</published>
    <updated>2020-08-11T05:24:12.906Z</updated>
    
    <content type="html"><![CDATA[<p>当我们在科学上网的过程中，有时候因为服务器到你本地延迟太高会影响我们使用，当服务器端所有配置满足需求的情况下（当然也包括线路问题），延迟太高绝对会引起病发直接会导致数据传输和影响访问速率，比如：网速非常卡，频繁掉包，那我们该如何降低延迟呢？如何改善呢?我们可以通过中转流量解决这个问题。服务器中转方法很多，今天我们通过v2ray来配置个非常简单的中转 温馨提示：今天我只讨论单纯中转，不讨论服务器线路</p><p><img src="https://cdn.jsdelivr.net/gh/ComeBey/imghosting/comebey-pic/20200708074625805.png" alt=""><br>我画了个拓扑图简单说明下：<br><code>1.假设当PC访问SERVER B时延迟为60ms+80ms=140ms或者更高的延迟，且SERVER B是中上配置服务器，大流量G口。假设不是高峰期延迟在140以上140~560/ms之间，即使你服务器配置不错，大流量G口，因为延迟太高如果vps线路本身不是优化好的线路，病发可能性极高容易掉包。一旦频繁掉包会直接影响正常访问数据和网速</code></p><a id="more"></a><p><code>2.假设当PC通过SERVER A 中转服务器延迟在30ms，这台服务器配置不好，在通过中转服务器访问被中转服务器（最终访问外网节点服务器，假设这台服务器配置不错）SERVER B 在35ms延迟，一共65ms，对比上面140ms-65ms=75ms 降低了75ms延迟，这样的中转才有意义，在配合BBR内核优化效果是非常非常明显</code></p><h3 id="Dokodemo-door"><a href="#Dokodemo-door" class="headerlink" title="Dokodemo door"></a>Dokodemo door</h3><p>是一个传入数据协议，它可以监听端口，进入此端口的数据发送到指定服务器的端口，从而达到端口映射的效果及流量转发。</p><h3 id="本地环境"><a href="#本地环境" class="headerlink" title="本地环境"></a>本地环境</h3><p><code>vultr</code>服务器centos7 一台（当然你也可以使用其他版本服务器）<br>点击这个链接注册后通过支付宝支付最低消费10美金=70左右人民币，即可得到赠送（100美金有效期30天使用）<a href="https://www.vultr.com/?ref=8623585">https://www.vultr.com/?ref=8623585</a></p><p>电信网络100兆，PC电脑离路由器距离30米左右，隔两面墙壁 WiFi使用5G频段传输<br>实际测试 vultr 我选择日本地区最低配置5美金一个月那个，延迟在200~230左右甚至更高分时间段，一分钟内掉包非常非常频繁（我只说大概的）</p><h3 id="安装v2ray"><a href="#安装v2ray" class="headerlink" title="安装v2ray"></a>安装v2ray</h3><p>当然你也可以使用新版本v2ray脚本或者其他翻墙服务安装，自行谷歌搜索，本脚本是老版本v2ray,安装完毕后请自行配置相关<code>config.json</code>参数，并且保证配置成功后能顺利访问外网。<br>安装v2ray官方脚本</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bash &lt;(curl -L -s https://install.direct/go.sh)</span><br></pre></td></tr></table></figure><p>配置config.json</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"inbounds"</span>: [&#123;</span><br><span class="line">    <span class="attr">"port"</span>: <span class="number">10073</span>, <span class="comment">//端口</span></span><br><span class="line">    <span class="attr">"protocol"</span>: <span class="string">"vmess"</span>,</span><br><span class="line">    <span class="attr">"settings"</span>: &#123;</span><br><span class="line">      <span class="attr">"clients"</span>: [</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="attr">"id"</span>: <span class="string">"e61f55bf-8450-4fa6-884e-4b46b64122c4"</span>, <span class="comment">//UUid</span></span><br><span class="line">          <span class="attr">"level"</span>: <span class="number">1</span>,</span><br><span class="line">          <span class="attr">"alterId"</span>: <span class="number">64</span> <span class="comment">//额外id</span></span><br><span class="line">        &#125;</span><br><span class="line">      ]</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;],</span><br><span class="line">  <span class="attr">"outbounds"</span>: [&#123;</span><br><span class="line">    <span class="attr">"protocol"</span>: <span class="string">"freedom"</span>,</span><br><span class="line">    <span class="attr">"settings"</span>: &#123;&#125;</span><br><span class="line">  &#125;,&#123;</span><br><span class="line">    <span class="attr">"protocol"</span>: <span class="string">"blackhole"</span>,</span><br><span class="line">    <span class="attr">"settings"</span>: &#123;&#125;,</span><br><span class="line">    <span class="attr">"tag"</span>: <span class="string">"blocked"</span></span><br><span class="line">  &#125;],</span><br><span class="line">  <span class="attr">"routing"</span>: &#123;</span><br><span class="line">    <span class="attr">"rules"</span>: [</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">"type"</span>: <span class="string">"field"</span>,</span><br><span class="line">        <span class="attr">"ip"</span>: [<span class="string">"geoip:private"</span>],</span><br><span class="line">        <span class="attr">"outboundTag"</span>: <span class="string">"blocked"</span></span><br><span class="line">      &#125;</span><br><span class="line">    ]</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>把v2ray配置信息中<code>port</code>打开（如果是谷歌云也可以添加防火墙规则）</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">firewall-cmd --zone&#x3D;public --add-port&#x3D;端口&#x2F;协议 --permanent</span><br><span class="line">firewall-cmd --reload</span><br></pre></td></tr></table></figure><p>然后看下能否正常访问外网，在这个前提下在继续往下看</p><h3 id="配置Dokodemo-door"><a href="#配置Dokodemo-door" class="headerlink" title="配置Dokodemo door"></a>配置Dokodemo door</h3><p>准备另一台服务器比如谷歌云或者其他品牌服务器，同样安装v2ray官方脚本（请不要使用除官方脚本以外的一键安装脚本）</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bash &lt;(curl -L -s https://install.direct/go.sh)</span><br></pre></td></tr></table></figure><p>温馨提示：可以使用<code>vi或者vim或者nano</code>编辑</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vi /etc/v2ray/config.json</span><br></pre></td></tr></table></figure><p>把初始的配置信息全部删除，长按键盘<code>D键</code>清除，在按键盘<code>I</code>键盘直到提示<code>inster</code>(没提示就多按一次),再把下面代码黏贴<br><strong>方法一</strong></p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"inbounds"</span>: [&#123;</span><br><span class="line">  <span class="attr">"port"</span>: <span class="number">23213</span>, <span class="comment">//你的中转节点入站端口</span></span><br><span class="line">  <span class="attr">"listen"</span>: <span class="string">"0.0.0.0"</span>,</span><br><span class="line">  <span class="attr">"protocol"</span>: <span class="string">"dokodemo-door"</span>,</span><br><span class="line">  <span class="attr">"settings"</span>: &#123;</span><br><span class="line">    <span class="attr">"address"</span>: <span class="string">"111.222.333.444"</span>, <span class="comment">//你获取到的节点信息内的境外节点ip</span></span><br><span class="line">    <span class="attr">"port"</span>: <span class="number">32334</span>, <span class="comment">//你获取到的节点信息内的境外节点端口</span></span><br><span class="line">    <span class="attr">"network"</span>: <span class="string">"tcp,udp"</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">"tag"</span>: <span class="string">""</span>,</span><br><span class="line">  <span class="attr">"sniffing"</span>: &#123;</span><br><span class="line">    <span class="attr">"enabled"</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="attr">"destOverride"</span>: [</span><br><span class="line">      <span class="string">"http"</span>,</span><br><span class="line">      <span class="string">"tls"</span></span><br><span class="line">    ]</span><br><span class="line">  &#125;</span><br><span class="line">&#125;],</span><br><span class="line"></span><br><span class="line">  <span class="attr">"outbounds"</span>: [&#123;</span><br><span class="line">    <span class="attr">"protocol"</span>: <span class="string">"freedom"</span>,</span><br><span class="line">    <span class="attr">"settings"</span>: &#123;&#125;</span><br><span class="line">  &#125;,&#123;</span><br><span class="line">    <span class="attr">"protocol"</span>: <span class="string">"blackhole"</span>,</span><br><span class="line">    <span class="attr">"settings"</span>: &#123;&#125;,</span><br><span class="line">    <span class="attr">"tag"</span>: <span class="string">"blocked"</span></span><br><span class="line">  &#125;],</span><br><span class="line">  <span class="attr">"routing"</span>: &#123;</span><br><span class="line">    <span class="attr">"rules"</span>: [</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">"type"</span>: <span class="string">"field"</span>,</span><br><span class="line">        <span class="attr">"ip"</span>: [<span class="string">"geoip:private"</span>],</span><br><span class="line">        <span class="attr">"outboundTag"</span>: <span class="string">"blocked"</span></span><br><span class="line">      &#125;</span><br><span class="line">    ]</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>方法二</strong></p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"log"</span> : &#123;                                 </span><br><span class="line">    <span class="attr">"access"</span>: <span class="string">"/var/log/v2ray/access.log"</span>,</span><br><span class="line">    <span class="attr">"error"</span>: <span class="string">"/var/log/v2ray/error.log"</span>,</span><br><span class="line">    <span class="attr">"loglevel"</span>: <span class="string">"warning"</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">"inbounds"</span>: [</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">"port"</span>: ###, <span class="comment">//端口</span></span><br><span class="line">      <span class="attr">"protocol"</span>: <span class="string">"vmess"</span>,    <span class="comment">// 入站协议为 VMess</span></span><br><span class="line">      <span class="attr">"settings"</span>: &#123;</span><br><span class="line">        <span class="attr">"clients"</span>: [</span><br><span class="line">          &#123;</span><br><span class="line">            <span class="attr">"id"</span>: <span class="string">"#######"</span>, <span class="comment">// UUID</span></span><br><span class="line">            <span class="attr">"level"</span>: <span class="number">1</span>,       <span class="comment">// 用户等级</span></span><br><span class="line">            <span class="attr">"alterId"</span>: <span class="number">64</span>     <span class="comment">// 额外ID</span></span><br><span class="line">          &#125;</span><br><span class="line">        ]</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  ],</span><br><span class="line">  <span class="attr">"outbounds"</span>: [</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">"protocol"</span>: <span class="string">"vmess"</span>,        <span class="comment">// 出口协议</span></span><br><span class="line">      <span class="attr">"settings"</span>: &#123;</span><br><span class="line">        <span class="attr">"vnext"</span>: [</span><br><span class="line">          &#123;</span><br><span class="line">            <span class="attr">"address"</span>: <span class="string">"#######"</span>, <span class="comment">// 国外服务器地址</span></span><br><span class="line">            <span class="attr">"port"</span>: #####,        <span class="comment">// 国外服务器端口</span></span><br><span class="line">            <span class="attr">"users"</span>: [</span><br><span class="line">                &#123;<span class="attr">"id"</span>: <span class="string">"#####"</span>&#125; <span class="comment">// 用户 UUID，须与国外服务器端配置相同</span></span><br><span class="line">            ]</span><br><span class="line">          &#125;</span><br><span class="line">        ]</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">"protocol"</span>: <span class="string">"blackhole"</span>,</span><br><span class="line">      <span class="attr">"settings"</span>: &#123;&#125;,</span><br><span class="line">      <span class="attr">"tag"</span>: <span class="string">"block"</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// 增加 freedom 传出绕路，国内流量直接放行</span></span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">"protocol"</span>: <span class="string">"freedom"</span>,</span><br><span class="line">      <span class="attr">"tag"</span>: <span class="string">"direct"</span>,</span><br><span class="line">      <span class="attr">"settings"</span>: &#123;&#125;</span><br><span class="line">    &#125;</span><br><span class="line">  ],</span><br><span class="line">  <span class="attr">"routing"</span>: &#123; <span class="comment">// 路由设置</span></span><br><span class="line">   <span class="attr">"domainStrategy"</span>: <span class="string">"IPOnDemand"</span>,</span><br><span class="line">    <span class="attr">"strategy"</span>: <span class="string">"rules"</span>,</span><br><span class="line">    <span class="attr">"rules"</span>: [</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">"type"</span>: <span class="string">"field"</span>,      <span class="comment">// 不允许客户端访问服务端的局域网地址，以提升安全性</span></span><br><span class="line">        <span class="attr">"ip"</span>: [</span><br><span class="line">          <span class="string">"geoip:private"</span></span><br><span class="line">        ],</span><br><span class="line">        <span class="attr">"outboundTag"</span>: <span class="string">"block"</span></span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="comment">// 配置国内网站和IP直连规则</span></span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">"type"</span>: <span class="string">"field"</span>,  <span class="comment">// 对于一些常见的国内网站，也使用直连模式</span></span><br><span class="line">        <span class="attr">"domain"</span>: [</span><br><span class="line">          <span class="string">"geosite:cn"</span></span><br><span class="line">        ],</span><br><span class="line">        <span class="attr">"outboundTag"</span>: <span class="string">"direct"</span></span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">"type"</span>: <span class="string">"field"</span>, <span class="comment">// 对于所有国内的 IP，都采用直连模式</span></span><br><span class="line">        <span class="attr">"ip"</span>: [</span><br><span class="line">          <span class="string">"geoip:cn"</span></span><br><span class="line">        ],</span><br><span class="line">        <span class="attr">"outboundTag"</span>: <span class="string">"direct"</span></span><br><span class="line">      &#125;</span><br><span class="line">    ]</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>最后重启v2ray 查询v2ray是否运行成功</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">service v2ray restart</span><br><span class="line">service v2ray status -l</span><br></pre></td></tr></table></figure><p>博主实际测试在没中转情况下非常非常慢和蜗牛速度一样，中转后速度直接提升到6w以上，我会在视频中详细讲解</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;当我们在科学上网的过程中，有时候因为服务器到你本地延迟太高会影响我们使用，当服务器端所有配置满足需求的情况下（当然也包括线路问题），延迟太高绝对会引起病发直接会导致数据传输和影响访问速率，比如：网速非常卡，频繁掉包，那我们该如何降低延迟呢？如何改善呢?我们可以通过中转流量解决这个问题。服务器中转方法很多，今天我们通过v2ray来配置个非常简单的中转 温馨提示：今天我只讨论单纯中转，不讨论服务器线路&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://cdn.jsdelivr.net/gh/ComeBey/imghosting/comebey-pic/20200708074625805.png&quot; alt=&quot;&quot;&gt;&lt;br&gt;我画了个拓扑图简单说明下：&lt;br&gt;&lt;code&gt;1.假设当PC访问SERVER B时延迟为60ms+80ms=140ms或者更高的延迟，且SERVER B是中上配置服务器，大流量G口。假设不是高峰期延迟在140以上140~560/ms之间，即使你服务器配置不错，大流量G口，因为延迟太高如果vps线路本身不是优化好的线路，病发可能性极高容易掉包。一旦频繁掉包会直接影响正常访问数据和网速&lt;/code&gt;&lt;/p&gt;
    
    </summary>
    
    
      <category term="科学上网" scheme="https://www.rootfw.com/categories/%E7%A7%91%E5%AD%A6%E4%B8%8A%E7%BD%91/"/>
    
      <category term="v2ray" scheme="https://www.rootfw.com/categories/%E7%A7%91%E5%AD%A6%E4%B8%8A%E7%BD%91/v2ray/"/>
    
    
      <category term="v2ray" scheme="https://www.rootfw.com/tags/v2ray/"/>
    
      <category term="中转" scheme="https://www.rootfw.com/tags/%E4%B8%AD%E8%BD%AC/"/>
    
  </entry>
  
  <entry>
    <title>加密库</title>
    <link href="https://www.rootfw.com/posts/b7316760.html"/>
    <id>https://www.rootfw.com/posts/b7316760.html</id>
    <published>2020-06-29T13:41:40.000Z</published>
    <updated>2020-08-06T11:35:13.277Z</updated>
    
    <content type="html"><![CDATA[<div id="hexo-blog-encrypt" data-wpm="文章已进行加密，需要密码才能继续阅读." data-whm="无效的密码。请检查并重试.">  <div class="hbe-input-container">  <input type="password" id="hbePass" placeholder="" />    <label for="hbePass">请输入访问密码.</label>    <div class="bottom-line"></div>  </div>  <script id="hbeData" type="hbeData" data-hmacdigest="5de3ad4800c1527e7a06c56b9734b93e7ab7ac4a82ef9b6e041f5db389d21aa9">7b3fe121a03b5a70b907c517bebb08583c561160c515efa0ff6dffb11a426a501808a7a5a59cc1dbc4359504f719d68ffc4782bee37ebd9fc169d9fa914daf0ec72b5d0ab310e9c20a7d1cbd8fb9cb10ca515edd707c49aaf97be0e5fa7fbb66f61793b9661a9b6dac531fdad0d0bd613a68e00646cefe1886725dcb21922dbd6ace4f200616136718fc9de3cce721176362f018c61f2c7218e36ace3d502e5ce34ec52f658f1904d245f96548e7036918af88150d08ccb5c94455f50c62001022b2a1038031bd0b22895c2018c552eabdb5733443e315cddff82160850bc6a461dade55b880085f8979637ecc61fd98078eeaeadb89998d21d347313fded9f8f9bb89957a7faa7ff12ebb9a23023154e247b5a7f26036f79c8a4cac92c773b6c3d01fe0d0e088919974c6d0d30ac0a07ce4560bff137d0ef6e0f1907d422afba6ae375dcd242d0483890e8ccb021a28b53dc7d325a4bb92378d1c8ba4f7443d1ed994f04b1d2ea33b708976c58b8d4845a884d3fbed6cb1640bb11e8cc00bfb02e76c4c7724ca2c113c82a07102923d1d2471fb11a1666576235debf1956a45f83a7b8c3a01cf18b41f83ac9a1d625f23d2d3d9a3678c0955df032952b7cf78dce8b80c9d867382de563a640c9c8cdd4e6a41f34bb652e76ca480f874fc67d5ce3075b28d94c18b3bbc78760cf3f611d85749203980ab194ee73162a6b22d95758fce1ee54e320c16be91560175c700fbcc5bce684babda9a19a70d1ba68da9ca4cf080b52ac2d52d801ed8a6912e49e3ebeb417be97775c495b06aefe2c07e69b4a4b73c1042445bd0120a4ab79335430f5ebd0bf7c80859aa16b6d2c12b758bf69d881f6ead4bea1d12e32daddb3a8c9a2977a6f25ab412b396f89e76c53ac38bf689b66a128babaa1a6b76f62ed772b833fd8adf6e0992d4ddc87b96f027922c5843f35df2cd0be87827c2c09cc681a661a2e486ef8435d0ec03d0d5ec25a666504ed5039be01aeb311414ad8d253e3e684e270c6d97eac27fa1ca75316a922372d95abb36e2073cd66fa654974a88b6d644bc82e99d3cd967ae080e6ef292fc989c1158443f60996813124a43c22cdfb6ba1288506fd7896d414a4786c63899ce75143cc16729959b74def3be6b7db9a8ea945489d528d556621693cf2f9144d31b0f4396d2ae513aa38a6e64427478707f4589d5c8c092fd74681b1b4823e2483665ff655e60f37a4ef9f165b72e9e16754bfe5e2d87a36fc6cc1e0e42045498a8314dc63d188da07562a12832f441d9c517e629d3db1dfb6f580ef58c6e6f4239b03882c812c7940c979e3e19f6bd698c1cdddf366d94a0aa232a7a0fa238291e34afea47c3f603f43c3246a8fcabf63a1e7d8b6d032f873e67b04ccdbdb1e7b2a4ef5463a0fe3da75cb70e31d2fb60e32e0fd5899ea87ac5fc8693c6c3e9d84da248dfc270c4f3634cd5ec840448885670a78635c5debf76e4e8e85a8aa8e789f8181a0e39534ee1e8bf13454a3464ece24e2f07dd575f6b0d870b562c0b7b18b671d38f0d3b3f74d5d65ffc42505b656525a65c60513de5e8bf7d8194c27e7b245e7112e4fb7dca1c51766f0aa8e6b9a3ed4f5b00bbf75595431389082f6c6aea707073336e1dea928b12950f0190ccb36c47c71f9ed3e3029eb7caab5b06de1102bc36db31ad6e9e66ad4bf9a922663c0da57de5ab65b674dd16a767b4013ec1364330ee213aa331ae045a94d85ca0b1646a060f2c58da73495ca49db273ee44ee01e0d0f025ed29e8f08245461ff5092d2f5e33ffd1e5470fd35230326f42aa9cac7dc0539cfe37d9381fbee6c542d0193d02492b6abba94c6bc63d6830f6b0944af9a46ea8740e0c22d199a4e0c480df7103be393eda142108104ec4f64ebacbea3a2f5a0b3d7ab55c65846fc4772fc47806b8c0e0888b3250b3aee0957c947e0100a56c9838b60021d15ca3ae7944108df0cf0733669d1cf787f44c2dfc8952ea71a734edd3c73be9efa9242a1a481a0afb6f1fe9aa86611db5b178e9d20c3290b1186c323ca4141de6203f688d55bfdfbdb3416e9900ddb7c4075c224bc5d902d8cd407230222a7c4536b3e177aaa6f5a3e6b79edd3d17934ad79521ede7b1082654aa415a880289a5d048847a8e3c9560a35ffc5854fff9125317531260e624516e76b24e41e208c7e4bd34282ddd33e6e9a97eebc516bac05b79098ec734936d9ce150e475f306537b8fe40216bdbb389ccc5f156d78f8b803408768bd185c31636a3fb52690ba8caad0b1c1c7a63ea8bbdb25d228d320746194e1d81f8e00a9b24c9139eb5435b6e6ce9aa1757dffe1161ff5242ebe61d50f39fdd451ede640b4dcdabf8cd98986f9eb88f7318a901677f227b892725ceba3a66fabb22d1a10f8440cb4bbca292c81c5c0902afdf3a2c9170a8e3000b5164c19c5c7302d34ff7c7c6fa3a037d68312566f96ea7e2f9f6939ad0d522e5bfc4a5e0802d5751191e18349613e37c07dac76abb370733a30e0fb7ed2b149369b9180241b6cd440a6a33918b0f3788b0902122aa6263947a3ca4ff0cd047ad79fe737942d31ab8d2e98f6e38e3313bf695e59a20d31e427d06e88a2a332d1176cbfe4bc0b023910dee1fe59d09dd42e41d6d11e62775034f7379a9c8aa7cf50c9876fb6b9e61aa43da190927d903b4349eecba0d1b3f0cdbc2f28d407a54bea149e7622bd8a146c991c4b72601d7d4615537b071b61116860481a80bf4082eb87ccb45180966e5126473c8129dc61049991c9ef181f34b3d070a46c426e493ed4eafa9ba3559462918a74be2d8e85ae7d8e7b79300eba955d4ece6b56daca5aa2a7b8bfbd99ac0cf0fb6ee7ea7cfa5ae01d9cbbdfa58a6137adeab208a6c290c350e97e4a9b7623d3b0ae97773cfbb144c1a74df1d72e333f818a9a668b1e4b38f39b9af49fb98448e52e98b34021f2ecaeb950e2be7031cba690ba948d23b027</script></div><script src="/lib/blog-encrypt.js"></script><link href="/css/blog-encrypt.css" rel="stylesheet" type="text/css">]]></content>
    
    <summary type="html">
    
      无权限访问，需要密码才能继续阅读.
    
    </summary>
    
    
      <category term="科学上网" scheme="https://www.rootfw.com/categories/%E7%A7%91%E5%AD%A6%E4%B8%8A%E7%BD%91/"/>
    
      <category term="v2ray" scheme="https://www.rootfw.com/categories/%E7%A7%91%E5%AD%A6%E4%B8%8A%E7%BD%91/v2ray/"/>
    
    
      <category term="v2ray" scheme="https://www.rootfw.com/tags/v2ray/"/>
    
  </entry>
  
  <entry>
    <title>防火墙设置</title>
    <link href="https://www.rootfw.com/posts/8189ee31.html"/>
    <id>https://www.rootfw.com/posts/8189ee31.html</id>
    <published>2020-06-27T14:52:27.000Z</published>
    <updated>2020-08-06T11:34:11.308Z</updated>
    
    <content type="html"><![CDATA[<h2 id="一、查看防火墙状态"><a href="#一、查看防火墙状态" class="headerlink" title="一、查看防火墙状态"></a>一、查看防火墙状态</h2><p><strong>firewalld的基本使用</strong><br><strong>systemctl是CentOS7的服务管理工具中主要的工具，它融合之前service和chkconfig的功能于一体</strong><br>启动：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl start firewalld</span><br></pre></td></tr></table></figure><a id="more"></a><p>查看： </p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl status firewalld</span><br></pre></td></tr></table></figure><p>停止：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl <span class="built_in">disable</span> firewalld</span><br></pre></td></tr></table></figure><p>禁用：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl stop firewalld</span><br></pre></td></tr></table></figure><p><strong>服务：/sbin/chkconfig –add foo 把新生成的foo.service 放到/usr/lib/systemd/system/下面，然后采用load命令导入 systemctl load foo.service</strong><br>启动一个服务：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl start firewalld.service</span><br></pre></td></tr></table></figure><p>关闭一个服务：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl stop firewalld.service</span><br></pre></td></tr></table></figure><p>重启一个服务：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl restart firewalld.service</span><br></pre></td></tr></table></figure><p>显示一个服务的状态：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl status firewalld.service</span><br></pre></td></tr></table></figure><p>在开机时启用一个服务：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl <span class="built_in">enable</span> firewalld.service</span><br></pre></td></tr></table></figure><p>一般需要重启一下机器，不然后面做的设置可能不会生效</p><h2 id="二、开放或限制端口"><a href="#二、开放或限制端口" class="headerlink" title="二、开放或限制端口"></a>二、开放或限制端口</h2><p>1、开放端口<br>如我们需要开启Shell连接时需要使用的22端口</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">firewall-cmd --zone=public --add-port=22/tcp --permanent</span><br></pre></td></tr></table></figure><p>其中–permanent的作用是使设置永久生效，不加的话机器重启之后失效</p><p>重新载入一下防火墙设置，使设置生效</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">firewall-cmd --reload</span><br></pre></td></tr></table></figure><p>可通过如下命令查看是否生效</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">firewall-cmd --zone=public --query-port=22/tcp</span><br></pre></td></tr></table></figure><p>如下命令可查看当前系统打开的所有端口</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">firewall-cmd --zone=public --list-ports</span><br></pre></td></tr></table></figure><h2 id="三、限制端口"><a href="#三、限制端口" class="headerlink" title="三、限制端口"></a>三、限制端口</h2><p>比如我们现在需要关掉刚刚打开的22端口</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">firewall-cmd --zone=public --remove-port=22/tcp --permanent</span><br></pre></td></tr></table></figure><p>重新载入一下防火墙设置，使设置生效</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">firewall-cmd --reload</span><br></pre></td></tr></table></figure><p>再去查看系统所有开放的端口，已经看到没有22端口了</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">firewall-cmd --zone=public --list-ports</span><br></pre></td></tr></table></figure><h2 id="四、批量开放或限制端口"><a href="#四、批量开放或限制端口" class="headerlink" title="四、批量开放或限制端口"></a>四、批量开放或限制端口</h2><p>批量开放端口，如从100到500这之间的端口我们全部要打开</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">firewall-cmd --zone=public --add-port=100-500/tcp --permanent</span><br></pre></td></tr></table></figure><p>重新载入一下防火墙设置，使设置生效</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">firewall-cmd --reload</span><br></pre></td></tr></table></figure><p>查看系统所有开放的端口，可以看到从100到500的端口已被全部开放</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">firewall-cmd --zone&#x3D;public --list-ports</span><br></pre></td></tr></table></figure><p>同理，批量限制端口为</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">firewall-cmd --zone&#x3D;public --remove-port&#x3D;100-500&#x2F;tcp --permanent</span><br><span class="line">firewall-cmd --reload</span><br></pre></td></tr></table></figure><h2 id="五、开放或限制IP"><a href="#五、开放或限制IP" class="headerlink" title="五、开放或限制IP"></a>五、开放或限制IP</h2><p>1.限制IP地址访问<br>比如限制IP为192.168.0.200的地址禁止访问80端口即禁止访问机器</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">firewall-cmd --permanent --add-rich-rule&#x3D;&quot;rule family&#x3D;&quot;ipv4&quot; source address&#x3D;&quot;192.168.0.200&quot; port protocol&#x3D;&quot;tcp&quot; port&#x3D;&quot;80&quot; reject&quot;</span><br></pre></td></tr></table></figure><p>重新载入一下防火墙设置，使设置生效</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">firewall-cmd --reload</span><br></pre></td></tr></table></figure><p>查看已经设置的规则</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">firewall-cmd --zone&#x3D;public --list-rich-rules</span><br></pre></td></tr></table></figure><p>2.解除IP地址限制<br>解除刚才被限制的192.168.0.200</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">firewall-cmd --permanent --add-rich-rule&#x3D;&quot;rule family&#x3D;&quot;ipv4&quot; source address&#x3D;&quot;192.168.0.200&quot; port protocol&#x3D;&quot;tcp&quot; port&#x3D;&quot;80&quot; accept&quot;</span><br></pre></td></tr></table></figure><p>重新载入一下防火墙设置，使设置生效</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">firewall-cmd --reload</span><br></pre></td></tr></table></figure><p>再查看规则设置发现已经没有192.168.0.200的限制了</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">firewall-cmd --zone&#x3D;public --list-rich-rules</span><br></pre></td></tr></table></figure><p>如设置未生效，可尝试直接编辑规则文件，删掉原来的设置规则，重新载入一下防火墙即可</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vi &#x2F;etc&#x2F;firewalld&#x2F;zones&#x2F;public.xml</span><br></pre></td></tr></table></figure><p>3.限制IP地址段<br>如我们需要限制10.0.0.0-10.0.0.255这一整个段的IP，禁止他们访问</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">firewall-cmd --permanent --add-rich-rule&#x3D;&quot;rule family&#x3D;&quot;ipv4&quot; source address&#x3D;&quot;10.0.0.0&#x2F;24&quot; port protocol&#x3D;&quot;tcp&quot; port&#x3D;&quot;80&quot; reject&quot;</span><br></pre></td></tr></table></figure><p>其中10.0.0.0/24表示为从10.0.0.0这个IP开始，24代表子网掩码为255.255.255.0，共包含256个地址，即从0-255共256个IP，即正好限制了这一整段的IP地址，具体的设置规则可参考下表</p><p>重新载入一下防火墙设置，使设置生效</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">firewall-cmd --reload</span><br></pre></td></tr></table></figure><p>查看规则，确认是否生效</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">firewall-cmd --zone&#x3D;public --list-rich-rules</span><br></pre></td></tr></table></figure><p>同理，打开限制为</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">firewall-cmd --permanent --add-rich-rule&#x3D;&quot;rule family&#x3D;&quot;ipv4&quot; source address&#x3D;&quot;10.0.0.0&#x2F;24&quot; port protocol&#x3D;&quot;tcp&quot; port&#x3D;&quot;80&quot; accept&quot;</span><br><span class="line">firewall-cmd --reload</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;一、查看防火墙状态&quot;&gt;&lt;a href=&quot;#一、查看防火墙状态&quot; class=&quot;headerlink&quot; title=&quot;一、查看防火墙状态&quot;&gt;&lt;/a&gt;一、查看防火墙状态&lt;/h2&gt;&lt;p&gt;&lt;strong&gt;firewalld的基本使用&lt;/strong&gt;&lt;br&gt;&lt;strong&gt;systemctl是CentOS7的服务管理工具中主要的工具，它融合之前service和chkconfig的功能于一体&lt;/strong&gt;&lt;br&gt;启动：&lt;/p&gt;
&lt;figure class=&quot;highlight sh&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;systemctl start firewalld&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
    
    </summary>
    
    
      <category term="Linux" scheme="https://www.rootfw.com/categories/Linux/"/>
    
      <category term="centos7" scheme="https://www.rootfw.com/categories/Linux/centos7/"/>
    
    
      <category term="Linux" scheme="https://www.rootfw.com/tags/Linux/"/>
    
      <category term="防火墙" scheme="https://www.rootfw.com/tags/%E9%98%B2%E7%81%AB%E5%A2%99/"/>
    
  </entry>
  
  <entry>
    <title>shadowsocks原生部署</title>
    <link href="https://www.rootfw.com/posts/80f65055.html"/>
    <id>https://www.rootfw.com/posts/80f65055.html</id>
    <published>2020-06-27T11:17:37.000Z</published>
    <updated>2020-08-06T11:08:42.790Z</updated>
    
    <content type="html"><![CDATA[<h2 id="一-准备工作"><a href="#一-准备工作" class="headerlink" title="一.准备工作"></a>一.准备工作</h2><p><strong>1.root权限</strong></p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo -i</span><br></pre></td></tr></table></figure><p><strong>2.系统包更新</strong></p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum update</span><br></pre></td></tr></table></figure><a id="more"></a><h2 id="二-下载安装pip"><a href="#二-下载安装pip" class="headerlink" title="二.下载安装pip"></a>二.下载安装pip</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">curl <span class="string">"https://bootstrap.pypa.io/get-pip.py"</span> -o <span class="string">"get-pip.py"</span>  <span class="comment">#下载pip</span></span><br><span class="line"></span><br><span class="line">python get-pip.py  <span class="comment">#安装pip</span></span><br></pre></td></tr></table></figure><h2 id="三-安装SS和配置SS参数"><a href="#三-安装SS和配置SS参数" class="headerlink" title="三.安装SS和配置SS参数"></a>三.安装SS和配置SS参数</h2><p><strong>1.安装shadowsocks</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install shadowsocks</span><br></pre></td></tr></table></figure><p><strong>2.root权限输入<code>vi /etc/shadowsocks.json</code> 配置shadowsocks参数，<code>如果不能vi进去可以使用nano或者vim进行配置</code></strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vi /etc/shadowsocks.json</span><br></pre></td></tr></table></figure><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123;         </span><br><span class="line">    <span class="attr">"server"</span>:<span class="string">"0.0.0.0"</span>,</span><br><span class="line">    <span class="attr">"server_port"</span>:<span class="number">8388</span>,</span><br><span class="line">    <span class="attr">"password"</span>:<span class="string">"password"</span>,</span><br><span class="line">    <span class="attr">"method"</span>:<span class="string">"aes-256-cfb"</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="四-创建启动脚本"><a href="#四-创建启动脚本" class="headerlink" title="四.创建启动脚本"></a>四.创建启动脚本</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vi /etc/systemd/system/shadowsocks.service</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[Unit]</span><br><span class="line">Description=Shadowsocks</span><br><span class="line">[Service]</span><br><span class="line">TimeoutStartSec=0</span><br><span class="line">ExecStart=/usr/bin/ssserver -c/etc/shadowsocks.json</span><br><span class="line">[Install]</span><br><span class="line">WantedBy=multi-user.target</span><br></pre></td></tr></table></figure><p><strong>温馨提示：<code>Shadowsocks需要安装libsodium加密库，否则只能使用</code>“aes-256-cfb”<code>无法使用其他加密协议，请执行以下代码：</code></strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">wget https://github.com/jedisct1/libsodium/releases/download/1.0.18-RELEASE/libsodium-1.0.18.tar.gz</span><br><span class="line"></span><br><span class="line">tar xf libsodium-1.0.18.tar.gz &amp;&amp; <span class="built_in">cd</span> libsodium-1.0.18</span><br></pre></td></tr></table></figure><h2 id="五-调试服务"><a href="#五-调试服务" class="headerlink" title="五.调试服务"></a>五.调试服务</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">systemctl <span class="built_in">enable</span> shadowsocks    <span class="comment">#让服务ss服务生效开机启动</span></span><br><span class="line"></span><br><span class="line">systemctl start shadowsocks     <span class="comment">#启动ss</span></span><br><span class="line"></span><br><span class="line">systemctl status shadowsocks -l    <span class="comment">#查看状态</span></span><br></pre></td></tr></table></figure><p>然后自己去安装BBR加速<br>温馨提示：你真的懂吗？对于懂得用ss的朋友来说就是好用，对于不懂得使用ss的朋友来说即使您现在使用的是v2ray或者trojan GFW真要墙你IP也是轻而易举，不管使用任何翻墙软件大部分情况是在于人，在谁的手中使用，shadowsocks一样可以配置NGINX等服务搭配使用，一样可以加CDN不要被一些UP主带坏了节奏，任何问题如果经不起验证都是扯蛋</p>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;一-准备工作&quot;&gt;&lt;a href=&quot;#一-准备工作&quot; class=&quot;headerlink&quot; title=&quot;一.准备工作&quot;&gt;&lt;/a&gt;一.准备工作&lt;/h2&gt;&lt;p&gt;&lt;strong&gt;1.root权限&lt;/strong&gt;&lt;/p&gt;
&lt;figure class=&quot;highlight sh&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;sudo -i&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;p&gt;&lt;strong&gt;2.系统包更新&lt;/strong&gt;&lt;/p&gt;
&lt;figure class=&quot;highlight sh&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;yum update&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
    
    </summary>
    
    
      <category term="科学上网" scheme="https://www.rootfw.com/categories/%E7%A7%91%E5%AD%A6%E4%B8%8A%E7%BD%91/"/>
    
      <category term="SS" scheme="https://www.rootfw.com/categories/%E7%A7%91%E5%AD%A6%E4%B8%8A%E7%BD%91/SS/"/>
    
    
      <category term="SS" scheme="https://www.rootfw.com/tags/SS/"/>
    
      <category term="科学上网" scheme="https://www.rootfw.com/tags/%E7%A7%91%E5%AD%A6%E4%B8%8A%E7%BD%91/"/>
    
  </entry>
  
  <entry>
    <title>V2ray+WebSocket+TLS+Nginx</title>
    <link href="https://www.rootfw.com/posts/54c2b25c.html"/>
    <id>https://www.rootfw.com/posts/54c2b25c.html</id>
    <published>2020-06-16T13:34:25.000Z</published>
    <updated>2020-08-06T11:13:23.142Z</updated>
    
    <content type="html"><![CDATA[<p><strong>centos7系统环境搭建，温馨提示：请使用centos7系统搭建，如果学习能力强可以Google搜索Debian或其他系统搭建方法，只是部分代码不一样而已，V2Ray+WebSocket+TLS+Nginx 前几期视频分别提到过 TLS 和 WebSocket 的配置方法，而本文搭配 Web 服务并同时实现 TLS 和 WebSocket浏览器域名访问自动跳转https有简单前端网页。关于 Web 的软件官方给出Nginx，Caddy 和 Apache 三个例子，三选一即可</strong></p><h3 id="一-安装前准备"><a href="#一-安装前准备" class="headerlink" title="一.安装前准备"></a>一.安装前准备</h3><a id="more"></a><p><strong>1.更新服务器，大概几分钟左右耐心等待</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum update -y</span><br></pre></td></tr></table></figure><p><strong>2.把VPS服务器同步本地时间及时区（温馨提示：如果你在国外请同步所在国家时区）</strong><br>Centos7系统同步时间如下：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">date -R               //查看服务器时间</span><br><span class="line">timedatectl <span class="built_in">set</span>-local-rtc 1</span><br><span class="line">timedatectl <span class="built_in">set</span>-timezone Asia/Shanghai</span><br><span class="line">date -R               //查看服务器时间</span><br></pre></td></tr></table></figure><p>Debian系统同步时间如下：<br> <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">date -R                //查看服务器时间</span><br><span class="line">rm -rf /etc/localtime</span><br><span class="line">cp /usr/share/zoneinfo/Asia/Shanghai /etc/localtime</span><br><span class="line">date -R               //查看服务器时间</span><br></pre></td></tr></table></figure></p><p><strong>2.安装bbr（可选择安装了v2ray以后在安装）</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">centos7系统</span><br><span class="line">yum -y install wget</span><br><span class="line">wget <span class="string">"https://github.com/chiakge/Linux-NetSpeed/raw/master/tcp.sh"</span> &amp;&amp; chmod +x tcp.sh &amp;&amp; ./tcp.sh </span><br><span class="line"></span><br><span class="line">debian系统  请确定服务器已经安装了wget 如没有按照请先执行这条代码 apt-get install wget</span><br><span class="line">wget --no-check-certificate -O tcp.sh https://github.com/cx9208/Linux-NetSpeed/raw/master/tcp.sh &amp;&amp; chmod +x tcp.sh &amp;&amp; ./tcp.sh</span><br></pre></td></tr></table></figure><h3 id="二-安装v2ray官方代码-（老的官方脚本）"><a href="#二-安装v2ray官方代码-（老的官方脚本）" class="headerlink" title="二.安装v2ray官方代码 （老的官方脚本）"></a>二.安装v2ray官方代码 （老的官方脚本）</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bash &lt;(curl -L -s https://install.direct/go.sh)</span><br></pre></td></tr></table></figure><p>安装成功后执行 <strong>vi /etc/v2ray/config.json</strong> 长按键盘D键删所有代码，在输入键盘Ins键进入可编辑状态，复制以下代码后 黏贴到配置中按键盘Esc键，在同时按键盘<strong>shift+：输入wq保存退出</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line">//复制以下代码</span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">"log"</span> : &#123;</span><br><span class="line">    <span class="string">"access"</span>: <span class="string">"/var/log/v2ray/access.log"</span>,</span><br><span class="line">    <span class="string">"error"</span>: <span class="string">"/var/log/v2ray/error.log"</span>,</span><br><span class="line">    <span class="string">"loglevel"</span>: <span class="string">"warning"</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="string">"inbound"</span>: &#123;</span><br><span class="line">    <span class="string">"port"</span>: 9000, //重点(此端口与nginx配置保持一致)</span><br><span class="line">    <span class="string">"listen"</span>: <span class="string">"127.0.0.1"</span>, //重点(此端口与nginx配置保持一致)</span><br><span class="line">    <span class="string">"protocol"</span>: <span class="string">"vmess"</span>,</span><br><span class="line">    <span class="string">"settings"</span>: &#123;</span><br><span class="line">      <span class="string">"clients"</span>: [</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="string">"id"</span>: <span class="string">"eb950add-608e-409d-937f-e797324387093z"</span>, //你的UUID，可更改需与客户端保持一致 </span><br><span class="line">          <span class="string">"level"</span>: 1,</span><br><span class="line">          <span class="string">"alterId"</span>: 64 //此ID也需与客户端保持一致（不要设置超过100以上可自定义）</span><br><span class="line">        &#125;</span><br><span class="line">      ]</span><br><span class="line">    &#125;,</span><br><span class="line">   <span class="string">"streamSettings"</span>:&#123;</span><br><span class="line">      <span class="string">"network"</span>: <span class="string">"ws"</span>, //可设置tcp等</span><br><span class="line">      <span class="string">"wsSettings"</span>: &#123;</span><br><span class="line">           <span class="string">"path"</span>: <span class="string">"/v2ray"</span> //与nginx配置相关（可自定义）</span><br><span class="line">      &#125;</span><br><span class="line">   &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="string">"outbound"</span>: &#123;</span><br><span class="line">    <span class="string">"protocol"</span>: <span class="string">"freedom"</span>,</span><br><span class="line">    <span class="string">"settings"</span>: &#123;&#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="string">"outboundDetour"</span>: [</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="string">"protocol"</span>: <span class="string">"blackhole"</span>,</span><br><span class="line">      <span class="string">"settings"</span>: &#123;&#125;,</span><br><span class="line">      <span class="string">"tag"</span>: <span class="string">"blocked"</span></span><br><span class="line">    &#125;</span><br><span class="line">  ],</span><br><span class="line">  <span class="string">"routing"</span>: &#123;</span><br><span class="line">    <span class="string">"strategy"</span>: <span class="string">"rules"</span>,</span><br><span class="line">    <span class="string">"settings"</span>: &#123;</span><br><span class="line">      <span class="string">"rules"</span>: [</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="string">"type"</span>: <span class="string">"field"</span>,</span><br><span class="line">          <span class="string">"ip"</span>: [</span><br><span class="line">            <span class="string">"0.0.0.0/8"</span>,</span><br><span class="line">            <span class="string">"10.0.0.0/8"</span>,</span><br><span class="line">            <span class="string">"100.64.0.0/10"</span>,</span><br><span class="line">            <span class="string">"127.0.0.0/8"</span>,</span><br><span class="line">            <span class="string">"169.254.0.0/16"</span>,</span><br><span class="line">            <span class="string">"172.16.0.0/12"</span>,</span><br><span class="line">            <span class="string">"192.0.0.0/24"</span>,</span><br><span class="line">            <span class="string">"192.0.2.0/24"</span>,</span><br><span class="line">            <span class="string">"192.168.0.0/16"</span>,</span><br><span class="line">            <span class="string">"198.18.0.0/15"</span>,</span><br><span class="line">            <span class="string">"198.51.100.0/24"</span>,</span><br><span class="line">            <span class="string">"203.0.113.0/24"</span>,</span><br><span class="line">            <span class="string">"::1/128"</span>,</span><br><span class="line">            <span class="string">"fc00::/7"</span>,</span><br><span class="line">            <span class="string">"fe80::/10"</span></span><br><span class="line">          ],</span><br><span class="line">          <span class="string">"outboundTag"</span>: <span class="string">"blocked"</span></span><br><span class="line">        &#125;</span><br><span class="line">      ]</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">你可以输入  service v2ray restart  在输入  service v2ray status -l <span class="comment">#看看是否运行成功</span></span><br><span class="line">service v2ray start|stop|status|reload|restart|force-reload    <span class="comment">#调试 V2Ray 的运行代码</span></span><br></pre></td></tr></table></figure><p>打开 80（HTTP）和 443（HTTPS）端口(如果看过我前几期视频，确定防火墙规则设置好了，谷歌云可以忽略。其他品牌服务器请确认已经开启了80和443端口如果没有可尝试下面代码操作或者服务器网页端<br>开启<code>http80端口</code>和<code>https 443端口</code>)</p><p>也可以通过下面的命令来打开这两个端口:请自行开启防火墙开机启动</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo firewall-cmd --permanent --zone=public --add-service=http</span><br><span class="line">sudo firewall-cmd --permanent --zone=public --add-service=https</span><br><span class="line">sudo firewall-cmd --reload</span><br></pre></td></tr></table></figure><h3 id="三-安装NGINX"><a href="#三-安装NGINX" class="headerlink" title="三.安装NGINX"></a>三.安装NGINX</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#安装 EPEL 仓库（谷歌云忽略此步骤，如果你是使用其他品牌vps服务器如果没有安装EPEL请先安装）</span></span><br><span class="line">sudo yum install epel-release</span><br><span class="line"></span><br><span class="line"><span class="comment">#安装 Nginx  【 yum remove nginx 如果想删除nginx卸载命令 】</span></span><br><span class="line">sudo yum install nginx</span><br><span class="line"></span><br><span class="line">sudo systemctl <span class="built_in">enable</span> nginx.service         <span class="comment">#设置开机启动Nginx</span></span><br><span class="line"></span><br><span class="line">sudo systemctl start nginx.service          <span class="comment">#启动Nginx服务</span></span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">调试代码如下：</span><br><span class="line">sudo systemctl start nginx.service                //开启 Nginx</span><br><span class="line">sudo systemctl stop nginx.service                //停止 Nginx</span><br><span class="line">sudo systemctl status -l nginx.service          //查看 Nginx运行状态</span><br><span class="line">sudo systemctl restart nginx.service            //重新启动 Nginx</span><br><span class="line">sudo systemctl <span class="built_in">disable</span> nginx.service           //取消开机启动 Nginx</span><br><span class="line">sudo systemctl reload nginx.service           //重载Nginx (如更改Nginx配置需要重新载入数据)</span><br><span class="line">sudo systemctl <span class="built_in">enable</span> nginx.service            //开机启动</span><br><span class="line">     </span><br><span class="line">     </span><br><span class="line">调试代码如下： Nginx调试也可以不需要代码后面添加 **.service** 请先**sudo systemctl start nginx.service**</span><br><span class="line">和**sudo systemctl <span class="built_in">enable</span> nginx.service** 然后在通过下面代码也可以调试.</span><br><span class="line"></span><br><span class="line">sudo systemctl start nginx              //开启 Nginx</span><br><span class="line">sudo systemctl stop nginx              //停止 Nginx</span><br><span class="line">sudo systemctl status -l nginx        //查看 Nginx运行状态</span><br><span class="line">sudo systemctl restart nginx             //重新启动 Nginx</span><br><span class="line">sudo systemctl <span class="built_in">disable</span> nginx           //取消开机启动 Nginx</span><br><span class="line">sudo systemctl reload nginx          //重载Nginx (如更改Nginx配置需要重新载入数据)</span><br><span class="line">sudo systemctl <span class="built_in">enable</span> nginx          //开机启动</span><br></pre></td></tr></table></figure><p>通过以上方式安装的 Nginx，所有相关的配置文件都在 /etc/nginx/ 目录中<br><strong>Nginx 的主配置文件是 /etc/nginx/nginx.conf</strong><br><strong>Nginx 日志文件（access.log 和 error.log ）位于 /var/log/nginx/ 目录中。</strong></p><p>如果在设置完成之后不能成功使用，可能是由于 SElinux 机制(如果你是 CentOS 7 的用户请特别留意SElinux 这一机制)阻止了 Nginx 转发向内网的数据<br>如果是这样的话，在V2Ray的日志里不会有访问信息，在 Nginx 的日志里会出现大量的 “Permission Denied” 字段<br>要解决这一问题需要在终端下键入以下命令：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">setsebool -P httpd_can_network_connect 1    &#x2F;&#x2F;debian忽略</span><br></pre></td></tr></table></figure><p>验证 Nginx 是否成功启动，可以在浏览器中打开 <a href="http://YOUR_IP">http://YOUR_IP</a>   注意：打开则显示centos网页 但是提示不安全网站没开启ssl加密https</p><h3 id="四-生成证书"><a href="#四-生成证书" class="headerlink" title="四.生成证书"></a>四.生成证书</h3><p><strong>如果你已经有其他证书可忽略，把证书和密钥放到服务器指定目录下，只需在Nginx 中指定 证书和密钥路径。申请证书方法太多可通过安装acme.sh工具生成证书或其他方法生成证书，可Google搜索。</strong></p><p><strong>1.安装acem.sh证书生成工具，以下提供3种方法安装，选其中任意一种方法安装证书工具 (温馨提示：自动升级acme.sh在root下输入 acme.sh upgrade)</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">curl  https://get.acme.sh | sh   // 如提示安装失败 请先安装curl 输入 yum -y install curl</span><br><span class="line">wget -O -  https://get.acme.sh | sh     //如提示安装失败请（先安装wget）输入 yum -y install wget 已经安装了忽略</span><br><span class="line">git <span class="built_in">clone</span> https://github.com/acmesh-official/acme.sh.git   // 如提示安装失败 先安装git 已经安装了的忽略 输入 yum install git</span><br><span class="line"><span class="built_in">cd</span> ./acme.sh</span><br><span class="line">./acme.sh --install</span><br></pre></td></tr></table></figure><p>通过以上代码安装acme.sh提示红色抱错 你可以按实际相关情况而定安装依赖 比如安装socat 或者 netcat<br>       <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">centos7  yum install socat  <span class="comment">#通过80端口生成证书的依赖</span></span><br><span class="line">centos7  yum isntall netcat</span><br><span class="line"></span><br><span class="line">debian  apt-get install openssl cron socat curl</span><br><span class="line">debian  apt-get -y install netcat</span><br><span class="line"></span><br><span class="line">安装成功后执行 <span class="built_in">source</span> ~/.bashrc  以确保脚本所设置的命令别名生效</span><br></pre></td></tr></table></figure></p><p><strong>2.生成证书 路径为/root/.acme.sh文件下 安装好后可自行查看</strong><br>  <strong>温馨提示：通过acme.sh生成证书有多种方法：</strong><br>  例如—自动DNS API集成 如：cloudflare DNS API 令牌 和 使用全局API密钥 acme.sh支持大多数dns生成证书<br>  例如—使用DNS手动模式，等多种其他安装方法，如果你是个好学的人可Google </p><p>  生成证书如下：本期视频只用指定端口 生成证书 <strong>推荐使用443端口生成证书</strong> （一般用单域名足以，毕竟是翻墙用无需搞那么多花里胡哨的多域，比如：主域baidu.com那么不建议使用<a href="http://www.baidu.com,因为是翻墙的前端web请自定义比如tw.baidu.com,前缀tw可以自定义请不要写太长，主域baidu.com和二级www.baidu.com可以备用你懂的）">www.baidu.com,因为是翻墙的前端web请自定义比如tw.baidu.com,前缀tw可以自定义请不要写太长，主域baidu.com和二级www.baidu.com可以备用你懂的）</a></p><p><strong>1.通过侦听80端口申请证书，如果80端口被占用,请使用443端口,请确保这些端口都打开了</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo ~&#x2F;.acme.sh&#x2F;acme.sh --issue -d 域名 --standalone -k ec-256</span><br></pre></td></tr></table></figure><p><strong>2.如果您80在反向代理或负载均衡器后面使用非标准端口，则可以–httpport用来指定端口</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo ~&#x2F;.acme.sh&#x2F;acme.sh --issue -d 域名 --standalone --httpport 端口</span><br></pre></td></tr></table></figure><p><strong>3.侦听443端口以颁发证书，请确保443端口开启</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo ~&#x2F;.acme.sh&#x2F;acme.sh --issue -d 域名 --alpn -k ec-256</span><br></pre></td></tr></table></figure><p><strong>4.如果您443在反向代理或负载均衡器后面使用非标准端口，则可以–tlsport用来指定端口</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo ~&#x2F;.acme.sh&#x2F;acme.sh --issue -d 域名 --alpn --tlsport 端口</span><br></pre></td></tr></table></figure><p>  <strong>-k 表示密钥长度，后面的值可以是 ec-256 、ec-384、2048、3072、4096、8192，带有 ec 表示生成的是 ECC 证书，没有则是 RSA 证书。在安全性上 256 位的 ECC 证书等同于 3072 位的 RSA 证书</strong></p><h3 id="五-把证书和密钥安装到指定路径-etc-v2ray-（路径可自定义）"><a href="#五-把证书和密钥安装到指定路径-etc-v2ray-（路径可自定义）" class="headerlink" title="五.把证书和密钥安装到指定路径 /etc/v2ray （路径可自定义）"></a>五.把证书和密钥安装到指定路径 /etc/v2ray （路径可自定义）</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ecc 安装代码 sudo ~&#x2F;.acme.sh&#x2F;acme.sh --installcert -d 域名 --fullchainpath &#x2F;etc&#x2F;v2ray&#x2F;v2ray.crt --keypath &#x2F;etc&#x2F;v2ray&#x2F;v2ray.key --ecc</span><br><span class="line"></span><br><span class="line">rsa 安装代码 sudo ~&#x2F;.acme.sh&#x2F;acme.sh --installcert -d 域名 --fullchainpath &#x2F;etc&#x2F;v2ray&#x2F;v2ray.crt --keypath &#x2F;etc&#x2F;v2ray&#x2F;v2ray.key</span><br></pre></td></tr></table></figure><h3 id="六-配置NGINX-conf"><a href="#六-配置NGINX-conf" class="headerlink" title="六.配置NGINX *.conf"></a>六.配置NGINX *.conf</h3><p><strong>vi /etc/nginx/nginx.conf  #进入编辑配置文件：长按键盘上D键删除所有配置信息，再按键盘Ins键进入编辑模式复制如下代码黏贴到配置中编辑，填写对应自己的配置信息后。最后同时按键盘上 shift+: 键，在输入wq保存退出</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line">user nginx;</span><br><span class="line">worker_processes auto;</span><br><span class="line">error_log /var/<span class="built_in">log</span>/nginx/error.log;</span><br><span class="line">pid /run/nginx.pid;</span><br><span class="line"></span><br><span class="line">include /usr/share/nginx/modules/*.conf;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">events &#123;</span><br><span class="line">    worker_connections 1024;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">http &#123;</span><br><span class="line">    log_format  main  <span class="string">'$remote_addr - $remote_user [$time_local] "$request" '</span></span><br><span class="line">                      <span class="string">'$status $body_bytes_sent "$http_referer" '</span></span><br><span class="line">                      <span class="string">'"$http_user_agent" "$http_x_forwarded_for"'</span>;</span><br><span class="line"></span><br><span class="line">   </span><br><span class="line">    access_log  /var/<span class="built_in">log</span>/nginx/access.log  main;</span><br><span class="line"></span><br><span class="line">    sendfile            on;</span><br><span class="line">    tcp_nopush          on;</span><br><span class="line">    tcp_nodelay         on;</span><br><span class="line">    keepalive_timeout   65;</span><br><span class="line">    types_hash_max_size 2048;</span><br><span class="line"></span><br><span class="line">    include  /etc/nginx/mime.types;</span><br><span class="line">    default_type application/octet-stream;</span><br><span class="line">    include /etc/nginx/conf.d/*.conf;</span><br><span class="line"></span><br><span class="line">server &#123;</span><br><span class="line">    listen 80;</span><br><span class="line">    server_name 域名;</span><br><span class="line">    rewrite ^/(.*) https://域名<span class="variable">$1</span> permanent; <span class="comment">#填写自己域名</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">    server <span class="comment">#关键代码</span></span><br><span class="line">&#123; </span><br><span class="line">    <span class="comment"># SSL configuration</span></span><br><span class="line">    listen 443 ssl http2 default_server;</span><br><span class="line">    listen [::]:443 ssl http2 default_server;</span><br><span class="line">    ssl_certificate /路径/*.pem; <span class="comment">#你的ssl证书*.crt 或者 *.pem都可以</span></span><br><span class="line">    ssl_certificate_key /路径/*.key; <span class="comment">#你的ssl key</span></span><br><span class="line">    ssl_ciphers EECDH+CHACHA20:EECDH+CHACHA20-draft:EECDH+ECDSA+AES128:EECDH+aRSA+AES128:RSA+AES128:EECDH+ECDSA+AES256:EECDH+aRSA+AES256:RSA+AES256:EECDH+ECDSA+3DES:EECDH+aRSA+3DES:RSA+3DES:!MD5;  <span class="comment">#套件RSA和ecc不一样在下面我会分别给出</span></span><br><span class="line">    ssl_protocols TLSv1.1 TLSv1.2 TLSv1.3;</span><br><span class="line">    root /usr/share/nginx/html; <span class="comment">#网页路径，这里也可以放你们自己的html网站替换下就可以了</span></span><br><span class="line">    server_name 域名; <span class="comment">#你的服务器域名</span></span><br><span class="line"> </span><br><span class="line">    location /ray &#123; <span class="comment">#/ray 切记路径需要和v2ray服务器端和客户端保持一致 可自定义名字</span></span><br><span class="line">    proxy_redirect off;</span><br><span class="line">    proxy_pass http://127.0.0.1:端口; <span class="comment">#此IP地址和端口需要和v2ray服务器端配置保持一致，</span></span><br><span class="line">    proxy_http_version 1.1;</span><br><span class="line">    proxy_set_header Upgrade <span class="variable">$http_upgrade</span>;</span><br><span class="line">    proxy_set_header Connection <span class="string">"upgrade"</span>;</span><br><span class="line">    proxy_set_header Host <span class="variable">$http_host</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>套件如下：</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ECDHE-RSA-AES256-GCM-SHA512:DHE-RSA-AES256-GCM-SHA512:ECDHE-RSA-AES256-GCM-SHA384:DHE-RSA-AES256-GCM-SHA384:ECDHE-RSA-AES256-SHA384;   #RSA套件</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">EECDH+CHACHA20:EECDH+CHACHA20-draft:EECDH+ECDSA+AES128:EECDH+aRSA+AES128:RSA+AES128:EECDH+ECDSA+AES256:EECDH+aRSA+AES256:RSA+AES256:EECDH+ECDSA+3DES:EECDH+aRSA+3DES:RSA+3DES:!MD5;  <span class="comment">#Ecc套件</span></span><br></pre></td></tr></table></figure><p><strong>修改 Nginx 配置后，请务必重新加载配置  输入 sudo systemctl reload nginx.service   #必须这样操作</strong></p><p>查询是否开启ssl 打开网站<a href="https://myssl.com/ssl.html输入自己域名，端口输入443">https://myssl.com/ssl.html输入自己域名，端口输入443</a> 或者 打开<a href="https://www.ssllabs.com/ssltest/index.html">https://www.ssllabs.com/ssltest/index.html</a> 查询 ，也可以google搜索关键字ssl查询，很多网站可以查询，评分是否到达A级别</p><p><strong>温馨提示：通过acme.sh工具生成证书请使用443端口 代码如下：sudo ~/.acme.sh/acme.sh –issue -d 域名 –alpn -k ec-256 （侦听443端口以颁发证书，请确保443端口开启 按文章流程操作80端口生成证书时会提示端口占用，当然如果你想简单点可以通过已有购买的证书或者通过宝塔申请的或者其他证书，把密钥和证书直接复制拷贝到服务器指定路径下，在配置nginx指向证书和路径。部分免费证书会缺少CA证书那么在网站ssl评分就会大打折扣，解决办法是重新把CA证书添加下就可以了</strong></p><p><strong>通过在浏览器输入自己域名查询是否发现网站加了一把锁🔒开启了https， 且网站域名ssl评分到达A 如果是，恭喜你搭建成功.如果你已经学会了那么接下来的课程会越来越有意思.</strong></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;strong&gt;centos7系统环境搭建，温馨提示：请使用centos7系统搭建，如果学习能力强可以Google搜索Debian或其他系统搭建方法，只是部分代码不一样而已，V2Ray+WebSocket+TLS+Nginx 前几期视频分别提到过 TLS 和 WebSocket 的配置方法，而本文搭配 Web 服务并同时实现 TLS 和 WebSocket浏览器域名访问自动跳转https有简单前端网页。关于 Web 的软件官方给出Nginx，Caddy 和 Apache 三个例子，三选一即可&lt;/strong&gt;&lt;/p&gt;
&lt;h3 id=&quot;一-安装前准备&quot;&gt;&lt;a href=&quot;#一-安装前准备&quot; class=&quot;headerlink&quot; title=&quot;一.安装前准备&quot;&gt;&lt;/a&gt;一.安装前准备&lt;/h3&gt;
    
    </summary>
    
    
      <category term="科学上网" scheme="https://www.rootfw.com/categories/%E7%A7%91%E5%AD%A6%E4%B8%8A%E7%BD%91/"/>
    
      <category term="v2ray" scheme="https://www.rootfw.com/categories/%E7%A7%91%E5%AD%A6%E4%B8%8A%E7%BD%91/v2ray/"/>
    
    
      <category term="v2ray" scheme="https://www.rootfw.com/tags/v2ray/"/>
    
  </entry>
  
  <entry>
    <title>v2ray定时重启服务crontab</title>
    <link href="https://www.rootfw.com/posts/a8ffa798.html"/>
    <id>https://www.rootfw.com/posts/a8ffa798.html</id>
    <published>2020-06-16T09:40:18.000Z</published>
    <updated>2020-08-08T08:18:27.353Z</updated>
    
    <content type="html"><![CDATA[<h3 id="1-服务器同步本地时间"><a href="#1-服务器同步本地时间" class="headerlink" title="1.服务器同步本地时间"></a>1.服务器同步本地时间</h3><p><strong>以下centos7同步时间选择其中一种</strong><br>方法一.校准时间同步本地时间  date -R 查看vps时间</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">sudo -i   <span class="comment">#root权限</span></span><br><span class="line">yum -y install ntp ntpdate   <span class="comment">#安装ntpdate工具</span></span><br><span class="line">ntpdate cn.pool.ntp.org     <span class="comment">#设置系统时间与本地网络时间同步</span></span><br><span class="line">hwclock --systohc      <span class="comment">#将系统时间写入硬件时间</span></span><br></pre></td></tr></table></figure><a id="more"></a><p>方法二.校准时间同步    date -R 查看vps时间</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">yum install ntp            //安装ntp服务</span><br><span class="line">systemctl <span class="built_in">enable</span> ntpd      //开机启动服务</span><br><span class="line">systemctl start ntpd       //启动服务</span><br><span class="line">timedatectl <span class="built_in">set</span>-timezone Asia/Shanghai    //更改时区</span><br><span class="line">timedatectl <span class="built_in">set</span>-ntp yes        //启用ntp同步</span><br><span class="line">ntpq -p                   //同步时间</span><br></pre></td></tr></table></figure><p>方法三.校准时间同步上海时间时区   date -R 查看vps时间</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">date -R               //查看服务器时间</span><br><span class="line">timedatectl <span class="built_in">set</span>-local-rtc 1</span><br><span class="line">timedatectl <span class="built_in">set</span>-timezone Asia/Shanghai</span><br><span class="line">date -R               //查看服务器时间</span><br></pre></td></tr></table></figure><p>Debian系统同步时间如下：<br> <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">date -R                //查看服务器时间</span><br><span class="line">rm -rf /etc/localtime</span><br><span class="line">cp /usr/share/zoneinfo/Asia/Shanghai /etc/localtime</span><br><span class="line">date -R               //查看服务器时间</span><br></pre></td></tr></table></figure></p><h3 id="2-crontab服务"><a href="#2-crontab服务" class="headerlink" title="2.crontab服务"></a>2.crontab服务</h3><p>1.开启crontab,如果提示错误需要安装crontab,则输入代码无任何提示表示已经开启</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/sbin/service crond start</span><br></pre></td></tr></table></figure><p>2.输入提示绿色返回值证明已经安装并且开启</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/sbin/service crond status        <span class="comment">#输入提示绿色返回值证明已经安装并且开启</span></span><br></pre></td></tr></table></figure><p>3.安装crontab：(有些系统没有安装crontab则需要安装,如果系统本身已经安装了请跳过这一步骤)</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install crontabs    <span class="comment">#安装crontab</span></span><br></pre></td></tr></table></figure><h3 id="服务操作说明："><a href="#服务操作说明：" class="headerlink" title="服务操作说明："></a>服务操作说明：</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">/sbin/service crond start               <span class="comment">#启动服务</span></span><br><span class="line">/sbin/service crond stop              <span class="comment">#关闭服务</span></span><br><span class="line">/sbin/service crond restart            <span class="comment">#重启服务</span></span><br><span class="line">/sbin/service crond reload             <span class="comment">#重新载入配置</span></span><br><span class="line">/sbin/service crond status            <span class="comment">#查看crond是否正常运行</span></span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/v2ray/config.json     <span class="comment">#进入配置文件信息</span></span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">"log"</span>: &#123;</span><br><span class="line">    <span class="string">"loglevel"</span>: <span class="string">"warning"</span>,    //可用info和debug和error和warning和none等5种模式</span><br><span class="line">    <span class="string">"access"</span>: <span class="string">"/var/log/v2ray/access.log"</span>,    // 这是路径 </span><br><span class="line">    <span class="string">"error"</span>: <span class="string">"/var/log/v2ray/error.log"</span>     // 这是路径 </span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="string">"inbounds"</span>: [</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="string">"port"</span>: 16823,   //端口自定义</span><br><span class="line">      <span class="string">"protocol"</span>: <span class="string">"vmess"</span>,   </span><br><span class="line">      <span class="string">"settings"</span>: &#123;</span><br><span class="line">        <span class="string">"clients"</span>: [</span><br><span class="line">          &#123;</span><br><span class="line">            <span class="string">"id"</span>: <span class="string">"b831381d-6324-4d53-ad4f-8cda48b30811"</span>,   //uuid自定义</span><br><span class="line">            <span class="string">"alterId"</span>: 64   //额外ID自定义</span><br><span class="line">          &#125;</span><br><span class="line">        ]</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  ],</span><br><span class="line">  <span class="string">"outbounds"</span>: [</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="string">"protocol"</span>: <span class="string">"freedom"</span>,  </span><br><span class="line">      <span class="string">"settings"</span>: &#123;&#125;</span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>5.<strong>crontab -e</strong><br>输入i键,复制以下代码ctrl+c,黏贴ctrl+v然后输入shift+:在输入wq保存并且退出加入计划任务,可自定义添加需要的功能</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">*/<span class="number">1</span> * * * * date &gt;&gt; ~/a.log <span class="number">2</span>&gt;&amp;<span class="number">1</span></span><br><span class="line">*/<span class="number">1</span> * * * * sudo journalctl -b -u v2ray &gt;&gt; ~/a.log <span class="number">2</span>&gt;&amp;<span class="number">1</span></span><br><span class="line">*/<span class="number">1</span> * * * * cat /<span class="keyword">var</span>/log/v2ray/access.log &gt;&gt; ~/c.log <span class="number">2</span>&gt;&amp;<span class="number">1</span></span><br><span class="line">*/<span class="number">1</span> * * * * cat /<span class="keyword">var</span>/log/v2ray/error.log &gt;&gt; ~/b.log <span class="number">2</span>&gt;&amp;<span class="number">1</span></span><br><span class="line">*/<span class="number">1</span> * * * * /bin/systemctl restart v2ray.service &gt;&gt; ~/a.log <span class="number">2</span>&gt;&amp;<span class="number">1</span></span><br></pre></td></tr></table></figure><h3 id="以上脚本可自行编写多功能脚本"><a href="#以上脚本可自行编写多功能脚本" class="headerlink" title="以上脚本可自行编写多功能脚本"></a>以上脚本可自行编写多功能脚本</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br></pre></td><td class="code"><pre><span class="line">crontab -l                <span class="comment">#查看已经添加的crontab任务</span></span><br><span class="line"></span><br><span class="line">tail或者(cat) ~/a.log或者~/b.log  <span class="comment">#查看最近10条日志</span></span><br><span class="line"></span><br><span class="line">more /root/a.log或者/b.log       <span class="comment">#查看所有日志</span></span><br><span class="line"></span><br><span class="line">tail -f /var/<span class="built_in">log</span>/cron          <span class="comment">#查看正常运行的crontab计划任务</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#验证crontab计划任务v2ray运行状态</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#可以根据特定字段过滤输出</span></span><br><span class="line">journalctl -b       <span class="comment">#显示本次启动后的所有日志：</span></span><br><span class="line"></span><br><span class="line">journalctl -f     <span class="comment">#查看正在输出的进程</span></span><br><span class="line"></span><br><span class="line">sudo journalctl -b -u v2ray   <span class="comment">#查看brook状态</span></span><br><span class="line"></span><br><span class="line">man 1 journalctl    <span class="comment">#查看所有 journalctl使用方法</span></span><br><span class="line"></span><br><span class="line">rm -rf ~/a.log 或者~/b.log   <span class="comment">#日志清除方法</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#实例1：每1分钟执行一次command</span></span><br><span class="line"></span><br><span class="line">命令：</span><br><span class="line"></span><br><span class="line">* * * * * <span class="built_in">command</span></span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line">实例2：每小时的第3和第15分钟执行</span><br><span class="line"></span><br><span class="line">命令：</span><br><span class="line"></span><br><span class="line">3,15 * * * * <span class="built_in">command</span></span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line"><span class="comment">#实例3：在上午8点到11点的第3和第15分钟执行</span></span><br><span class="line"></span><br><span class="line">命令：</span><br><span class="line"></span><br><span class="line">3,15 8-11 * * * <span class="built_in">command</span></span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line"><span class="comment">#实例4：每隔两天的上午8点到11点的第3和第15分钟执行</span></span><br><span class="line"></span><br><span class="line">命令：</span><br><span class="line"></span><br><span class="line">3,15 8-11 */2 * * <span class="built_in">command</span></span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line"><span class="comment">#实例5：每个星期一的上午8点到11点的第3和第15分钟执行</span></span><br><span class="line"></span><br><span class="line">命令：</span><br><span class="line"></span><br><span class="line">3,15 8-11 * * 1 <span class="built_in">command</span></span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line"><span class="comment">#实例6：每晚的21:30重启smb </span></span><br><span class="line"></span><br><span class="line">命令：</span><br><span class="line"></span><br><span class="line">30 21 * * * /etc/init.d/smb restart</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line"><span class="comment">#实例7：每月1、10、22日的4 : 45重启smb </span></span><br><span class="line"></span><br><span class="line">命令：</span><br><span class="line"></span><br><span class="line">45 4 1,10,22 * * /etc/init.d/smb restart</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line"><span class="comment">#实例8：每周六、周日的1 : 10重启smb</span></span><br><span class="line"></span><br><span class="line">命令：</span><br><span class="line"></span><br><span class="line">10 1 * * 6,0 /etc/init.d/smb restart</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line"><span class="comment">#实例9：每天18 : 00至23 : 00之间每隔30分钟重启smb </span></span><br><span class="line"></span><br><span class="line">命令：</span><br><span class="line"></span><br><span class="line">0,30 18-23 * * * /etc/init.d/smb restart</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line"><span class="comment">#实例10：每星期六的晚上11 : 00 pm重启smb </span></span><br><span class="line"></span><br><span class="line">命令：</span><br><span class="line"></span><br><span class="line">0 23 * * 6 /etc/init.d/smb restart</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line"><span class="comment">#实例11：每一小时重启smb </span></span><br><span class="line"></span><br><span class="line">命令：</span><br><span class="line"></span><br><span class="line">* */1 * * * /etc/init.d/smb restart</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line"><span class="comment">#实例12：晚上11点到早上7点之间，每隔一小时重启smb </span></span><br><span class="line"></span><br><span class="line">命令：</span><br><span class="line"></span><br><span class="line">* 23-7/1 * * * /etc/init.d/smb restart</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line"><span class="comment">#实例13：每月的4号与每周一到周三的11点重启smb </span></span><br><span class="line"></span><br><span class="line">命令：</span><br><span class="line"></span><br><span class="line">0 11 4 * mon-wed /etc/init.d/smb restart</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line">实例14：一月一号的4点重启smb </span><br><span class="line"></span><br><span class="line">命令：</span><br><span class="line"></span><br><span class="line">0 4 1 jan * /etc/init.d/smb restart</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line"><span class="comment">#实例14：每小时执行/etc/cron.hourly目录内的脚本</span></span><br><span class="line"></span><br><span class="line">命令：</span><br><span class="line"></span><br><span class="line">01   *   *   *   *     root run-parts /etc/cron.hourly</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;1-服务器同步本地时间&quot;&gt;&lt;a href=&quot;#1-服务器同步本地时间&quot; class=&quot;headerlink&quot; title=&quot;1.服务器同步本地时间&quot;&gt;&lt;/a&gt;1.服务器同步本地时间&lt;/h3&gt;&lt;p&gt;&lt;strong&gt;以下centos7同步时间选择其中一种&lt;/strong&gt;&lt;br&gt;方法一.校准时间同步本地时间  date -R 查看vps时间&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;sudo -i   &lt;span class=&quot;comment&quot;&gt;#root权限&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;yum -y install ntp ntpdate   &lt;span class=&quot;comment&quot;&gt;#安装ntpdate工具&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;ntpdate cn.pool.ntp.org     &lt;span class=&quot;comment&quot;&gt;#设置系统时间与本地网络时间同步&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;hwclock --systohc      &lt;span class=&quot;comment&quot;&gt;#将系统时间写入硬件时间&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
    
    </summary>
    
    
      <category term="科学上网" scheme="https://www.rootfw.com/categories/%E7%A7%91%E5%AD%A6%E4%B8%8A%E7%BD%91/"/>
    
      <category term="v2ray" scheme="https://www.rootfw.com/categories/%E7%A7%91%E5%AD%A6%E4%B8%8A%E7%BD%91/v2ray/"/>
    
    
      <category term="v2ray" scheme="https://www.rootfw.com/tags/v2ray/"/>
    
  </entry>
  
  <entry>
    <title>SSR多用户脚本搭建</title>
    <link href="https://www.rootfw.com/posts/43d67d1c.html"/>
    <id>https://www.rootfw.com/posts/43d67d1c.html</id>
    <published>2020-06-16T08:20:33.000Z</published>
    <updated>2020-06-16T13:17:15.336Z</updated>
    
    <content type="html"><![CDATA[<h3 id="搭建环境centos7-debian系统"><a href="#搭建环境centos7-debian系统" class="headerlink" title="搭建环境centos7/debian系统"></a>搭建环境centos7/debian系统</h3><p>第一步sudo -i</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo -i</span><br></pre></td></tr></table></figure><p>第二步.ubuntu 系统安装 Curl </p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apt-get update -y &amp;&amp; apt-get install curl -y</span><br></pre></td></tr></table></figure><p>第二步.centos 系统安装 Curl 和 wget</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">yum update -y &amp;&amp; yum install curl -y       </span><br><span class="line">yum install wget</span><br></pre></td></tr></table></figure><p>第三步.安装一键脚本</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget -N --no-check-certificate https://raw.githubusercontent.com/ComeBey/more-user-ssr/master/hasan.sh &amp;&amp; chmod +x hasan.sh &amp;&amp; bash hasan.sh</span><br></pre></td></tr></table></figure><p>第四步:调用命令调试</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bash hasan.sh</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h3 id=&quot;搭建环境centos7-debian系统&quot;&gt;&lt;a href=&quot;#搭建环境centos7-debian系统&quot; class=&quot;headerlink&quot; title=&quot;搭建环境centos7/debian系统&quot;&gt;&lt;/a&gt;搭建环境centos7/debian系统&lt;/h3&gt;&lt;
      
    
    </summary>
    
    
      <category term="科学上网" scheme="https://www.rootfw.com/categories/%E7%A7%91%E5%AD%A6%E4%B8%8A%E7%BD%91/"/>
    
      <category term="SSR" scheme="https://www.rootfw.com/categories/%E7%A7%91%E5%AD%A6%E4%B8%8A%E7%BD%91/SSR/"/>
    
    
      <category term="翻墙" scheme="https://www.rootfw.com/tags/%E7%BF%BB%E5%A2%99/"/>
    
      <category term="SSR" scheme="https://www.rootfw.com/tags/SSR/"/>
    
  </entry>
  
  <entry>
    <title>V2ray+WS+TCP+TLS配置</title>
    <link href="https://www.rootfw.com/posts/231b7e32.html"/>
    <id>https://www.rootfw.com/posts/231b7e32.html</id>
    <published>2020-06-10T05:48:15.000Z</published>
    <updated>2020-08-06T11:15:41.752Z</updated>
    
    <content type="html"><![CDATA[<ol><li>v2ray+WS+TCP+TLS</li><li>安全级别不错</li><li>稳定性不错</li><li>推荐部署</li></ol><p><strong>centos7系统配置和Debian系统配置，acme.sh脚本所有证书将每60天自动更新一次（如果你非要手动更新随意)</strong></p><h3 id="第一步-V2RAY官方脚本搭建"><a href="#第一步-V2RAY官方脚本搭建" class="headerlink" title="第一步.V2RAY官方脚本搭建"></a>第一步.V2RAY官方脚本搭建</h3><p>centos7更新服务器 <strong>yum update -y</strong> (部分系统提示<strong>NO packages marked for update</strong>则无需更新)<br><strong>设置硬件时钟调整为与本地时钟一致, 设置时区为上海 date -R 是查看服务器当前时间</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">date -R</span><br><span class="line">timedatectl <span class="built_in">set</span>-local-rtc 1</span><br><span class="line">timedatectl <span class="built_in">set</span>-timezone Asia/Shanghai</span><br></pre></td></tr></table></figure><a id="more"></a><p>Debian系统同步时间如下：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">date -R</span><br><span class="line">rm -rf /etc/localtime</span><br><span class="line">cp /usr/share/zoneinfo/Asia/Shanghai /etc/localtime</span><br></pre></td></tr></table></figure><h3 id="第二步-安装bbr"><a href="#第二步-安装bbr" class="headerlink" title="第二步.安装bbr"></a>第二步.安装bbr</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#centos7 复制这条代码安装bbr加速如下:</span></span><br><span class="line">yum -y install wget</span><br><span class="line">wget <span class="string">"https://github.com/chiakge/Linux-NetSpeed/raw/master/tcp.sh"</span> &amp;&amp; chmod +x tcp.sh &amp;&amp; ./tcp.sh </span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#debian9 复制这条代码安装bbr加速如下:</span></span><br><span class="line"><span class="comment">#方法一如下：</span></span><br><span class="line">apt-get install wget</span><br><span class="line">wget -N --no-check-certificate https://bit.ly/2VWUksq &amp;&amp; chmod + hasan.sh &amp;&amp; bash hasan.sh</span><br><span class="line"></span><br><span class="line"><span class="comment">#备用代码</span></span><br><span class="line">apt-get install wget</span><br><span class="line">wget -N --no-check-certificate https://raw.githubusercontent.com/ComeBey/bbr/master/hasan.sh &amp;&amp; chmod + hasan.sh &amp;&amp; bash hasan.sh</span><br></pre></td></tr></table></figure><h3 id="第三步-安装v2ray官方代码"><a href="#第三步-安装v2ray官方代码" class="headerlink" title="第三步.安装v2ray官方代码"></a>第三步.安装v2ray官方代码</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">bash &lt;(curl -L -s https://install.direct/go.sh) </span><br><span class="line">vim /etc/v2ray/config.json              <span class="comment">#v2ray配置文件</span></span><br><span class="line">ervice v2ray start|stop|status|reload|restart|force-reload 控制 V2Ray 的运行</span><br></pre></td></tr></table></figure><h3 id="第四步-安装acme-sh"><a href="#第四步-安装acme-sh" class="headerlink" title="第四步.安装acme.sh"></a>第四步.安装acme.sh</h3><p><a href="https://my.freenom.com/免费注册地址">https://my.freenom.com/免费注册地址</a> 当然我们也可以自行购买付费域名<br>证书生成工具 (温馨提示您还可以启用自动升级acme.sh在root下输入 acme.sh upgrade)<br>以下提供3种方法选其中任意一种方法安装证书工具</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">curl  https://get.acme.sh | sh  </span><br><span class="line"><span class="comment">#如提示安装失败 请先安装curl 输入 yum -y install curl 或者 apt-get install curl</span></span><br><span class="line"></span><br><span class="line">wget -O -  https://get.acme.sh | sh  </span><br><span class="line"><span class="comment">#如提示安装失败请（先安装wget）输入 yum -y install wget 或者 apt-get install wget 已经安装了忽略</span></span><br><span class="line"></span><br><span class="line">git <span class="built_in">clone</span> https://github.com/acmesh-official/acme.sh.git</span><br><span class="line"><span class="built_in">cd</span> ./acme.sh</span><br><span class="line">./acme.sh --install　　　　　　</span><br><span class="line"><span class="comment">#如提示安装失败 先安装git 已经安装了的忽略 输入 yum install git 或者 apt-get install git</span></span><br></pre></td></tr></table></figure><p>谷歌云直接安装（如果其他品牌vps也提示 install socat firt也请安装socat）centos7系统执行 yum install socat<br>debian系统执行 apt-get install openssl cron socat curl<br>socat为80端口必须用的依赖来申请证书用，如果您使用443端口申请证书则无需安装socat</p><p><strong>执行这条命令source ~/.bashrc</strong></p><p>安装过程中如果报错请查看面板提示信息，尝试安装acme.sh相关依赖项，比如安装 netcat 或 socat 如果提示报错才安装，不提示报错忽略<br>acme.sh 会安装到 ~/.acme.sh 目录下 （可通过root命令下 输入cd ~/.acme.sh查看，不懂的朋友请忽略继续下一步）</p><h3 id="第五步-acme-sh-生成证书"><a href="#第五步-acme-sh-生成证书" class="headerlink" title="第五步.acme.sh 生成证书"></a>第五步.acme.sh 生成证书</h3><p>以下的命令会临时监听 80 端口，请确保执行该命令前 80 端口没有占用 (80是http端口)<br><del>不推荐使用80端口生成证书</del> 推荐使用443端口生成证书<br>centos7系统 执行 </p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo ~&#x2F;.acme.sh&#x2F;acme.sh --issue -d 域名 --standalone -k ec-256</span><br></pre></td></tr></table></figure><p>Debian系统  执行 </p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bash ~&#x2F;.acme.sh&#x2F;acme.sh --issue -d 域名 --standalone -k ec-256</span><br></pre></td></tr></table></figure><p><strong>以下的命令会临时监听 443 端口，请确保执行该命令前 443 端口没有被占用且服务器443端口已经打开 （443是https端口）</strong></p><p>centos7系统 执行</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo ~&#x2F;.acme.sh&#x2F;acme.sh --issue -d 域名 --alpn -k ec-256</span><br></pre></td></tr></table></figure><p><strong>如果您443在反向代理或负载均衡器后面使用非标准端口，则可以<code>--tlsport</code>用来指定端口</strong></p><p>centos7系统  执行</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo ~&#x2F;.acme.sh&#x2F;acme.sh --issue -d 域名 --alpn --tlsport 端口 -k ec-256</span><br></pre></td></tr></table></figure><p>Debian系统   执行</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bash ~&#x2F;.acme.sh&#x2F;acme.sh --issue -d 域名 --alpn -k ec-256</span><br></pre></td></tr></table></figure><p><strong>如果您443在反向代理或负载均衡器后面使用非标准端口，则可以–tlsport用来指定端口</strong></p><p>Debian系统  执行</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bash ~&#x2F;.acme.sh&#x2F;acme.sh --issue -d 域名 --alpn --tlsport 端口 -k ec-256</span><br></pre></td></tr></table></figure><p>-k 表示密钥长度，后面的值可以是 ec-256 、ec-384、2048、3072、4096、8192，带有 ec 表示生成的是 ECC 证书，没有则是 RSA 证书。在安全性上 256 位的 ECC 证书等同于 3072 位的 RSA 证书</p><h3 id="第六步-证书和密钥安装到指定目录"><a href="#第六步-证书和密钥安装到指定目录" class="headerlink" title="第六步.证书和密钥安装到指定目录"></a>第六步.证书和密钥安装到指定目录</h3><p><strong>/etc/v2ray目录（路径可以自定义，当然也可以默认)</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo ~&#x2F;.acme.sh&#x2F;acme.sh --installcert -d 域名 --fullchainpath &#x2F;etc&#x2F;v2ray&#x2F;v2ray.crt --keypath &#x2F;etc&#x2F;v2ray&#x2F;v2ray.key --ecc   # ecc 安装代码 </span><br><span class="line">sudo ~&#x2F;.acme.sh&#x2F;acme.sh --installcert -d 域名 --fullchainpath &#x2F;etc&#x2F;v2ray&#x2F;v2ray.crt --keypath &#x2F;etc&#x2F;v2ray&#x2F;v2ray.key   #rsa 安装代码</span><br></pre></td></tr></table></figure><h3 id="第七步-配置文件-config-json"><a href="#第七步-配置文件-config-json" class="headerlink" title="第七步.配置文件 config.json"></a>第七步.配置文件 config.json</h3><p><strong>vim /etc/v2ray/config.json</strong></p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"inbounds"</span>: [</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">"port"</span>: <span class="number">443</span>, <span class="comment">// 服务器端口</span></span><br><span class="line">      <span class="attr">"protocol"</span>: <span class="string">"vmess"</span>,    </span><br><span class="line">      <span class="attr">"settings"</span>: &#123;</span><br><span class="line">        <span class="attr">"clients"</span>: [</span><br><span class="line">          &#123;</span><br><span class="line">            <span class="attr">"id"</span>: <span class="string">"23ad6b10-8d1a-40f7-8ad0-e3e35cd38297"</span>,  </span><br><span class="line">            <span class="attr">"alterId"</span>: <span class="number">64</span></span><br><span class="line">          &#125;</span><br><span class="line">        ]</span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="attr">"streamSettings"</span>: &#123;</span><br><span class="line">        <span class="attr">"network"</span>: <span class="string">"tcp"</span>,</span><br><span class="line">        <span class="attr">"security"</span>: <span class="string">"tls"</span>, <span class="comment">// security 要设置为 tls 才会启用 TLS</span></span><br><span class="line">        <span class="attr">"tlsSettings"</span>: &#123;</span><br><span class="line">          <span class="attr">"certificates"</span>: [</span><br><span class="line">            &#123;</span><br><span class="line">              <span class="attr">"certificateFile"</span>: <span class="string">"/etc/v2ray/v2ray.crt"</span>, <span class="comment">// 证书文件</span></span><br><span class="line">              <span class="attr">"keyFile"</span>: <span class="string">"/etc/v2ray/v2ray.key"</span> <span class="comment">// 密钥文件</span></span><br><span class="line">            &#125;</span><br><span class="line">          ]</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  ],</span><br><span class="line">  <span class="attr">"outbounds"</span>: [</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">"protocol"</span>: <span class="string">"freedom"</span>,</span><br><span class="line">      <span class="attr">"settings"</span>: &#123;&#125;</span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>service v2ray start|stop|status|reload|restart|force-reload 控制 V2Ray 的运行</strong></p><h3 id="第八步-验证是否正常开启"><a href="#第八步-验证是否正常开启" class="headerlink" title="第八步.验证是否正常开启"></a>第八步.验证是否正常开启</h3><p>TLS <a href="https://www.ssllabs.com/ssltest/index.html">https://www.ssllabs.com/ssltest/index.html</a></p><p><strong>手动更新证书密钥生成到 /etc/v2ray （温馨提示：视频中我讲错了acme.sh脚本所有证书将每60天自动更新一次，大家无需担心证书到期无法使用）</strong><br>ecc sudo ~/.acme.sh/acme.sh –renew -d 域名 –force –ecc<br>rsa sudo ~/.acme.sh/acme.sh –renew -d 域名 –force –rsa</p><p> 温馨提示：V2Ray 的 TLS 不是伪装或混淆，这是真正的 TLS。因此才需要域名和证书。 WS(WebSocket) 也不是伪装<br> 注意：使用 Qualys SSL Labs’s SSL Server Test 要求使用 443 端口，意味着你服务器配置的 inbound.port 应当是 443</p>]]></content>
    
    <summary type="html">
    
      &lt;ol&gt;
&lt;li&gt;v2ray+WS+TCP+TLS&lt;/li&gt;
&lt;li&gt;安全级别不错&lt;/li&gt;
&lt;li&gt;稳定性不错&lt;/li&gt;
&lt;li&gt;推荐部署&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;strong&gt;centos7系统配置和Debian系统配置，acme.sh脚本所有证书将每60天自动更新一次（如果你非要手动更新随意)&lt;/strong&gt;&lt;/p&gt;
&lt;h3 id=&quot;第一步-V2RAY官方脚本搭建&quot;&gt;&lt;a href=&quot;#第一步-V2RAY官方脚本搭建&quot; class=&quot;headerlink&quot; title=&quot;第一步.V2RAY官方脚本搭建&quot;&gt;&lt;/a&gt;第一步.V2RAY官方脚本搭建&lt;/h3&gt;&lt;p&gt;centos7更新服务器 &lt;strong&gt;yum update -y&lt;/strong&gt; (部分系统提示&lt;strong&gt;NO packages marked for update&lt;/strong&gt;则无需更新)&lt;br&gt;&lt;strong&gt;设置硬件时钟调整为与本地时钟一致, 设置时区为上海 date -R 是查看服务器当前时间&lt;/strong&gt;&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;date -R&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;timedatectl &lt;span class=&quot;built_in&quot;&gt;set&lt;/span&gt;-local-rtc 1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;timedatectl &lt;span class=&quot;built_in&quot;&gt;set&lt;/span&gt;-timezone Asia/Shanghai&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
    
    </summary>
    
    
      <category term="科学上网" scheme="https://www.rootfw.com/categories/%E7%A7%91%E5%AD%A6%E4%B8%8A%E7%BD%91/"/>
    
      <category term="v2ray" scheme="https://www.rootfw.com/categories/%E7%A7%91%E5%AD%A6%E4%B8%8A%E7%BD%91/v2ray/"/>
    
    
      <category term="翻墙" scheme="https://www.rootfw.com/tags/%E7%BF%BB%E5%A2%99/"/>
    
      <category term="v2ray" scheme="https://www.rootfw.com/tags/v2ray/"/>
    
  </entry>
  
  <entry>
    <title>Brook crontab定时重启</title>
    <link href="https://www.rootfw.com/posts/10db3eaa.html"/>
    <id>https://www.rootfw.com/posts/10db3eaa.html</id>
    <published>2020-06-10T04:45:36.000Z</published>
    <updated>2020-08-06T11:06:42.318Z</updated>
    
    <content type="html"><![CDATA[<p>以下同步时间选择其中一种,如果无法同步本地时间请google下(关键字centos7或者centos6或者debian时间同步本地时间等关键字)<br><strong>方法1.校准时间同步本地时间  date -R 查看vps时间 sudo -i root权限进入</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">yum -y install ntp ntpdate   //安装ntpdate工具</span><br><span class="line">ntpdate cn.pool.ntp.org     //设置系统时间与本地网络时间同步</span><br><span class="line">hwclock --systohc          //将系统时间写入硬件时间</span><br></pre></td></tr></table></figure><p><strong>方法2.校准时间同步本地时间  date -R 查看vps时间</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">yum install ntp                //安装ntp服务</span><br><span class="line">systemctl <span class="built_in">enable</span> ntpd              //开机启动服务</span><br><span class="line">systemctl start ntpd              //启动服务</span><br><span class="line">timedatectl <span class="built_in">set</span>-timezone Asia/Shanghai           //更改时区</span><br><span class="line">timedatectl <span class="built_in">set</span>-ntp yes           //启用ntp同步</span><br><span class="line">ntpq -p          //同步时间</span><br></pre></td></tr></table></figure><a id="more"></a><p><strong>crontab服务</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">/sbin/service crond start     (开启crontab无任何提示表示已经开启)</span><br><span class="line">/sbin/service crond status    (查看状态)</span><br></pre></td></tr></table></figure><p>安装crontab：(有些系统没有安装crontab则需要安装,如果系统本身已经安装了请跳过这一步骤)</p><p><strong>yum install crontabs</strong> (安装crontab)</p><h2 id="服务操作说明："><a href="#服务操作说明：" class="headerlink" title="服务操作说明："></a>服务操作说明：</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">/sbin/service crond start  (启动服务)</span><br><span class="line"></span><br><span class="line">/sbin/service crond stop  (关闭服务)</span><br><span class="line"></span><br><span class="line">/sbin/service crond restart  (重启服务)</span><br><span class="line"></span><br><span class="line">/sbin/service crond reload  (重新载入配置 //重新载入配置)</span><br><span class="line"></span><br><span class="line">/sbin/service crond status  (查看crond是否正常运行)</span><br></pre></td></tr></table></figure><p>crontab -e (输入i键,复制以下代码ctrl+c,黏贴ctrl+v到加入计划任务,可自定义添加需要的功能)</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">*/1 * * * * date &gt;&gt; ~/a.log 2&gt;&amp;1 </span><br><span class="line">*/1 * * * * sudo journalctl -b -u brook &gt;&gt; ~/a.log 2&gt;&amp;1</span><br><span class="line">*/1 * * * * /bin/systemctl restart brook.service &gt;&gt; ~/a.log 2&gt;&amp;1</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br></pre></td><td class="code"><pre><span class="line">crontab -l (查看已经添加的crontab任务)</span><br><span class="line">tail ~/a.log 查看最近10条日志</span><br><span class="line">more /root/a.log 查看所有日志</span><br><span class="line">tail -f /var/<span class="built_in">log</span>/cron 查看正常运行的crontab计划任务</span><br><span class="line">验证crontab计划任务brook运行状态</span><br><span class="line">可以根据特定字段过滤输出</span><br><span class="line">journalctl -b   显示本次启动后的所有日志：</span><br><span class="line"></span><br><span class="line">journalctl -f 查看正在输出的进程</span><br><span class="line"></span><br><span class="line">sudo journalctl -b -u brook 查看brook状态</span><br><span class="line"></span><br><span class="line">man 1 journalctl 查看所有 journalctl使用方法</span><br><span class="line"></span><br><span class="line">rm -rf ~/a.log 日志清除方法</span><br><span class="line"></span><br><span class="line">实例1：每1分钟执行一次<span class="built_in">command</span></span><br><span class="line"></span><br><span class="line">命令：</span><br><span class="line"></span><br><span class="line">* * * * * <span class="built_in">command</span></span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line">实例2：每小时的第3和第15分钟执行</span><br><span class="line"></span><br><span class="line">命令：</span><br><span class="line"></span><br><span class="line">3,15 * * * * <span class="built_in">command</span></span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line">实例3：在上午8点到11点的第3和第15分钟执行</span><br><span class="line"></span><br><span class="line">命令：</span><br><span class="line"></span><br><span class="line">3,15 8-11 * * * <span class="built_in">command</span></span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line">实例4：每隔两天的上午8点到11点的第3和第15分钟执行</span><br><span class="line"></span><br><span class="line">命令：</span><br><span class="line"></span><br><span class="line">3,15 8-11 */2 * * <span class="built_in">command</span></span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line">实例5：每个星期一的上午8点到11点的第3和第15分钟执行</span><br><span class="line"></span><br><span class="line">命令：</span><br><span class="line"></span><br><span class="line">3,15 8-11 * * 1 <span class="built_in">command</span></span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line">实例6：每晚的21:30重启smb </span><br><span class="line"></span><br><span class="line">命令：</span><br><span class="line"></span><br><span class="line">30 21 * * * /etc/init.d/smb restart</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line">实例7：每月1、10、22日的4 : 45重启smb </span><br><span class="line"></span><br><span class="line">命令：</span><br><span class="line"></span><br><span class="line">45 4 1,10,22 * * /etc/init.d/smb restart</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line">实例8：每周六、周日的1 : 10重启smb</span><br><span class="line"></span><br><span class="line">命令：</span><br><span class="line"></span><br><span class="line">10 1 * * 6,0 /etc/init.d/smb restart</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line">实例9：每天18 : 00至23 : 00之间每隔30分钟重启smb </span><br><span class="line"></span><br><span class="line">命令：</span><br><span class="line"></span><br><span class="line">0,30 18-23 * * * /etc/init.d/smb restart</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line">实例10：每星期六的晚上11 : 00 pm重启smb </span><br><span class="line"></span><br><span class="line">命令：</span><br><span class="line"></span><br><span class="line">0 23 * * 6 /etc/init.d/smb restart</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line">实例11：每一小时重启smb </span><br><span class="line"></span><br><span class="line">命令：</span><br><span class="line"></span><br><span class="line">* */1 * * * /etc/init.d/smb restart</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line">实例12：晚上11点到早上7点之间，每隔一小时重启smb </span><br><span class="line"></span><br><span class="line">命令：</span><br><span class="line"></span><br><span class="line">* 23-7/1 * * * /etc/init.d/smb restart</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line">实例13：每月的4号与每周一到周三的11点重启smb </span><br><span class="line"></span><br><span class="line">命令：</span><br><span class="line"></span><br><span class="line">0 11 4 * mon-wed /etc/init.d/smb restart</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line">实例14：一月一号的4点重启smb </span><br><span class="line"></span><br><span class="line">命令：</span><br><span class="line"></span><br><span class="line">0 4 1 jan * /etc/init.d/smb restart</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line">实例15：每小时执行/etc/cron.hourly目录内的脚本</span><br><span class="line"></span><br><span class="line">命令：</span><br><span class="line"></span><br><span class="line">01   *   *   *   *     root run-parts /etc/cron.hourly</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;以下同步时间选择其中一种,如果无法同步本地时间请google下(关键字centos7或者centos6或者debian时间同步本地时间等关键字)&lt;br&gt;&lt;strong&gt;方法1.校准时间同步本地时间  date -R 查看vps时间 sudo -i root权限进入&lt;/strong&gt;&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;yum -y install ntp ntpdate   //安装ntpdate工具&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;ntpdate cn.pool.ntp.org     //设置系统时间与本地网络时间同步&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;hwclock --systohc          //将系统时间写入硬件时间&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&lt;strong&gt;方法2.校准时间同步本地时间  date -R 查看vps时间&lt;/strong&gt;&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;yum install ntp                //安装ntp服务&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;systemctl &lt;span class=&quot;built_in&quot;&gt;enable&lt;/span&gt; ntpd              //开机启动服务&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;systemctl start ntpd              //启动服务&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;timedatectl &lt;span class=&quot;built_in&quot;&gt;set&lt;/span&gt;-timezone Asia/Shanghai           //更改时区&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;timedatectl &lt;span class=&quot;built_in&quot;&gt;set&lt;/span&gt;-ntp yes           //启用ntp同步&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;ntpq -p          //同步时间&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
    
    </summary>
    
    
      <category term="科学上网" scheme="https://www.rootfw.com/categories/%E7%A7%91%E5%AD%A6%E4%B8%8A%E7%BD%91/"/>
    
      <category term="Brook" scheme="https://www.rootfw.com/categories/%E7%A7%91%E5%AD%A6%E4%B8%8A%E7%BD%91/Brook/"/>
    
    
      <category term="翻墙" scheme="https://www.rootfw.com/tags/%E7%BF%BB%E5%A2%99/"/>
    
      <category term="Brook" scheme="https://www.rootfw.com/tags/Brook/"/>
    
      <category term="定时重启" scheme="https://www.rootfw.com/tags/%E5%AE%9A%E6%97%B6%E9%87%8D%E5%90%AF/"/>
    
  </entry>
  
  <entry>
    <title>Brook centos7官方脚本搭建</title>
    <link href="https://www.rootfw.com/posts/c695a206.html"/>
    <id>https://www.rootfw.com/posts/c695a206.html</id>
    <published>2020-06-10T01:58:30.000Z</published>
    <updated>2020-08-06T11:05:12.892Z</updated>
    
    <content type="html"><![CDATA[<h3 id="1-更新服务器"><a href="#1-更新服务器" class="headerlink" title="1.更新服务器"></a>1.更新服务器</h3><p>1.输入sudo -i 进来root权限,  可自行选择升级内核,  yum update -y升级内核<br>2.yum install wget 下载wget工具<br>wget <a href="https://github.com/txthinking/brook/releases/download/v20190205/brook">https://github.com/txthinking/brook/releases/download/v20190205/brook</a> 下载brook服务器版本<br>3.输入cp brook /usr/bin  把brook拷贝到bin目录下<br>4.chmod +x /usr/bin/brook 给予当前路径brook可执行权限<br>5.brook -h #查看帮助<br>6.nohup ./brook server -l :80 -p pass1234 &amp;  添加brook端口和密码且让brook在后台运行<br><strong>复制如下代码</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">sudo -i   </span><br><span class="line">yum update -y</span><br><span class="line">yum install wget</span><br><span class="line">wget https://github.com/txthinking/brook/releases/download/v20190205/brook</span><br><span class="line">cp brook /usr/bin</span><br><span class="line">chmod +x /usr/bin/brook</span><br><span class="line">nohup ./brook server -l :80 -p pass1234 &amp;</span><br></pre></td></tr></table></figure><a id="more"></a><h3 id="Brook设置随系统启动"><a href="#Brook设置随系统启动" class="headerlink" title="Brook设置随系统启动"></a>Brook设置随系统启动</h3><p>vi /etc/systemd/system/brook.service        用vi创建brook.service启动脚本</p><p>按” i “进入insert模式,输入脚本如下</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[Unit]</span><br><span class="line">Description &#x3D; This is brook</span><br><span class="line">            </span><br><span class="line">[Service]</span><br><span class="line">ExecStart &#x3D; &#x2F;usr&#x2F;bin&#x2F;.&#x2F;brook server -l :80 -p pass1234</span><br><span class="line">            </span><br><span class="line">[Install]</span><br><span class="line">WantedBy &#x3D; multi-user.target</span><br></pre></td></tr></table></figure><p>按Esc，输入”shift+:”输入wq 回车，保存并退出</p><p>赋予可执行属性并生效： </p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chmod +x &#x2F;etc&#x2F;systemd&#x2F;system&#x2F;brook.service</span><br></pre></td></tr></table></figure><p>开启brook.service 服务  </p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl enable &#x2F;etc&#x2F;systemd&#x2F;system&#x2F;brook.service</span><br></pre></td></tr></table></figure><p>reboot 重启vps </p><h3 id="查看brook服务是否正常运行这台"><a href="#查看brook服务是否正常运行这台" class="headerlink" title="查看brook服务是否正常运行这台"></a>查看brook服务是否正常运行这台</h3><p>如下代码：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">service brook status -l     如果正常启动会返回绿色 active (running)</span><br><span class="line">service brook start         开启brook服务</span><br><span class="line">service brook stop          停止brook运行</span><br><span class="line">service brook restart       重启brook服务</span><br></pre></td></tr></table></figure><p>systemctl list-unit-files 查看brook脚本是否生效 当重新修改brook密码后 我们需重载信息输入systemctl daemon-reload 或者重新启动vps 输入reboot</p>]]></content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;1-更新服务器&quot;&gt;&lt;a href=&quot;#1-更新服务器&quot; class=&quot;headerlink&quot; title=&quot;1.更新服务器&quot;&gt;&lt;/a&gt;1.更新服务器&lt;/h3&gt;&lt;p&gt;1.输入sudo -i 进来root权限,  可自行选择升级内核,  yum update -y升级内核&lt;br&gt;2.yum install wget 下载wget工具&lt;br&gt;wget &lt;a href=&quot;https://github.com/txthinking/brook/releases/download/v20190205/brook&quot;&gt;https://github.com/txthinking/brook/releases/download/v20190205/brook&lt;/a&gt; 下载brook服务器版本&lt;br&gt;3.输入cp brook /usr/bin  把brook拷贝到bin目录下&lt;br&gt;4.chmod +x /usr/bin/brook 给予当前路径brook可执行权限&lt;br&gt;5.brook -h #查看帮助&lt;br&gt;6.nohup ./brook server -l :80 -p pass1234 &amp;amp;  添加brook端口和密码且让brook在后台运行&lt;br&gt;&lt;strong&gt;复制如下代码&lt;/strong&gt;&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;sudo -i   &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;yum update -y&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;yum install wget&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;wget https://github.com/txthinking/brook/releases/download/v20190205/brook&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;cp brook /usr/bin&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;chmod +x /usr/bin/brook&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;nohup ./brook server -l :80 -p pass1234 &amp;amp;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
    
    </summary>
    
    
      <category term="科学上网" scheme="https://www.rootfw.com/categories/%E7%A7%91%E5%AD%A6%E4%B8%8A%E7%BD%91/"/>
    
      <category term="Brook" scheme="https://www.rootfw.com/categories/%E7%A7%91%E5%AD%A6%E4%B8%8A%E7%BD%91/Brook/"/>
    
    
      <category term="brook" scheme="https://www.rootfw.com/tags/brook/"/>
    
      <category term="翻墙" scheme="https://www.rootfw.com/tags/%E7%BF%BB%E5%A2%99/"/>
    
  </entry>
  
  <entry>
    <title>v2ray TCP原生配置</title>
    <link href="https://www.rootfw.com/posts/3ba3d10d.html"/>
    <id>https://www.rootfw.com/posts/3ba3d10d.html</id>
    <published>2020-06-10T00:39:10.000Z</published>
    <updated>2020-06-25T04:14:00.155Z</updated>
    
    <content type="html"><![CDATA[<h2 id="Linux-安装脚本"><a href="#Linux-安装脚本" class="headerlink" title="Linux 安装脚本"></a>Linux 安装脚本</h2><p>V2Ray 提供了一个在 Linux 中的自动化安装脚本。这个脚本会自动检测有没有安装过 V2Ray，如果没有，则进行完整的安装和配置；如果之前安装过 V2Ray，则只更新 V2Ray 二进制程序而不更新配置。</p><p>以下指令假设已在 su 环境下，如果不是，请先运行 sudo su。</p><p>运行下面的指令下载并安装 V2Ray。当 yum 或 apt-get 可用的情况下，此脚本会自动安装 unzip 和 daemon。这两个组件是安装 V2Ray 的必要组件。如果你使用的系统不支持 yum 或 apt-get，请自行安装 unzip 和 daemon</p><h2 id="安装v2ray官方代码-老版本代码"><a href="#安装v2ray官方代码-老版本代码" class="headerlink" title="安装v2ray官方代码(老版本代码)"></a>安装v2ray官方代码(老版本代码)</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo -i</span><br><span class="line">bash &lt;(curl -L -s https://install.direct/go.sh)</span><br></pre></td></tr></table></figure><p>运行下面的指令下载并安装 V2Ray。当 yum 或 apt-get 可用的情况下，此脚本会自动安装 unzip 和 daemon。这两个组件是安装 V2Ray 的必要组件。如果你使用的系统不支持 yum 或 apt-get，请自行安装 unzip 和 daemon</p><h2 id="vps服务器时间同步本地时间"><a href="#vps服务器时间同步本地时间" class="headerlink" title="vps服务器时间同步本地时间"></a>vps服务器时间同步本地时间</h2><p>debian系统vps时间同步本地时间 (先输入sudo -i在同步时间 必须同步时间切记)<br>     <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">sudo -i     <span class="comment">#root权限</span></span><br><span class="line">sudo -R     <span class="comment">#查看vps服务器时间</span></span><br><span class="line">rm -rf /etc/localtime </span><br><span class="line">cp /usr/share/zoneinfo/Asia/Shanghai /etc/localtime     <span class="comment">#同步上海时间，如果您在海外请同步所在国家的时间</span></span><br></pre></td></tr></table></figure><br>centos7系统vps时间同步本地时间（先输入dudo -i在同步时间 必须同步时间切记）<br>    <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">sudo -i</span><br><span class="line">timedatectl <span class="built_in">set</span>-local-rtc 1</span><br><span class="line">timedatectl <span class="built_in">set</span>-timezone Asia/Shangha                   <span class="comment">#同步上海时间，如果您在海外请同步所在国家的时间</span></span><br><span class="line">sudo -R                                                 <span class="comment">#重新查看本地时间</span></span><br></pre></td></tr></table></figure></p><h2 id="配置v2ray服务端"><a href="#配置v2ray服务端" class="headerlink" title="配置v2ray服务端"></a>配置v2ray服务端</h2><p>root权限下输入vi /etc/v2ray/config.json配置界面<br>长按键盘上 D键 清除所有当前配置，在按键盘上 Ins键 或者 键盘 i键<br>把下面代码复制并且黏贴到服务器中，在按键盘上ESC键，输入 ：wq 保存退出</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="string">"log"</span>: &#123;</span><br><span class="line">        <span class="string">"access"</span>: <span class="string">"/var/log/v2ray/access.log"</span>,</span><br><span class="line">        <span class="string">"error"</span>: <span class="string">"/var/log/v2ray/error.log"</span>,</span><br><span class="line">        <span class="string">"loglevel"</span>: <span class="string">"warning"</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="string">"inbound"</span>: &#123;</span><br><span class="line">        <span class="string">"port"</span>: 12345, //请在防火墙开启对应的端口</span><br><span class="line">        <span class="string">"protocol"</span>: <span class="string">"vmess"</span>,  //vmess协议</span><br><span class="line">        <span class="string">"settings"</span>: &#123;</span><br><span class="line">            <span class="string">"clients"</span>: [</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="string">"id"</span>: <span class="string">"db790014-700d-9b1c-d987-5aed2afa60ae"</span>,  //UUid 这个ID可以通过v2ray客户端生成new替换</span><br><span class="line">                    <span class="string">"level"</span>: 1,</span><br><span class="line">                    <span class="string">"alterId"</span>: 52  //额外id</span><br><span class="line">                &#125;</span><br><span class="line">            ]</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="string">"outbound"</span>: &#123;</span><br><span class="line">        <span class="string">"protocol"</span>: <span class="string">"freedom"</span>,</span><br><span class="line">        <span class="string">"settings"</span>: &#123;&#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="string">"inboundDetour"</span>: [],</span><br><span class="line">    <span class="string">"outboundDetour"</span>: [</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="string">"protocol"</span>: <span class="string">"blackhole"</span>,</span><br><span class="line">            <span class="string">"settings"</span>: &#123;&#125;,</span><br><span class="line">            <span class="string">"tag"</span>: <span class="string">"blocked"</span></span><br><span class="line">        &#125;</span><br><span class="line">    ],</span><br><span class="line">    <span class="string">"routing"</span>: &#123;</span><br><span class="line">        <span class="string">"strategy"</span>: <span class="string">"rules"</span>,</span><br><span class="line">        <span class="string">"settings"</span>: &#123;</span><br><span class="line">            <span class="string">"rules"</span>: [</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="string">"type"</span>: <span class="string">"field"</span>,</span><br><span class="line">                    <span class="string">"ip"</span>: [</span><br><span class="line">                        <span class="string">"0.0.0.0/8"</span>,</span><br><span class="line">                        <span class="string">"10.0.0.0/8"</span>,</span><br><span class="line">                        <span class="string">"100.64.0.0/10"</span>,</span><br><span class="line">                        <span class="string">"127.0.0.0/8"</span>,</span><br><span class="line">                        <span class="string">"169.254.0.0/16"</span>,</span><br><span class="line">                        <span class="string">"172.16.0.0/12"</span>,</span><br><span class="line">                        <span class="string">"192.0.0.0/24"</span>,</span><br><span class="line">                        <span class="string">"192.0.2.0/24"</span>,</span><br><span class="line">                        <span class="string">"192.168.0.0/16"</span>,</span><br><span class="line">                        <span class="string">"198.18.0.0/15"</span>,</span><br><span class="line">                        <span class="string">"198.51.100.0/24"</span>,</span><br><span class="line">                        <span class="string">"203.0.113.0/24"</span>,</span><br><span class="line">                        <span class="string">"::1/128"</span>,</span><br><span class="line">                        <span class="string">"fc00::/7"</span>,</span><br><span class="line">                        <span class="string">"fe80::/10"</span></span><br><span class="line">                    ],</span><br><span class="line">                    <span class="string">"outboundTag"</span>: <span class="string">"blocked"</span></span><br><span class="line">                &#125;</span><br><span class="line">            ]</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="防火墙设置"><a href="#防火墙设置" class="headerlink" title="防火墙设置"></a>防火墙设置</h2><p>不同VPS服务器设置不一样，请在服务器网页后台添加防火墙规则，有些服务器后台没有防火墙设置则需要代码开启<br>启动防火墙： systemctl start firewalld<br>开机启动：systemctl enable firewalld.service<br>查看状态： systemctl status firewalld<br>开启12345端口：firewall-cmd –zone=public –add-port=12345/tcp –permanen 开12345tcp端口（端口自定义保持和v2ray端口一致）<br>重新加载防火墙：sudo firewall-cmd –reload<br>重新启动防火墙：systemctl restart firewalld </p><h2 id="查看v2ray运行程序"><a href="#查看v2ray运行程序" class="headerlink" title="查看v2ray运行程序"></a>查看v2ray运行程序</h2><p>   输入代码service v2ray start 开启v2ray<br>   输入代码service v2ray stop  关闭v2ray<br>   输入代码service v2ray restart  重新启动v2ray<br>   输入代码service v2ray status -l 查看v2ray运行状态</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;Linux-安装脚本&quot;&gt;&lt;a href=&quot;#Linux-安装脚本&quot; class=&quot;headerlink&quot; title=&quot;Linux 安装脚本&quot;&gt;&lt;/a&gt;Linux 安装脚本&lt;/h2&gt;&lt;p&gt;V2Ray 提供了一个在 Linux 中的自动化安装脚本。这个脚本会自动检测
      
    
    </summary>
    
    
      <category term="科学上网" scheme="https://www.rootfw.com/categories/%E7%A7%91%E5%AD%A6%E4%B8%8A%E7%BD%91/"/>
    
      <category term="v2ray" scheme="https://www.rootfw.com/categories/%E7%A7%91%E5%AD%A6%E4%B8%8A%E7%BD%91/v2ray/"/>
    
    
      <category term="翻墙" scheme="https://www.rootfw.com/tags/%E7%BF%BB%E5%A2%99/"/>
    
      <category term="v2ray" scheme="https://www.rootfw.com/tags/v2ray/"/>
    
  </entry>
  
  <entry>
    <title>v2ray下载安装</title>
    <link href="https://www.rootfw.com/posts/65f94be0.html"/>
    <id>https://www.rootfw.com/posts/65f94be0.html</id>
    <published>2020-06-09T13:29:49.000Z</published>
    <updated>2020-08-06T11:22:28.791Z</updated>
    
    <content type="html"><![CDATA[<h1 id="v2ray主要特征"><a href="#v2ray主要特征" class="headerlink" title="v2ray主要特征"></a>v2ray主要特征</h1><ul><li>多入口多出口: 一个 V2Ray 进程可并发支持多个入站和出站协议，每个协议可独立工作。</li><li>可定制化路由: 入站流量可按配置由不同的出口发出。轻松实现按区域或按域名分流，以达到最优的网络性能。</li><li>多协议支持: V2Ray 可同时开启多个协议支持，包括 Socks、HTTP、Shadowsocks、VMess 等。每个协议可单独设置– 传输载   　体，比如 TCP、mKCP、WebSocket 等。</li><li>隐蔽性: V2Ray 的节点可以伪装成正常的网站（HTTPS），将其流量与正常的网页流量混淆，以避开第三方干扰。</li><li>反向代理: 通用的反向代理支持，可实现内网穿透功能。</li><li>多平台支持: 原生支持所有常见平台，如 Windows、Mac OS、Linux，并已有第三方支持移动平台</li></ul><a id="more"></a><h1 id="v2ray在以下平台中可使用"><a href="#v2ray在以下平台中可使用" class="headerlink" title="v2ray在以下平台中可使用"></a>v2ray在以下平台中可使用</h1><ul><li>Windows 7 及之后版本（x86 / amd64）；</li><li>Mac OS X 10.10 Yosemite 及之后版本（amd64）；</li><li>Linux 2.6.23 及之后版本（x86 / amd64 / arm / arm64 / mips64 / mips）；包括但不限于 Debian 7 / 8、Ubuntu 12.04 / 14.04 及后续版本、CentOS 6 / 7、Arch Linux；</li><li>FreeBSD (x86 / amd64)；</li><li>OpenBSD (x86 / amd64)；</li><li>Dragonfly BSD (amd64)；</li><li>IOS/安卓/软路由等</li></ul><h1 id="下载-v2ray"><a href="#下载-v2ray" class="headerlink" title="下载 v2ray"></a>下载 v2ray</h1><ul><li><p><a href="https://github.com/v2ray/v2ray-core/releases">Github Release: github.com/v2ray/v2ray-core</a></p></li><li><p><a href="https://github.com/v2ray/dist/">Github 分流: github.com/v2ray/dist</a></p></li><li><p><a href="https://github.com/v2ray/homebrew-v2ray">Homebrew: github.com/v2ray/homebrew-v2ray</a></p></li><li><p><a href="https://www.archlinux.org/packages/community/x86_64/v2ray/">Arch Linux: packages/community/x86_64/v2ray</a></p></li><li><p><a href="https://snapcraft.io/v2ray-core">Snapcraft: snapcraft.io/v2ray-core</a></p></li><li><p>压缩包均为 zip 格式，找到对应平台的压缩包，下载解压即可使用。</p></li></ul><h1 id="验证安装包"><a href="#验证安装包" class="headerlink" title="验证安装包"></a>验证安装包</h1><ul><li>V2Ray 提供两种验证方式：</li></ul><ol><li>安装包 zip 文件的 SHA1 / SHA256 摘要，在每个安装包对应的.dgst文件中可以找到。</li><li>可运行程序（v2ray 或 v2ray.exe）的 gpg 签名，文件位于安装包中的 v2ray.sig 或 v2ray.exe.sig。签名公钥可以在<a href="https://raw.githubusercontent.com/v2ray/v2ray-core/master/release/verify/official_release.asc">代码库</a>中找到。</li></ol><h1 id="Windows-和-Mac-OS-安装方式"><a href="#Windows-和-Mac-OS-安装方式" class="headerlink" title="Windows 和 Mac OS 安装方式"></a>Windows 和 Mac OS 安装方式</h1><ul><li>通过上述方式下载的压缩包，解压之后可看到 v2ray 或 v2ray.exe。直接运行即可。</li></ul><h1 id="Linux-发行版仓库"><a href="#Linux-发行版仓库" class="headerlink" title="Linux 发行版仓库"></a>Linux 发行版仓库</h1><ul><li>部分发行版可能已收录 V2Ray 到其官方维护和支持的软件仓库/软件源中。</li><li>出于兼容性、适配性考虑，您可以考虑选用由您发行版开发团队维护的软件包或下文的安装脚本亦或基于已发布的二进制文件或源代&emsp;码安装。</li></ul><h1 id="Linux-安装脚本"><a href="#Linux-安装脚本" class="headerlink" title="Linux 安装脚本"></a>Linux 安装脚本</h1><ul><li><p>V2Ray 提供了一个在 Linux 中的自动化安装脚本。这个脚本会自动检测有没有安装过 V2Ray，如果没有，则进行完整的安装和配  置；如果之前安装过 V2Ray，则只更新 V2Ray 二进制程序而不更新配置。</p></li><li><p>以下指令假设已在 su 环境下，如果不是，请先运行 sudo su。</p></li><li><p>运行下面的指令下载并安装 V2Ray。当 yum 或 apt-get 可用的情况下，此脚本会自动安装 unzip 和 daemon。</p></li><li><p>这两个组件是安   装 V2Ray 的必要组件。如果你使用的系统不支持 yum 或 apt-get，请自行安装 unzip 和 daemon</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bash &lt;(curl -L -s https://install.direct/go.sh)</span><br></pre></td></tr></table></figure></li><li><p>此脚本会自动安装以下文件：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;usr&#x2F;bin&#x2F;v2ray&#x2F;v2ray：V2Ray 程序；</span><br><span class="line">&#x2F;usr&#x2F;bin&#x2F;v2ray&#x2F;v2ctl：V2Ray 工具；</span><br><span class="line">&#x2F;etc&#x2F;v2ray&#x2F;config.json：配置文件；</span><br><span class="line">&#x2F;usr&#x2F;bin&#x2F;v2ray&#x2F;geoip.dat：IP 数据文件</span><br><span class="line">&#x2F;usr&#x2F;bin&#x2F;v2ray&#x2F;geosite.dat：域名数据文件</span><br></pre></td></tr></table></figure></li><li><p>此脚本会配置自动运行脚本。自动运行脚本会在系统重启之后，自动运行 V2Ray。目前自动运行脚本只支持带有 Systemd 的系     统，以及 Debian / Ubuntu 全系列。</p></li><li><p>运行脚本位于系统的以下位置：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">/etc/systemd/system/v2ray.service: Systemd</span><br><span class="line">/etc/init.d/v2ray: SysV</span><br></pre></td></tr></table></figure></li><li><p>脚本运行完成后，你需要：</p></li><li><p>输入<strong>vi/etc/v2ray/config.json</strong>文件来配置你需要的代理方式；</p></li><li><p>运行 service v2ray start 来启动 V2Ray 进程；</p></li><li><p>之后可以使用 <strong>service v2ray start|stop|status|reload|restart|force-reload</strong> 控制 V2Ray 的运行。</p></li><li><p>go.sh 参数</p></li><li><p>go.sh 支持如下参数，可在手动安装时根据实际情况调整：</p></li><li><p>-p 或 –proxy: 使用代理服务器来下载 V2Ray 的文件，格式与 curl 接受的参数一致，比如 “socks5://127.0.0.1:1080” 或  “<a href="http://127.0.0.1:3128&quot;。">http://127.0.0.1:3128&quot;。</a></p></li><li><p>-f 或 –force: 强制安装。在默认情况下，如果当前系统中已有最新版本的 V2Ray，go.sh 会在检测之后就退出。如果需要强制   重装一遍，则需要指定该参数。</p></li><li><p>version: 指定需要安装的版本，比如 “v1.13”。默认值为最新版本。</p></li><li><p>local: 使用一个本地文件进行安装。如果你已经下载了某个版本的 V2Ray，则可通过这个参数指定一个文件路径来进行安装。</p></li></ul><h1 id="示例如下："><a href="#示例如下：" class="headerlink" title="示例如下："></a>示例如下：</h1><ul><li><p>使用地址为 127.0.0.1:1080 的 SOCKS 代理下载并安装最新版本：./go.sh -p socks5://127.0.0.1:1080</p></li><li><p>安装本地的 v1.13 版本：./go.sh –version v1.13 –local /path/to/v2ray.zip</p></li><li><p>V2Ray 提供了两个预编译的 Docker image：</p></li><li><p>v2ray/official: 包含最新发布的版本，每周跟随新版本更新；</p></li><li><p>v2ray/dev: 包含由最新的代码编译而成的程序文件，随代码库更新；</p></li><li><p>两个 image 的文件结构相同：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">/etc/v2ray/config.json                  <span class="comment">#配置文件</span></span><br><span class="line">/usr/bin/v2ray/v2ray                   <span class="comment"># V2Ray 主程序</span></span><br><span class="line">/usr/bin/v2ray/v2ctl                   <span class="comment">#V2Ray 辅助工具</span></span><br><span class="line">/usr/bin/v2ray/geoip.dat              <span class="comment"># IP 数据文件</span></span><br><span class="line">/usr/bin/v2ray/geosite.dat           <span class="comment"># 域名数据文件</span></span><br></pre></td></tr></table></figure></li></ul>]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;v2ray主要特征&quot;&gt;&lt;a href=&quot;#v2ray主要特征&quot; class=&quot;headerlink&quot; title=&quot;v2ray主要特征&quot;&gt;&lt;/a&gt;v2ray主要特征&lt;/h1&gt;&lt;ul&gt;
&lt;li&gt;多入口多出口: 一个 V2Ray 进程可并发支持多个入站和出站协议，每个协议可独立工作。&lt;/li&gt;
&lt;li&gt;可定制化路由: 入站流量可按配置由不同的出口发出。轻松实现按区域或按域名分流，以达到最优的网络性能。&lt;/li&gt;
&lt;li&gt;多协议支持: V2Ray 可同时开启多个协议支持，包括 Socks、HTTP、Shadowsocks、VMess 等。每个协议可单独设置– 传输载   　体，比如 TCP、mKCP、WebSocket 等。&lt;/li&gt;
&lt;li&gt;隐蔽性: V2Ray 的节点可以伪装成正常的网站（HTTPS），将其流量与正常的网页流量混淆，以避开第三方干扰。&lt;/li&gt;
&lt;li&gt;反向代理: 通用的反向代理支持，可实现内网穿透功能。&lt;/li&gt;
&lt;li&gt;多平台支持: 原生支持所有常见平台，如 Windows、Mac OS、Linux，并已有第三方支持移动平台&lt;/li&gt;
&lt;/ul&gt;
    
    </summary>
    
    
      <category term="科学上网" scheme="https://www.rootfw.com/categories/%E7%A7%91%E5%AD%A6%E4%B8%8A%E7%BD%91/"/>
    
      <category term="v2ray" scheme="https://www.rootfw.com/categories/%E7%A7%91%E5%AD%A6%E4%B8%8A%E7%BD%91/v2ray/"/>
    
    
      <category term="v2ray" scheme="https://www.rootfw.com/tags/v2ray/"/>
    
  </entry>
  
</feed>
